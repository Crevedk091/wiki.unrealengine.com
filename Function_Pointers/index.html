<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>wiki.unrealengine.com</title>
    <meta name="description" content="A static site pulled from the internet archive">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css" as="style"><link rel="preload" href="/wiki.unrealengine.com/assets/js/app.aaf63946.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/2.4f53495e.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/518.5d4b1bf4.js" as="script">
    <link rel="stylesheet" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki.unrealengine.com/" class="home-link router-link-active"><!----> <span class="site-name">wiki.unrealengine.com</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>Function Pointers - Epic Wiki</p> <h1 id="function-pointers"><a href="#function-pointers" class="header-anchor">#</a> Function Pointers</h1> <h2 id="contents"><a href="#contents" class="header-anchor">#</a> Contents</h2> <ul><li><a href="#Overview">1 Overview</a></li> <li><a href="#My_Example:_30_Behavior_Functions">2 My Example: 30 Behavior Functions</a></li> <li><a href="#Special_Thanks_and_C.2B.2B_Note">3 Special Thanks and C++ Note</a></li> <li><a href="#C.2B.2B_Code_for_UCLASS.28.29_Function_Pointers">4 C++ Code for UCLASS() Function Pointers</a> <ul><li><a href="#.h">4.1 .h</a></li> <li><a href="#.cpp">4.2 .cpp</a></li></ul></li> <li><a href="#Syntax_Complexity_Comparison">5 Syntax Complexity Comparison</a></li> <li><a href="#Summary">6 Summary</a></li></ul> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p><em>Original Author:</em> <a href="/User:Rama" title="User:Rama">Rama</a> (<a href="/User_talk:Rama" title="User talk:Rama">talk</a>)</p> <p>Dear Community,</p> <p>When you have a whole bunch of functions that you want to call, that are all related in some way,</p> <p>you can make a function pointer array to quickly access and call a specific function by index!</p> <h2 id="my-example-30-behavior-functions"><a href="#my-example-30-behavior-functions" class="header-anchor">#</a> My Example: 30 Behavior Functions</h2> <p>In my example, I have 30 behaviors that are all virtual functions as part of an AI system.</p> <p>Each creature needs to implement the behavior in its own way, so the functions are virtual.</p> <p>But in the AI class, I need to be able to say &quot;run this behavior function&quot; quickly and easily.</p> <p>That's what function pointers enable you to do!</p> <h2 id="special-thanks-and-c-note"><a href="#special-thanks-and-c-note" class="header-anchor">#</a> Special Thanks and C++ Note</h2> <p>You can easily find info on function pointers on the internet, but in UE4 classes you need to also specify the namespace, and I was having trouble with that part</p> <p>Special thanks go to Steve Allison and other Epic Devs for offering the correct syntax!</p> <h2 id="c-code-for-uclass-function-pointers"><a href="#c-code-for-uclass-function-pointers" class="header-anchor">#</a> C++ Code for UCLASS() Function Pointers</h2> <h3 id="h"><a href="#h" class="header-anchor">#</a> .h</h3> <p>#include &quot;YourClass.generated.h&quot;
 
#define BEHAVIORS_MAX 30
 
UCLASS()
class AYourClass : AActor //or any other class setup
{
GENERATED_UCLASS_BODY()
 
public:
 
//The Function Pointer Variable Type
//Functions take in 0 parameters and return void
typedef void (AYourClass::*FunctionPtrType)(void);
 
//A static array of 30 Function Pointers
FunctionPtrType BehaviorFunctions[BEHAVIORS_MAX];
 
//Play a Behavior from the Function Pointer Array
//	implementation does not vary in subclasses, so not virtual
void PlayBehavior(int32 BehaviorIndex );
 
//Initialize the array
void InitBehaviors();
 
//The actual functions which are implemented in subclasses
//or this class itself
virtual void PlayBehavior_Idle_LookLeftToRight();
virtual void PlayBehavior_Idle_LookFullCircle();
virtual void PlayBehavior_Idle_ScanUpDown();
//...more functions</p> <h3 id="cpp"><a href="#cpp" class="header-anchor">#</a> .cpp</h3> <p>#define LOOK_FULL_CIRCLE 0
 
#define SCAN_LEFT_TO_RIGHT 1
 
#define SCAN_UP_DOWN	  2
//... more function index defines to 29
 
void AYourClass::InitBehaviors()
{
BehaviorFunctions[LOOK_FULL_CIRCLE] = &amp;AYourClass::PlayBehavior_Idle_LookFullCircle;
BehaviorFunctions[SCAN_LEFT_TO_RIGHT] = &amp;AYourClass::PlayBehavior_Idle_LookLeftToRight;
BehaviorFunctions[SCAN_UP_DOWN] = &amp;AYourClass::PlayBehavior_Idle_ScanUpDown;
//...more functions
}
 
void AYourClass::PlayBehavior_Idle_LookLeftToRight(){}
void AYourClass::PlayBehavior_Idle_LookFullCircle(){}
void AYourClass::PlayBehavior_Idle_ScanUpDown(){}
//...rest of functions
 
 
void AYourClass::PlayBehavior(int32 BehaviorIndex )
{
//valid range check
if (BehaviorIndex &gt;= BEHAVIORS_MAX || BehaviorIndex &lt; 0) return;
//~~
 
//Special Thanks to Epic for this Syntax
(this-&gt;* (BehaviorFunctions[BehaviorIndex]))();
 
//the above line plays the appropriate function based on the passed in index!
}</p> <h2 id="syntax-complexity-comparison"><a href="#syntax-complexity-comparison" class="header-anchor">#</a> Syntax Complexity Comparison</h2> <p>this same sort of setup, without function pointers, would either have been a switch statement, or a series of if elses.</p> <p>Supposing there were actually 30 entries you can see why a function pointer array simplifies all this!</p> <p>this</p> <p>//Without function pointers
if(BehaviorIndex == SCAN_LEFT_TO_RIGHT)
PlayBehavior_Idle_LookLeftToRight();
 
else if (BehaviorIndex == LOOK_FULL_CIRCLE)
PlayBehavior_Idle_LookFullCircle();
 
else if (BehaviorIndex == SCAN_UP_DOWN)
PlayBehavior_Idle_ScanUpDown();
//...
//...
//and much much more ...</p> <p>becomes this!</p> <p>//With Function Pointers
//Special Thanks to Epic for this Syntax
(this-&gt;* (BehaviorFunctions[BehaviorIndex]))();
 
//that's it! nothing else!!!!</p> <h2 id="summary"><a href="#summary" class="header-anchor">#</a> Summary</h2> <p>Thanks to Epic I can now present to you the correct C++ syntax for using UCLASS-specific function pointers!</p> <p><a href="/User:Rama" title="User:Rama">Rama</a> (<a href="/User_talk:Rama" title="User talk:Rama">talk</a>)</p> <p>Retrieved from &quot;<a href="https://wiki.unrealengine.com/index.php?title=Function_Pointers&amp;oldid=2325" target="_blank" rel="noopener noreferrer">https://wiki.unrealengine.com/index.php?title=Function_Pointers&amp;oldid=2325<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&quot;</p> <p><a href="/Special:Categories" title="Special:Categories">Category</a>:</p> <ul><li><a href="/Category:Code" title="Category:Code">Code</a></li></ul> <p><img src="https://tracking.unrealengine.com/track.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wiki.unrealengine.com/assets/js/app.aaf63946.js" defer></script><script src="/wiki.unrealengine.com/assets/js/2.4f53495e.js" defer></script><script src="/wiki.unrealengine.com/assets/js/518.5d4b1bf4.js" defer></script>
  </body>
</html>
