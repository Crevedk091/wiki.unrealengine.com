<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>wiki.unrealengine.com</title>
    <meta name="description" content="A static site pulled from the internet archive">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css" as="style"><link rel="preload" href="/wiki.unrealengine.com/assets/js/app.aaf63946.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/2.4f53495e.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/1208.7db6ab86.js" as="script">
    <link rel="stylesheet" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki.unrealengine.com/" class="home-link router-link-active"><!----> <span class="site-name">wiki.unrealengine.com</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>Vines wrapping around an object - Epic Wiki</p> <h1 id="vines-wrapping-around-an-object"><a href="#vines-wrapping-around-an-object" class="header-anchor">#</a> Vines wrapping around an object</h1> <p><strong>Rate this Page:</strong></p> <p>5.00</p> <p><img src="/extensions/VoteNY/images/star_on.gif" alt=""><img src="/extensions/VoteNY/images/star_on.gif" alt=""><img src="/extensions/VoteNY/images/star_on.gif" alt=""><img src="/extensions/VoteNY/images/star_on.gif" alt=""><img src="/extensions/VoteNY/images/star_on.gif" alt=""> (one vote)</p> <p>Approved for Versions:4.8</p> <h2 id="contents"><a href="#contents" class="header-anchor">#</a> Contents</h2> <ul><li><a href="#Overview">1 Overview</a></li> <li><a href="#Creating_vines_around_the_object_in_3ds_Max">2 Creating vines around the object in 3ds Max</a></li> <li><a href="#Creating_a_vines_material_effect">3 Creating a vines material effect</a></li> <li><a href="#Animating_in_a_blueprint">4 Animating in a blueprint</a></li> <li><a href="#Additional_tricks">5 Additional tricks</a></li></ul> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>In this tutorial, I show how to quickly create an animation of vines wrapping around an object animation without the use of morphs/vertex animation. The tutorial is split into two parts: first we prepare the meshes and UVs in 3ds Max (or any other program), followed by the magic done in Unreal Engine 4. We do a lot of &quot;cheating&quot; to produce animation, namely we will use masks, panned textures and pixel displacement to accomplish the effect. In the end, we wrap the effect with an appropriate blueprint. Here is in-game result</p> <p><a href="/File:VineInGameShowcase.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/c/cd/VineInGameShowcase.png/940px-VineInGameShowcase.png" alt=""></a></p> <p><a href="/File:VineInGameShowcase.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>In game showcase of vine growing</p> <h2 id="creating-vines-around-the-object-in-3ds-max"><a href="#creating-vines-around-the-object-in-3ds-max" class="header-anchor">#</a> Creating vines around the object in 3ds Max</h2> <p>Import the object that we want to wrap with vines for visual reference. In our case, this is a character in &quot;stuck in vines&quot; pose. You can later animate this pose a bit to add variety on character. You can use something simple as well, like a wall if you want to simulate vines that grow up the wall effect.</p> <p><a href="/File:Vine3dsmax.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/9/9e/Vine3dsmax.png/940px-Vine3dsmax.png" alt=""></a></p> <p><a href="/File:Vine3dsmax.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>3ds Max setup for vines</p> <p>We now create vines wrapping the object:</p> <ul><li>create a few splines that wrap the object nicely. Use bezier points (right click on vertex, convert to bezier) for smoother results.</li> <li>for each vine, create a cylinder and add modifier Wrap To Path (use move to spline). Adjust the cylinder's height, segments and radius. 10 segments around the cylinder usually suffices, and as many height segments as needed for the result to use smooth enough. Iterate back to curves if needed. You can hide the cylinders to adjust paths and unhide them when you are done. Make a separate copy at this stage because you may need it for further tweaking. The process after that is destructive.</li> <li>when everything looks nice, set the radius of each cylinder to really small value. I use 0.001 (1 mm). This makes them very thin indeed. In UE4, we will use displacement along normal to make them thick again where needed but we need to export them like this.</li> <li>convert all cylinders to Poly meshes and attach them together (Add Object when in Poly Mesh). Rename combined object appropriately.</li> <li>add Unwrap UVW modifier, select all faces and rescale the maps to object size in unwrap editor. This will make the texture distribution uniform along all elements. Place unwraps of each element (previously each cylinder) to appropriate location according to the time they appear in the animation: placing them higher in Y makes the appear later (and smaller). I usually put smaller vine parts at the top. Make sure the unwraps are also correctly oriented (the top part of unwrap should correspond to the end of the vine). The end result should be tightly overlapped unwraps.</li> <li>export Vine object to FBX</li></ul> <h2 id="creating-a-vines-material-effect"><a href="#creating-a-vines-material-effect" class="header-anchor">#</a> Creating a vines material effect</h2> <p>Import the vines mesh to UE4 and create an empty material M_Vines. The complete material is given in the picture. Here are tricks I use:</p> <p><a href="/File:VineMaterial1.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/1/14/VineMaterial1.png/940px-VineMaterial1.png" alt=""></a></p> <p><a href="/File:VineMaterial1.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Vines material 1</p> <p><a href="/File:VineMaterial2.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/3/3f/VineMaterial2.png/940px-VineMaterial2.png" alt=""></a></p> <p><a href="/File:VineMaterial2.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Vines material 2</p> <p><a href="/File:VineMaterial3.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/f/f2/VineMaterial3.png/940px-VineMaterial3.png" alt=""></a></p> <p><a href="/File:VineMaterial3.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Vines material 3</p> <p><a href="/File:VineMaterial4.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/7/70/VineMaterial4.png/940px-VineMaterial4.png" alt=""></a></p> <p><a href="/File:VineMaterial4.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Vines material 4</p> <ul><li>Use material setup: masked, enable adaptive displacement, use triangles and without holes.</li> <li>I use seamlessly tiled texture for the the diffuse and normal map. I scale the texture coordinates in Y direction (I use value around 10, change it until it looks good) because the unwrap is very uniform.</li> <li>The scalar parameter Growth is used to specify how big the vine is. I subtract the texture coordinate Y (green) from Growth and clamp it to range (0,1; this creates a mask for the animation effect. Where the mask is 0, the object should not be shown, so I put this pin to Opacity Mask material input and set clipping value in material properties to a small value, like 0.05.</li> <li>The Growth mask is also used to displace the vertices outward; I use power before applying displacement to get a non-linear displacement along the vine. Simply use normal multiplied by the mask and the maximum displacement at that position to achieve that effect. Additionally, the maximum displacement at the current position is calculated by lerping two values by noise: this creates some definition on the vine.</li> <li>We want the vines to appear to be moving up, therefore we use the same Growth to displace the diffuse and normal textures in Y direction.</li></ul> <p>I recommend creating a material instance and specifying custom preview mesh (the vines). There, you can play with parameters to see the effect and the animation.</p> <p><a href="/File:VineMaterialInstance.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/0/04/VineMaterialInstance.png/940px-VineMaterialInstance.png" alt=""></a></p> <p><a href="/File:VineMaterialInstance.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Playing around with material instance</p> <h2 id="animating-in-a-blueprint"><a href="#animating-in-a-blueprint" class="header-anchor">#</a> Animating in a blueprint</h2> <p>Simply place the vines mesh and apply the material. On BeginPlay, create dynamic material instance, and start a timeline. I have a curve named Growth that grows linearly in 1 second from 0 to 1, and I apply this value to dynamic material's parameter Growth on each update. The advantage of using timelines is that you can pause or reverse it at any time (on destroy event, for example when only half of the growth animation is done).</p> <h2 id="additional-tricks"><a href="#additional-tricks" class="header-anchor">#</a> Additional tricks</h2> <p>Additional tricks you could use:</p> <ul><li>Use color channel or another texture to paint maximum displacement (instead of noise map)</li> <li>You can add animation to vines. I have done so by adding &quot;random&quot; movement based on second UV coordinate and time: combination of sine multiplies with different periods looks chaotic enough.</li> <li>You can animate the size at each position: scaling the noise texture that controls the displacement along normals over time works nicely.</li></ul> <p>Enjoy!</p> <p>Ziga</p> <p>Retrieved from &quot;<a href="https://wiki.unrealengine.com/index.php?title=Vines_wrapping_around_an_object&amp;oldid=14872" target="_blank" rel="noopener noreferrer">https://wiki.unrealengine.com/index.php?title=Vines_wrapping_around_an_object&amp;oldid=14872<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&quot;</p> <p><a href="/Special:Categories" title="Special:Categories">Categories</a>:</p> <ul><li><a href="/Category:Tutorials" title="Category:Tutorials">Tutorials</a></li> <li><a href="/Category:Community_Created_Content" title="Category:Community Created Content">Community Created Content</a></li></ul> <p>Hidden category:</p> <ul><li><a href="/Category:Templates" title="Category:Templates">Templates</a></li></ul> <p><img src="https://tracking.unrealengine.com/track.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wiki.unrealengine.com/assets/js/app.aaf63946.js" defer></script><script src="/wiki.unrealengine.com/assets/js/2.4f53495e.js" defer></script><script src="/wiki.unrealengine.com/assets/js/1208.7db6ab86.js" defer></script>
  </body>
</html>
