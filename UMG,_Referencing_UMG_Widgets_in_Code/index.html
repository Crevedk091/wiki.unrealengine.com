<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>wiki.unrealengine.com</title>
    <meta name="description" content="A static site pulled from the internet archive">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css" as="style"><link rel="preload" href="/wiki.unrealengine.com/assets/js/app.aaf63946.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/2.4f53495e.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/1115.f593b003.js" as="script">
    <link rel="stylesheet" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki.unrealengine.com/" class="home-link router-link-active"><!----> <span class="site-name">wiki.unrealengine.com</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>UMG, Referencing UMG Widgets in Code - Epic Wiki</p> <h1 id="umg-referencing-umg-widgets-in-code"><a href="#umg-referencing-umg-widgets-in-code" class="header-anchor">#</a> UMG, Referencing UMG Widgets in Code</h1> <p>From Epic Wiki</p> <p>Jump to: <a href="#mw-head">navigation</a>, <a href="#p-search">search</a></p> <h2 id="contents"><a href="#contents" class="header-anchor">#</a> Contents</h2> <ul><li><a href="#Overview:_.28Tested_in_4.7.5.29">1 Overview: (Tested in 4.7.5)</a></li> <li><a href="#Here_is_the_situation:">2 Here is the situation:</a></li> <li><a href="#The_next_part_of_this_post_will_cover:">3 The next part of this post will cover:</a></li> <li><a href="#Prepare_Project:">4 Prepare Project:</a> <ul><li><a href="#1._Create_New_Map:">4.1 1. Create New Map:</a></li> <li><a href="#2._Create_C.2B.2B_PlayerController_Class:">4.2 2. Create C++ PlayerController Class:</a></li> <li><a href="#3._Create_UMG_Widget:">4.3 3. Create UMG Widget:</a></li> <li><a href="#4._Create_GameMode_and_PlayerController_Blueprints:">4.4 4. Create GameMode and PlayerController Blueprints:</a></li></ul></li> <li><a href="#Visual_Studio:">5 Visual Studio:</a> <ul><li><a href="#1._Adding_Modules:">5.1 1. Adding Modules:</a></li> <li><a href="#2._PlayerController:">5.2 2. PlayerController:</a></li></ul></li> <li><a href="#Testing">6 Testing</a></li> <li><a href="#Conclusion">7 Conclusion</a></li></ul> <h2 id="overview-tested-in-4-7-5"><a href="#overview-tested-in-4-7-5" class="header-anchor">#</a> <strong>Overview: (Tested in 4.7.5)</strong></h2> <p><em>Author:</em> <a href="/index.php?title=User:Bn_Green&amp;action=edit&amp;redlink=1" title="User:Bn Green (page does not exist)">Bn_Green</a> (<a href="/index.php?title=User_talk:Bn_Green&amp;action=edit&amp;redlink=1" title="User talk:Bn Green (page does not exist)">talk</a>)</p> <p>This is my first contribution to the Unreal awesome community I hope you find it useful especially for newcomers. While I am coding in C++ I always keep in mind that I am not working alone in the project and there is some people is doing stuff with me and I need to use their content in the project.</p> <h2 id="here-is-the-situation"><a href="#here-is-the-situation" class="header-anchor">#</a> <strong>Here is the situation:</strong></h2> <p>An artist is working on the UI using UMG and he made some fancy Widget And now it comes the part where I need to create this widget in C++ and have reference for it so I can use it in future.</p> <h2 id="the-next-part-of-this-post-will-cover"><a href="#the-next-part-of-this-post-will-cover" class="header-anchor">#</a> <strong>The next part of this post will cover:</strong></h2> <ol><li><p>How to Make a UMG widget blueprint in the Editor.</p></li> <li><p>Create and add to viewport using C++.</p></li> <li><p>Have a reference to it in a Variable for future use.</p></li> <li><p>Add the widget to the viewport.</p></li></ol> <h2 id="prepare-project"><a href="#prepare-project" class="header-anchor">#</a> <strong>Prepare Project:</strong></h2> <p>First lets create new blank project based on C++ and call it whatever you like.<br>
Then make this folder hierarchy:</p> <ol><li><p>Content Folder.</p></li> <li><p>Maps Folder -&gt; Create new Blank Map.</p></li> <li><p>Blueprints Folder -&gt; Widgets Folder.</p></li></ol> <h3 id="_1-create-new-map"><a href="#_1-create-new-map" class="header-anchor">#</a> <strong>1. Create New Map:</strong></h3> <p>Create new blank map and I called mine &quot;MainMenu&quot; and don't forget to save it.</p> <p><a href="/index.php?title=File:CreatNewMap.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/d/dd/CreatNewMap.png/700px-CreatNewMap.png" alt="CreatNewMap.png"></a></p> <h3 id="_2-create-c-playercontroller-class"><a href="#_2-create-c-playercontroller-class" class="header-anchor">#</a> <strong>2. Create C++ PlayerController Class:</strong></h3> <p>Go To C++ Classes Folder-&gt;MyProject<br>
And Create new C++ PlayerController Class Call it “MyPlayerController”</p> <p><a href="/index.php?title=File:CreatePC.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/c/c5/CreatePC.png/700px-CreatePC.png" alt="CreatePC.png"></a></p> <h3 id="_3-create-umg-widget"><a href="#_3-create-umg-widget" class="header-anchor">#</a> <strong>3. Create UMG Widget:</strong></h3> <p>Now Go to Blueprints Folder -&gt; Widgets Folder. And create new Widget Blueprint Call it “MainMenu”.</p> <p><a href="/index.php?title=File:CreateNewWidgetUMG.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/4/47/CreateNewWidgetUMG.png/700px-CreateNewWidgetUMG.png" alt="CreateNewWidgetUMG.png"></a></p> <p>Open the “MainMenu” widget and let's make a button Called “QuitBTN” then assign onClicked Event</p> <p><a href="/index.php?title=File:CreateBTN.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/1/1b/CreateBTN.png/700px-CreateBTN.png" alt="CreateBTN.png"></a></p> <p>and do the following</p> <p><a href="/index.php?title=File:QuitBTN.png"><img src="https://d26ilriwvtzlb.cloudfront.net/6/6a/QuitBTN.png" alt="QuitBTN.png"></a></p> <p>now we have ready widget with a button that exit the game on clicked using Blueprints.</p> <h3 id="_4-create-gamemode-and-playercontroller-blueprints"><a href="#_4-create-gamemode-and-playercontroller-blueprints" class="header-anchor">#</a> <strong>4. Create GameMode and PlayerController Blueprints:</strong></h3> <p>We need to create 2 more Blueprints and we are done from the editor for now.</p> <ol><li><p>Create Game Mode Blueprint “BP_GameMode” Based on ProjectNameGameMode.</p></li> <li><p>Create Player Controller Blueprint “BP_PlayerController” Based on PlayerController Class we created earlier.</p></li></ol> <p><a href="/index.php?title=File:PCandGM.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/b/b8/PCandGM.png/400px-PCandGM.png" alt="PCandGM.png"></a></p> <p><a href="/index.php?title=File:PCandGM2.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/6/67/PCandGM2.png/700px-PCandGM2.png" alt="PCandGM2.png"></a></p> <h2 id="visual-studio"><a href="#visual-studio" class="header-anchor">#</a> <strong>Visual Studio:</strong></h2> <h3 id="_1-adding-modules"><a href="#_1-adding-modules" class="header-anchor">#</a> <strong>1. Adding Modules:</strong></h3> <p>in order to use UMG in C++ you need to Add the following Modules in ProjectNameBuild.CS file</p> <p><code>&quot;UMG&quot;, &quot;Slate&quot;, &quot;SlateCore</code></p> <p>In this line:</p> <p><syntaxhighlight lang="cpp"> //ProjectNameBuild.CS</syntaxhighlight></p> <p>PublicDependencyModuleNames.AddRange(new string[] { &quot;Core&quot;, &quot;CoreUObject&quot;, &quot;Engine&quot;, &quot;InputCore&quot;, &quot;UMG&quot;, &quot;Slate&quot;, &quot;SlateCore&quot; });</p> <h3 id="_2-playercontroller"><a href="#_2-playercontroller" class="header-anchor">#</a> <strong>2. PlayerController:</strong></h3> <p>Open your MyPlayerController.h<br>
and we will make some variables and overriding the BeginPlay() function.<br>
PS: Better to add our widget reference to a <a href="/index.php?title=Global_Data_Access,_Data_Storage_Class_Accessible_From_Any_CPP_or_BP_Class_During_Runtime" title="Global Data Access, Data Storage Class Accessible From Any CPP or BP Class During Runtime">singleton class</a>.</p> <syntaxhighlight lang="cpp"><p>//MyPlayerController.h</p> <p>UCLASS() class MYPROJECT_API AMyPlayerController : public APlayerController { GENERATED_BODY()</p> <p>public: // Note: that I am using forward declaration Because I am not including the // widget in the header and to prevent circular dependency. // You don't need to do that if you include the Widget Class in the .h // Forward declaration is just putting &quot;class&quot; before the class name so the compiler know it's a // class but it's not included in the header and don't freak out. Ex. “class UUserWidget”</p> <p>// Reference UMG Asset in the Editor UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = &quot;Widgets&quot;) TSubclassOf<class UUserWidget=""> wMainMenu;</class></p> <p>// Variable to hold the widget After Creating it. UUserWidget* MyMainMenu;</p> <p>// Override BeginPlay() virtual void BeginPlay() override;</p> <p>};</p></syntaxhighlight> <p>open your MyPlayerController.cpp</p> <p>include this file to your cpp</p> <p><syntaxhighlight lang="cpp"> //MyPlayerController.cpp</syntaxhighlight></p> <p>// include</p> <ol><li>include &quot;Blueprint/UserWidget.h&quot;</li></ol> <p>BeginPlay() Function <syntaxhighlight lang="cpp"> //MyPlayerController.cpp</syntaxhighlight></p> <p>void AMyPlayerController::BeginPlay() { Super::BeginPlay();</p> <p>if (wMainMenu) // Check if the Asset is assigned in the blueprint. { // Create the widget and store it. MyMainMenu = CreateWidget<UUserWidget>(this, wMainMenu);</UUserWidget></p> <p>// now you can use the widget directly since you have a referance for it. // Extra check to make sure the pointer holds the widget. if (MyMainMenu) { //let add it to the view port MyMainMenu-&gt;AddToViewport(); }</p> <p>//Show the Cursor. bShowMouseCursor = true; }</p> <p>}</p> <h2 id="testing"><a href="#testing" class="header-anchor">#</a> <strong>Testing</strong></h2> <p>Now Open the Editor and Go to world Setting and assign our BP_GameMode As the Current Game Mode for the Level.</p> <p><a href="/index.php?title=File:WorldSettingsChange.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/1/1d/WorldSettingsChange.png/700px-WorldSettingsChange.png" alt="WorldSettingsChange.png"></a></p> <p>and use our early created “BP_PlayerController” As the Active Controller.</p> <p><a href="/index.php?title=File:AssignPC.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/9/98/AssignPC.png/400px-AssignPC.png" alt="AssignPC.png"></a></p> <p>Open the “BP_PlayerController” and Assign the widget.</p> <p><a href="/index.php?title=File:AssignWidget.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/e/ed/AssignWidget.png/400px-AssignWidget.png" alt="AssignWidget.png"></a></p> <p>Press Play and Hurrray we have our Menu Shown.</p> <p><a href="/index.php?title=File:FinalResult.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/8/87/FinalResult.png/700px-FinalResult.png" alt="FinalResult.png"></a></p> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> <strong>Conclusion</strong></h2> <p>Now we are done and you have a working widget that you can control from C++ Code you can add more functionality and control your menu flow from code whenever you need.</p> <p>From here you can extend your UMG Widgets the same way following this awesome tutorial By WCode:</p> <p><a href="/index.php?title=UMG,_How_to_extend_a_UUserWidget::_for_UMG_in_C%2B%2B." title="UMG, How to extend a UUserWidget:: for UMG in C++.">UMG,_How_to_extend_a_UUserWidget::_for_UMG_in_C++.</a></p> <p>Posted By <a href="/index.php?title=User:Bn_Green&amp;action=edit&amp;redlink=1" title="User:Bn Green (page does not exist)">Bn Green</a> (<a href="/index.php?title=User_talk:Bn_Green&amp;action=edit&amp;redlink=1" title="User talk:Bn Green (page does not exist)">talk</a>)</p> <p>Retrieved from &quot;<a href="https://wiki.unrealengine.com/index.php?title=UMG,_Referencing_UMG_Widgets_in_Code&amp;oldid=123" target="_blank" rel="noopener noreferrer">https://wiki.unrealengine.com/index.php?title=UMG,_Referencing_UMG_Widgets_in_Code&amp;oldid=123<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&quot;</p> <p><a href="/index.php?title=Special:Categories" title="Special:Categories">Categories</a>:</p> <ul><li><a href="/index.php?title=Category:Tutorials&amp;action=edit&amp;redlink=1" title="Category:Tutorials (page does not exist)">Tutorials</a></li> <li><a href="/index.php?title=Category:Code" title="Category:Code">Code</a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wiki.unrealengine.com/assets/js/app.aaf63946.js" defer></script><script src="/wiki.unrealengine.com/assets/js/2.4f53495e.js" defer></script><script src="/wiki.unrealengine.com/assets/js/1115.f593b003.js" defer></script>
  </body>
</html>
