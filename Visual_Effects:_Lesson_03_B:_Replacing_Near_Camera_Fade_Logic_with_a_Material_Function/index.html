<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>wiki.unrealengine.com</title>
    <meta name="description" content="A static site pulled from the internet archive">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css" as="style"><link rel="preload" href="/wiki.unrealengine.com/assets/js/app.aaf63946.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/2.4f53495e.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/1213.6856319d.js" as="script">
    <link rel="stylesheet" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki.unrealengine.com/" class="home-link router-link-active"><!----> <span class="site-name">wiki.unrealengine.com</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="content__default"><p>Visual Effects: Lesson 03 B: Replacing Near Camera Fade Logic with a Material Function - Epic Wiki</p> <h1 id="visual-effects-lesson-03-b-replacing-near-camera-fade-logic-with-a-material-function"><a href="#visual-effects-lesson-03-b-replacing-near-camera-fade-logic-with-a-material-function" class="header-anchor">#</a> Visual Effects: Lesson 03 B: Replacing Near Camera Fade Logic with a Material Function</h1> <p>For this lesson we are going to take a frequently used technique, the near camera fade technique from the last lesson, and create a material function which will replace the logic in our material.</p> <p>Material Functions:</p> <p>For more in depth information regarding Material Functions you can view <a href="https://docs.unrealengine.com/latest/INT/Engine/Rendering/Materials/Functions/index.html" target="_blank" rel="noopener noreferrer">THIS PAGE.<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Let’s start by creating a new material function in the same location as your previous materials. Right click in the content browser and choose Materials&amp;Textures&gt;Material Function from the list.</p> <p><a href="/File:CreateNewMatFunc.png"><img src="https://d26ilriwvtzlb.cloudfront.net/2/22/CreateNewMatFunc.png" alt="CreateNewMatFunc.png"></a></p> <p><a href="/File:CreateNewMatFunc.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Name your function: MF_NearCameraFade</p> <p>Open the function by double clicking the asset in the content browser.</p> <p>The first thing you will notice is a material function does not have the normal material inputs you might be expecting.</p> <p><a href="/File:FuncOutputResult.png"><img src="https://d26ilriwvtzlb.cloudfront.net/8/84/FuncOutputResult.png" alt="FuncOutputResult.png"></a></p> <p><a href="/File:FuncOutputResult.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>It is important to note the distinction of a material function. A function serves the purpose of creating a capsule of sorts for material logic. This can be very helpful in two ways. One, if you edit the function, it updates every material which uses this logic in your project. You are not required to go through each and every material and update logic. Two, you can clean up your material networks by encapsulating frequently used logic in a function; where you might have had to string up 5 or more nodes before, you may only need 3 with a function. Functions can also make it easy to enable less technical members of your team to still work with, and edit, your materials. Because you are essentially diluting the logic down to the core essential inputs and outputs others can quickly see what your logic needs to work properly.</p> <p>So let’s get started.</p> <p>Open your material from the Near Camera Depth Fade lesson, and marquee select all of the nodes which make up your camera fading logic. Copy the nodes with Ctrl+C and return to your material function.</p> <p>Paste the logic into your Function using Ctrl+V. UE4 will let you copy and paste material expressions from one material to another. This can be a big time saver if you are creating materials from scratch, and you just want grab logic from existing resources.</p> <p>String up the output of your one minus node to the Output Result node.</p> <p><a href="/File:FadeDistance75.png"><img src="https://d26ilriwvtzlb.cloudfront.net/9/9e/FadeDistance75.png" alt="FadeDistance75.png"></a></p> <p><a href="/File:FadeDistance75.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Compile your Function by pressing the green Apply check box.   Now open your Camera Depth Fade Material from the content browser, and drag your material Function from the content browser, into the Camera Depth Fade Material.</p> <p><a href="/File:NearCamFadeOpacity.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/b/b7/NearCamFadeOpacity.png/960px-NearCamFadeOpacity.png" alt="NearCamFadeOpacity.png"></a></p> <p><a href="/File:NearCamFadeOpacity.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>String up your new MF_NearCameraFade function result to the Opacity input of your Multiply expression.</p> <p>Now move your camera back and forth, and note that your material behaves in exactly the same fashion as before, fading out as you get closer to the preview plane. If you are not seeing a preview plane, press the plane button. You may also need to rotate your view depending on the orientation of the preview plane to your camera.</p> <p>So now, we have all of the same logic bundled up into one clean node, but there is one problem. This node only allows for a single global Camera Fade distance, and it’s not quite robust enough to support multiple size sprites. We could create several different functions for different distances, or we can expose the input of the Radius parameter of the Sphere Mask expression to the material, via the function. If that didn’t make sense, don’t worry, it will very soon.</p> <p>Let’s return to the material function by double clicking on the expression, in your material graph. This is a very quick way to find the logic driving your function!</p> <p>Drag off of the Radius input pin, let go, and start typing input. Choose Function Input from the list.</p> <p><a href="/File:RadiusFunctionInput.png"><img src="https://d26ilriwvtzlb.cloudfront.net/4/43/RadiusFunctionInput.png" alt="RadiusFunctionInput.png"></a></p> <p><a href="/File:RadiusFunctionInput.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>The Radius only accepts a Constant value, and the input we currently have is a Vector. We will need to change this to a Scalar.</p> <p><a href="/File:ScalarInputV3.png"><img src="https://d26ilriwvtzlb.cloudfront.net/b/b5/ScalarInputV3.png" alt="ScalarInputV3.png"></a></p> <p><a href="/File:ScalarInputV3.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Click the Input expression and change the Input Type dropdown in the Details Panel to Scalar. Give your Input a name, and description so that other artists know what to plug into the input.</p> <p><a href="/File:NearDistanceFadeCostant.png"><img src="https://d26ilriwvtzlb.cloudfront.net/6/6d/NearDistanceFadeCostant.png" alt="NearDistanceFadeCostant.png"></a></p> <p><a href="/File:NearDistanceFadeCostant.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Compile the function and return to your Camera Depth Fade Material.</p> <p>When you return to the material, you will see error messages. This is because your function now requires an input Value. Keep this in mind if you edit functions after adding them to multiple materials.</p> <p><a href="/File:MF_NearCameraFade.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/1/13/MF_NearCameraFade.png/960px-MF_NearCameraFade.png" alt="MF NearCameraFade.png"></a></p> <p><a href="/File:MF_NearCameraFade.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Drag off of the MF_NearCameraFade Function and type Constant, choose the constant from the list and set your constant to a value of 75. Compile your material and note that your preview plane fades out as you get closer to it, just as it did before.</p> <p><a href="/File:NearCamFadeOpacityNew.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/d/dc/NearCamFadeOpacityNew.png/960px-NearCamFadeOpacityNew.png" alt="NearCamFadeOpacityNew.png"></a></p> <p><a href="/File:NearCamFadeOpacityNew.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Adding the ability to define an input makes your function far more versatile, thereby making it more valuable. This allows for a myriad of usage cases, where the same function can be used with multiple settings across many materials.</p> <p>Now save all of your work, and press the Clean Up icon in the material editor.</p> <p><a href="/File:CleanUpButton.png"><img src="https://d26ilriwvtzlb.cloudfront.net/8/88/CleanUpButton.png" alt="CleanUpButton.png"></a></p> <p><a href="/File:CleanUpButton.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>This is a quick way of removing logic you no longer wish to use, which is not connected to your shader network. Note that it does not remove comment boxes.</p> <p>Now arrange the nodes so your graph is neat. It is important to keep materials clean so that it’s easy for others to interpret your work easily.</p> <p><a href="/File:CleanedUpMaterial.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/3/38/CleanedUpMaterial.png/960px-CleanedUpMaterial.png" alt="CleanedUpMaterial.png"></a></p> <p><a href="/File:CleanedUpMaterial.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Now that you have a working material function, you may wish to expose the function to the rest of your team. You can do this by going back to your material function and de-selecting any expressions so the Details panel shows the properties of your function.</p> <p>In the Details Panel give your function a description. This is what others will see when they mouse over the function, and check the Expose to Library box.</p> <p><a href="/File:ExposeFunctionToLibrary.png"><img src="https://d26ilriwvtzlb.cloudfront.net/7/78/ExposeFunctionToLibrary.png" alt="ExposeFunctionToLibrary.png"></a></p> <p><a href="/File:ExposeFunctionToLibrary.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <p>Save all of your content, and return to your Camera Depth Fade Material. Click in the graph and type Near, and note your function shows up in the Misc category, with a mouse-over description.</p> <p><a href="/File:NewFunctionLib.png"><img src="https://d26ilriwvtzlb.cloudfront.net/c/cc/NewFunctionLib.png" alt="NewFunctionLib.png"></a></p> <p><a href="/File:NewFunctionLib.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <ul><li><a href="/Visual_Effects:_Lesson_03_A:_Near_Camera_Fading" title="Visual Effects: Lesson 03 A: Near Camera Fading">Go back to Lesson 3: Part A</a></li> <li><a href="/Visual_Effects:_Lesson_04:_Driving_the_Fade_Distance_and_Depth_Fade_Settings_with_a_Dynamic_Parameter" title="Visual Effects: Lesson 04: Driving the Fade Distance and Depth Fade Settings with a Dynamic Parameter">Continue to Lesson 04</a></li></ul> <p>Retrieved from &quot;<a href="https://wiki.unrealengine.com/index.php?title=Visual_Effects:_Lesson_03_B:_Replacing_Near_Camera_Fade_Logic_with_a_Material_Function&amp;oldid=10319" target="_blank" rel="noopener noreferrer">https://wiki.unrealengine.com/index.php?title=Visual_Effects:_Lesson_03_B:_Replacing_Near_Camera_Fade_Logic_with_a_Material_Function&amp;oldid=10319<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&quot;</p> <p><a href="/Special:Categories" title="Special:Categories">Categories</a>:</p> <ul><li><a href="/Category:Tutorials" title="Category:Tutorials">Tutorials</a></li> <li><a href="/Category:Particle" title="Category:Particle">Particle</a></li> <li><a href="/Category:Epic_Created_Content" title="Category:Epic Created Content">Epic Created Content</a></li></ul> <p><img src="https://tracking.unrealengine.com/track.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wiki.unrealengine.com/assets/js/app.aaf63946.js" defer></script><script src="/wiki.unrealengine.com/assets/js/2.4f53495e.js" defer></script><script src="/wiki.unrealengine.com/assets/js/1213.6856319d.js" defer></script>
  </body>
</html>
