<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>wiki.unrealengine.com</title>
    <meta name="description" content="A static site pulled from the internet archive">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css" as="style"><link rel="preload" href="/wiki.unrealengine.com/assets/js/app.aaf63946.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/2.4f53495e.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/982.fa2002ba.js" as="script">
    <link rel="stylesheet" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki.unrealengine.com/" class="home-link router-link-active"><!----> <span class="site-name">wiki.unrealengine.com</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>Simple Line Trace Ricochet - Epic Wiki</p> <h1 id="simple-line-trace-ricochet"><a href="#simple-line-trace-ricochet" class="header-anchor">#</a> Simple Line Trace Ricochet</h1> <h2 id="contents"><a href="#contents" class="header-anchor">#</a> Contents</h2> <ul><li><a href="#Overview">1 Overview</a></li> <li><a href="#Setting_up_the_blueprint">2 Setting up the blueprint</a></li></ul> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>This tutorial will show you how to create a blueprint that will allow the player to shoot a line trace (ray trace) that will ricochet off of surfaces. More line traces can be strung together to ricochet as many times as needed.</p> <p>To do this you will need to follow this logic:</p> <p>1. On key press, trace a line from the player until an object is hit</p> <p>2. If an object is hit, get the Impact Point and Impact Normal</p> <p>3. Mirror the vector of the original line trace</p> <p>4. Then create another line trace from the Normal and Impact Point</p> <p><a href="/File:Ricochet_BP.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/f/fa/Ricochet_BP.png/940px-Ricochet_BP.png" alt="Ricochet BP.png"></a></p> <p><a href="/File:Ricochet_BP.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <h2 id="setting-up-the-blueprint"><a href="#setting-up-the-blueprint" class="header-anchor">#</a> Setting up the blueprint</h2> <p>1. Open the Character blueprint and go to the Event Graph</p> <div class="language- extra-class"><pre><code>a. Right-click and create a **Line Trace by Channel** node &amp; set the **Draw Debug Type** to **For Duration**.
</code></pre></div><p>2. Getting the player info</p> <div class="language- extra-class"><pre><code>a. In the bottom of the **MyBlueprint** panel, check **Show Inherited Variables**.
b. Find the **FirstPersonCamera** and drag a **Get** variable into the graph.
c. Drag off of the camera variable and find the **Get World Location** node (**Context Sensitivity** may need to be off).
d. Plug the return value into the **Start** pin of the line trace.
e. Drag off of the camera variable and find the **Get Forward Vector** node.
f. Multiply the forward vector by 5000 (or any other value you like, this is the distance the line trace will go).
g. Add the vectors from the world location and the multiplied value.  Plug the result into the **End** pin of the line trace.
h. Subtract the **Return Value** from the **Get World Location** node from the value from the previous added node (End - Start in the picture above.)
</code></pre></div><p>3. Getting the hit infomation and the second line trace</p> <div class="language- extra-class"><pre><code>a. Drag off of the **Out Hit** pin of the line trace &amp; create a **Break Hit Result** node.
b. Create another **Line Trace by Channel** node and set it **For Duration**.
c. Drag off of the **Impact Point** pin of the break hit and create an **Add** node for Vector + Vector.
   (Note: Attempting to reflect 'exactly' off of a normal will sometimes have errors. This adds 1, depending on normal direction, to the next line trace to make sure it is not inside of the object.)
d. Connect the **Normal** to the **Add** node and connect the output to the Start pin of the next line trace.
e. Drag off of the result from the End - Start calculation from earlier &amp; get a **Mirror Vector by Normal** node.
f. Connect the **Impact Normal** pin of the break hit to the **In Normal** pin of the mirror vector.
g. Drag off of the **Impact Point** pin of the break hit and create another **Add** node for Vector + Vector
h. Connect the **Return Value** pin of the **Mirror Vector by Normal** node to the **Add** node that was just created and plug the result into the **End** pin
</code></pre></div><p>4. Stringing more line traces together</p> <div class="language- extra-class"><pre><code>a. Select the last 3 nodes (**Break Hit Result**, **Mirror Vector by Normal**, and **Line Trace by Channel**).
b. Copy them to the end of the blueprint.
</code></pre></div><p><a href="/File:Ricochet_BP2.png"><img src="https://d3ar1piqh1oeli.cloudfront.net/b/b3/Ricochet_BP2.png/940px-Ricochet_BP2.png" alt="Ricochet BP2.png"></a></p> <p><a href="/File:Ricochet_BP2.png" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" alt=""></a></p> <div class="language- extra-class"><pre><code>c. Connect the **Execute** pins for the line traces.
d. Connect the **Out Hit** pin to the new **Break Hit Result**.
e. Create another End - Start calculation with the values from the previous line trace and connect the output to the new **Mirror Vector by Normal** node.
f. Follow the steps above to set up the same line trace again as many time as needed
</code></pre></div><p><strong>NOTE:</strong> <em>This tutorial has been tested and works correctly with version 4.10.4 of the editor.</em></p> <p>Cheers,</p> <p>TJ Ballard &amp; Matthew Clark</p> <p>Retrieved from &quot;<a href="https://wiki.unrealengine.com/index.php?title=Simple_Line_Trace_Ricochet&amp;oldid=18744" target="_blank" rel="noopener noreferrer">https://wiki.unrealengine.com/index.php?title=Simple_Line_Trace_Ricochet&amp;oldid=18744<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&quot;</p> <p><a href="/Special:Categories" title="Special:Categories">Categories</a>:</p> <ul><li><a href="/Category:Tutorials" title="Category:Tutorials">Tutorials</a></li> <li><a href="/Category:Blueprint" title="Category:Blueprint">Blueprint</a></li> <li><a href="/Category:Epic_Created_Content" title="Category:Epic Created Content">Epic Created Content</a></li></ul> <p><img src="https://tracking.unrealengine.com/track.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wiki.unrealengine.com/assets/js/app.aaf63946.js" defer></script><script src="/wiki.unrealengine.com/assets/js/2.4f53495e.js" defer></script><script src="/wiki.unrealengine.com/assets/js/982.fa2002ba.js" defer></script>
  </body>
</html>
