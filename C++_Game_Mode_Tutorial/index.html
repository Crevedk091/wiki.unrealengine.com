<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>wiki.unrealengine.com</title>
    <meta name="description" content="A static site pulled from the internet archive">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css" as="style"><link rel="preload" href="/wiki.unrealengine.com/assets/js/app.aaf63946.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/2.4f53495e.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/292.482a9853.js" as="script">
    <link rel="stylesheet" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki.unrealengine.com/" class="home-link router-link-active"><!----> <span class="site-name">wiki.unrealengine.com</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>C++ Game Mode Tutorial - Epic Wiki</p> <h1 id="c-game-mode-tutorial"><a href="#c-game-mode-tutorial" class="header-anchor">#</a> C++ Game Mode Tutorial</h1> <h2 id="contents"><a href="#contents" class="header-anchor">#</a> Contents</h2> <ul><li><a href="#C.2B.2B_Game_Mode_Tutorial">1 C++ Game Mode Tutorial</a> <ul><li><a href="#Requirements">1.1 Requirements</a></li> <li><a href="#Directory_Structure">1.2 Directory Structure</a></li> <li><a href="#UPlugin_File">1.3 UPlugin File</a></li> <li><a href="#Build.cs_File">1.4 Build.cs File</a></li> <li><a href="#Header_File">1.5 Header File</a></li> <li><a href="#Plugin_Module_Interface">1.6 Plugin Module Interface</a></li> <li><a href="#The_Game_Mode_.28C.2B.2B.29">1.7 The Game Mode (C++)</a></li> <li><a href="#Editor_Setup">1.8 Editor Setup</a></li> <li><a href="#Mutator_Blueprint">1.9 Mutator Blueprint</a></li> <li><a href="#Game_Mode_Blueprint">1.10 Game Mode Blueprint</a></li> <li><a href="#Testing">1.11 Testing</a></li></ul></li></ul> <h1 id="c-game-mode-tutorial-2"><a href="#c-game-mode-tutorial-2" class="header-anchor">#</a> C++ Game Mode Tutorial</h1> <p>This tutorial will teach you how to make a simple Gun Game mode for UT using C++. We'll be making a UE4 plugin that defines a child class of AUTGameMode. I recommend reading the <a href="/C%2B%2B_Mutator_Tutorial" title="C++ Mutator Tutorial">C++ Mutator Tutorial</a>, <a href="/Blueprint_Mutator_Tutorial_-_Instagib" title="Blueprint Mutator Tutorial - Instagib">Blueprint_Mutator_Tutorial_-_Instagib</a> and <a href="/Blueprint_Mutator_Tutorial_-_Low_Grav" title="Blueprint Mutator Tutorial - Low Grav">Blueprint_Mutator_Tutorial_-_Low_Grav</a> first. I will be glossing over things covered in depth in other tutorials.</p> <h2 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements</h2> <ul><li>Engine version: 4.3</li> <li>Skill level: intermediate C++ and blueprint knowledge</li></ul> <h2 id="directory-structure"><a href="#directory-structure" class="header-anchor">#</a> Directory Structure</h2> <ul><li>If UnrealTournament\Plugins does not already exist, create it</li> <li>Create a directory inside of UnrealTournament\Plugins to hold our game mode, in this case it would be &quot;SampleGameMode&quot;</li> <li>Create &quot;Source&quot; and &quot;Content&quot; directories inside of the SampleGameMode directory</li> <li>Create a &quot;Public&quot; directory and a &quot;Private&quot; directory inside of the last &quot;SampleGameMode&quot; directory that we made</li></ul> <h2 id="uplugin-file"><a href="#uplugin-file" class="header-anchor">#</a> UPlugin File</h2> <ul><li>We need to create SampleGameMode.uplugin to let UE4 know we have a plugin it should load</li> <li>It should live at the same level that the Source directory does</li> <li>The key difference between this .uplugin and the one in the mutator sample is that EnabledByDefault and CanContainContent are set</li></ul> <p><strong>SampleGameMode.uplugin</strong> - Plugin defintion</p> <ol><li><p>{</p></li> <li><div class="language- extra-class"><pre><code> &quot;FileVersion&quot; : 3,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> &quot;FriendlyName&quot; : &quot;Sample Game Mode&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> &quot;Version&quot; : 1,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> &quot;VersionName&quot; : &quot;1.0&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> &quot;CreatedBy&quot; : &quot;Epic Games, Inc.&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> &quot;CreatedByURL&quot; : &quot;http://epicgames.com&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> &quot;EngineVersion&quot; : &quot;4.3.0&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>&quot;Description&quot; : &quot;Sample Game Mode&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>&quot;Category&quot; : &quot;UnrealTournament.GameMode&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>&quot;EnabledByDefault&quot; : true,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>&quot;CanContainContent&quot; : true,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>&quot;Modules&quot; :
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>\[
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		&quot;Name&quot; : &quot;SampleGameMode&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		&quot;Type&quot; : &quot;Runtime&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		&quot;WhitelistPlatforms&quot; : \[ &quot;Win32&quot;, &quot;Win64&quot; \]
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>\]
</code></pre></div></li> <li><p>}</p></li></ol> <h2 id="build-cs-file"><a href="#build-cs-file" class="header-anchor">#</a> Build.cs File</h2> <ul><li>We need to create SampleGameMode.Build.cs so that Unreal Build tool knows how to generate our dll file</li> <li>It should live at the same level that the Public and Private directories do</li> <li>We'll use the PrivateIncludesPaths array to make #include cleaner throughout our source files</li></ul> <p><strong>SampleGameMode.Build.cs</strong> - Unreal Build Tool definitions</p> <ol><li><p>namespace UnrealBuildTool.Rules</p></li> <li><p>{</p></li> <li><div class="language- extra-class"><pre><code> public class SampleGameMode : ModuleRules
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> {
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> 	public SampleGameMode(TargetInfo Target)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> 	{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> 		PrivateIncludePaths.Add(&quot;SampleGameMode/Private&quot;);
</code></pre></div></li> <li><div class="language- extra-class"><pre><code> 		PublicDependencyModuleNames.AddRange(
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			new string\[\]
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>				&quot;Core&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>				&quot;CoreUObject&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>				&quot;Engine&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>				&quot;UnrealTournament&quot;,
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			);
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>}
</code></pre></div></li> <li><p>}</p></li></ol> <h2 id="header-file"><a href="#header-file" class="header-anchor">#</a> Header File</h2> <ul><li>Unreal Build Tool requires that we have a shared header file as the first include in every cpp source file in the plugin.</li> <li>We'll put the SampleGameMode.h header file inside of the Public directory
<ol><li>include &quot;SampleGameMode.generated.h&quot; is required by Unreal Header Tool</li></ol></li> <li>Our header is a bit more complex than the mutator one. We've defined two custom structs that we've made BlueprintType so they'll be visible when we're in the editor.</li> <li>You'll notice that each of the structs is just a TArray and their usage in the ASampleGameMode is just a TArray. UE4 does not currently support TArrays of TArrays so we work around that by housing the inner array inside of a structure.</li> <li>We've exposed the StartingInventories and ScoringDamageTypes TArrays to blueprints so they can be filled with content references later. In order for the editor to see them, we made them UPROPERTYs with BlueprintReadWrite markup</li></ul> <p><strong>SampleGameMode.h</strong> - Sample Mutator class definition</p> <ol><li><p>// Copyright 1998-2014 Epic Games, Inc. All Rights Reserved.</p></li> <li><p>#pragma once</p></li> <li><p>#include &quot;Core.h&quot;</p></li> <li><p>#include &quot;Engine.h&quot;</p></li> <li><p>#include &quot;UTWeapon.h&quot;</p></li> <li><p>#include &quot;UTGameMode.h&quot;</p></li> <li><p>#include &quot;SampleGameMode.generated.h&quot;</p></li> <li><p>USTRUCT(BlueprintType)</p></li> <li><p>struct FStartingInventory</p></li> <li><p>{</p></li> <li><div class="language- extra-class"><pre><code>GENERATED\_USTRUCT\_BODY()
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>UPROPERTY(EditAnywhere, BlueprintReadWrite, Category\=&quot;GameMode&quot;)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>TArray&lt;TSubclassOf&lt;AUTInventory\&gt;&gt; Inventory;
</code></pre></div></li> <li><p>};</p></li> <li><p>USTRUCT(BlueprintType)</p></li> <li><p>struct FDamageTypeToProgess</p></li> <li><p>{</p></li> <li><div class="language- extra-class"><pre><code>GENERATED\_USTRUCT\_BODY()
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \= &quot;GameMode&quot;)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>TArray&lt;TSubclassOf&lt;UDamageType\&gt;&gt; DamageType;
</code></pre></div></li> <li><p>};</p></li> <li><p>UCLASS(Blueprintable, Meta = (ChildCanTick))</p></li> <li><p>class ASampleGameMode : public AUTGameMode</p></li> <li><p>{</p></li> <li><div class="language- extra-class"><pre><code>GENERATED\_UCLASS\_BODY()
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>UPROPERTY(EditAnywhere, BlueprintReadWrite, Category\=&quot;GameMode&quot;)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>TArray&lt;FStartingInventory\&gt; StartingInventories;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \= &quot;GameMode&quot;)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>TArray&lt;FDamageTypeToProgess\&gt; ScoringDamageTypes;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>virtual void GiveDefaultInventory(APawn\* PlayerPawn) override;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>virtual void ScoreKill(AController\* Killer, AController\* Other, TSubclassOf&lt;UDamageType\&gt; DamageType) override;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>virtual void GiveNewGun(AUTCharacter \*UTCharacter);
</code></pre></div></li> <li><p>};</p></li></ol> <h2 id="plugin-module-interface"><a href="#plugin-module-interface" class="header-anchor">#</a> Plugin Module Interface</h2> <ul><li>Very similar to the mutator sample here, just some name changes</li></ul> <p><strong>SampleGameModePlugin.cpp</strong> - Plugin Module Interface</p> <ol><li><p>// Copyright 1998-2014 Epic Games, Inc. All Rights Reserved.</p></li> <li><p>#include &quot;SampleGameMode.h&quot;</p></li> <li><p>#include &quot;Core.h&quot;</p></li> <li><p>#include &quot;Engine.h&quot;</p></li> <li><p>#include &quot;ModuleManager.h&quot;</p></li> <li><p>#include &quot;ModuleInterface.h&quot;</p></li> <li><p>class FSampleGameModePlugin : public IModuleInterface</p></li> <li><p>{</p></li> <li><div class="language- extra-class"><pre><code>/\*\* IModuleInterface implementation \*/
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>virtual void StartupModule() override;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>virtual void ShutdownModule() override;
</code></pre></div></li> <li><p>};</p></li> <li><p>IMPLEMENT_MODULE( FSampleGameModePlugin, SampleGameMode )</p></li> <li><p>void FSampleGameModePlugin::StartupModule()</p></li> <li><p>{</p></li> <li><p>}</p></li> <li><p>void FSampleGameModePlugin::ShutdownModule()</p></li> <li><p>{</p></li> <li><p>}</p></li></ol> <h2 id="the-game-mode-c"><a href="#the-game-mode-c" class="header-anchor">#</a> The Game Mode (C++)</h2> <ul><li>Our aim with this tutorial is to make a game mode that functions like &quot;Gun Game&quot;, you start with a weapon according to your score and going up in score gives you the next gun in the sequence. Pickups are disabled and so are weapon drops.</li> <li>We'll use C++ to handle giving players the right guns on spawn and giving them the right guns after scoring.</li> <li>We'll use Blueprints to handle disabling weapon drops and pickups.</li> <li>Blueprints will also be used to get content references to weapons and damagetypes as hard coding them in C++ can be brittle.</li> <li>ASampleGameMode::GiveDefaultInventory reads the content reference from StartingInventories that we'll set later in blueprints and spawns that inventory for the spawning player</li> <li>ASampleGameMode::ScoreKill verifies that the killing damage type is equal to the content reference from ScoringDamageTypes and then calls GiveNewGun on the killer</li> <li>ASampleGameMode::GiveNewGun will discard the character's current inventory and give them the proper gun by reading a content reference from StartingInventories</li></ul> <p><strong>SampleGameMode.cpp</strong></p> <ol><li><p>// Copyright 1998-2014 Epic Games, Inc. All Rights Reserved.</p></li> <li><p>#include &quot;SampleGameMode.h&quot;</p></li> <li><p>ASampleGameMode::ASampleGameMode(const FPostConstructInitializeProperties&amp; PCIP)</p></li> <li><div class="language- extra-class"><pre><code> : Super(PCIP)
</code></pre></div></li> <li><p>{</p></li> <li><p>}</p></li> <li><p>void ASampleGameMode::GiveDefaultInventory(APawn* PlayerPawn)</p></li> <li><p>{</p></li> <li><div class="language- extra-class"><pre><code>// Don't call Super
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>AUTCharacter\* UTCharacter \= Cast&lt;AUTCharacter\&gt;(PlayerPawn);
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>if (UTCharacter !\= nullptr &amp;&amp; UTCharacter\-\&gt;GetInventory() \== nullptr)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	int32 InventoryIndex \= PlayerPawn\-\&gt;PlayerState\-\&gt;Score;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	if (InventoryIndex \&gt;= StartingInventories.Num())
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		InventoryIndex \= StartingInventories.Num() \- 1;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	if (StartingInventories.IsValidIndex(InventoryIndex))
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		for (int32 i \= 0; i &lt; StartingInventories\[InventoryIndex\].Inventory.Num(); i++)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			if (StartingInventories\[InventoryIndex\].Inventory\[i\] !\= nullptr)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>				UTCharacter\-\&gt;AddInventory(GetWorld()\-\&gt;SpawnActor&lt;AUTInventory\&gt;(StartingInventories\[InventoryIndex\].Inventory\[i\], FVector(0.0f), FRotator(0, 0, 0)), true);
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>}
</code></pre></div></li> <li><p>}</p></li> <li><p>void ASampleGameMode::ScoreKill(AController* Killer, AController* Other, TSubclassOf&lt;UDamageType&gt; DamageType)</p></li> <li><p>{</p></li> <li><div class="language- extra-class"><pre><code>// Just a suicide, pass it through
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>if (Killer \== Other || Killer \== nullptr)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	Super::ScoreKill(Killer, Other, DamageType);
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	return;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>APlayerState\* KillerPlayerState \= Killer\-\&gt;PlayerState;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>if (KillerPlayerState)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	int32 DamageIndex \= KillerPlayerState\-\&gt;Score;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	if (DamageIndex \&gt;= ScoringDamageTypes.Num())
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		DamageIndex \= ScoringDamageTypes.Num() \- 1;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	for (int32 i \= 0; i &lt; ScoringDamageTypes\[DamageIndex\].DamageType.Num(); i++)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		if (DamageType \== ScoringDamageTypes\[DamageIndex\].DamageType\[i\])
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			Super::ScoreKill(Killer, Other, DamageType);
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			// If we changed score, give player a new gun
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			if (DamageIndex !\= KillerPlayerState\-\&gt;Score)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>				AUTCharacter\* UTCharacter \= Cast&lt;AUTCharacter\&gt;(Killer\-\&gt;GetPawn());
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>				if (UTCharacter !\= nullptr)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>				{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>					GiveNewGun(UTCharacter);
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>				}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			break;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>}
</code></pre></div></li> <li><p>}</p></li> <li><p>void ASampleGameMode::GiveNewGun(AUTCharacter *UTCharacter)</p></li> <li><p>{</p></li> <li><div class="language- extra-class"><pre><code>UTCharacter\-\&gt;DiscardAllInventory();
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>int32 InventoryIndex \= UTCharacter\-\&gt;PlayerState\-\&gt;Score;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>if (InventoryIndex \&gt;= StartingInventories.Num())
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	InventoryIndex \= StartingInventories.Num() \- 1;
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>if (StartingInventories.IsValidIndex(InventoryIndex))
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	for (int32 i \= 0; i &lt; StartingInventories\[InventoryIndex\].Inventory.Num(); i++)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		if (StartingInventories\[InventoryIndex\].Inventory\[i\] !\= nullptr)
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		{
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>			UTCharacter\-\&gt;AddInventory(GetWorld()\-\&gt;SpawnActor&lt;AUTInventory\&gt;(StartingInventories\[InventoryIndex\].Inventory\[i\], FVector(0.0f), FRotator(0, 0, 0)), true);
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>		}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>	}
</code></pre></div></li> <li><div class="language- extra-class"><pre><code>}
</code></pre></div></li> <li><p>}</p></li></ol> <h2 id="editor-setup"><a href="#editor-setup" class="header-anchor">#</a> Editor Setup</h2> <ul><li>You'll need to enable &quot;Show Plugin Content&quot; in the Content Browser's &quot;View Options&quot; menu</li></ul> <p><a href="/File:Gamemodetutorial_viewplugincontent.png"><img src="https://d26ilriwvtzlb.cloudfront.net/b/b6/Gamemodetutorial_viewplugincontent.png" alt="Gamemodetutorial viewplugincontent.png"></a></p> <ul><li>Inside the SampleGameMode folder, make two new blueprints: BP_SampleGameBuiltinMutator with parent UTMutator and BP_SampleGameMode with parent SampleGameMode. Make sure to check out <a href="/Blueprint_Mutator_Tutorial_-_Instagib" title="Blueprint Mutator Tutorial - Instagib">Blueprint_Mutator_Tutorial_-_Instagib</a> and <a href="/Blueprint_Mutator_Tutorial_-_Low_Grav" title="Blueprint Mutator Tutorial - Low Grav">Blueprint_Mutator_Tutorial_-_Low_Grav</a> for more information on blueprints.</li></ul> <h2 id="mutator-blueprint"><a href="#mutator-blueprint" class="header-anchor">#</a> Mutator Blueprint</h2> <ul><li>We want to use a mutator to destroy all map pickups and all dropped pickups similar to <a href="/Blueprint_Mutator_Tutorial_-_Instagib" title="Blueprint Mutator Tutorial - Instagib">Blueprint_Mutator_Tutorial_-_Instagib</a></li> <li>We'll override the Check Relevance function as seen below</li></ul> <p><a href="/File:Gamemodetutorial_mutator.png"><img src="https://d26ilriwvtzlb.cloudfront.net/c/ce/Gamemodetutorial_mutator.png" alt="Gamemodetutorial mutator.png"></a></p> <h2 id="game-mode-blueprint"><a href="#game-mode-blueprint" class="header-anchor">#</a> Game Mode Blueprint</h2> <ul><li>Open up BP_SampleGameMode and go to the default properties tab</li> <li>First, we'll set the Built in Mutators array to reference BP_SampleGameBuiltinMutator</li></ul> <p><a href="/File:Gamemodetutorial_builtin.png"><img src="https://d26ilriwvtzlb.cloudfront.net/0/09/Gamemodetutorial_builtin.png" alt="Gamemodetutorial builtin.png"></a></p> <ul><li>Next, we'll set the HUD Class to UTHUD_DM</li></ul> <p><a href="/File:Gamemodetutorial_hudclass.png"><img src="https://d26ilriwvtzlb.cloudfront.net/3/3c/Gamemodetutorial_hudclass.png" alt="Gamemodetutorial hudclass.png"></a></p> <ul><li>Third, we'll set up the content references to our guns in the StartingInventories array</li></ul> <p><a href="/File:Gamemodetutorial_startinginventory.png"><img src="https://d26ilriwvtzlb.cloudfront.net/7/71/Gamemodetutorial_startinginventory.png" alt="Gamemodetutorial startinginventory.png"></a></p> <ul><li>Finally, we'll set up the content references to our damage types in the ScoringDamageTypes array</li></ul> <p><a href="/File:Gamemodetutorial_damagetypes.png"><img src="https://d26ilriwvtzlb.cloudfront.net/a/aa/Gamemodetutorial_damagetypes.png" alt="Gamemodetutorial damagetypes.png"></a></p> <h2 id="testing"><a href="#testing" class="header-anchor">#</a> Testing</h2> <ul><li>To make typing our command line easier, you should add a game mode alias to DefaultGame.ini</li> <li>Under [/Script/Engine.GameMode] put +GameModeClassAliases=(ShortName=&quot;Sample&quot;,GameClassName=&quot;/SampleGameMode/BP_SampleGameMode.BP_SampleGameMode_C&quot;)</li> <li>The game type can now be tested by using ?game=sample instead of ?game=/SampleGameMode/BP_SampleGameMode.BP_SampleGameMode_C</li> <li>Make sure to restart the editor after putting that in the ini</li> <li>I prefer to test in PIE by setting the number of clients to 2, but you can also test via commandline by running a server with &quot;ue4editor unrealtournament -game example_map?game=sample?listen&quot; and a client with &quot;ue4editor unrealtournament -game 127.0.0.1&quot;</li></ul> <p>Retrieved from &quot;<a href="https://wiki.unrealengine.com/index.php?title=C%2B%2B_Game_Mode_Tutorial&amp;oldid=14812" target="_blank" rel="noopener noreferrer">https://wiki.unrealengine.com/index.php?title=C%2B%2B_Game_Mode_Tutorial&amp;oldid=14812<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&quot;</p> <p><a href="/Special:Categories" title="Special:Categories">Categories</a>:</p> <ul><li><a href="/Category:Unreal_Tournament" title="Category:Unreal Tournament">Unreal Tournament</a></li> <li><a href="/Category:UT_Content_Creation" title="Category:UT Content Creation">UT Content Creation</a></li></ul> <p><img src="https://tracking.unrealengine.com/track.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wiki.unrealengine.com/assets/js/app.aaf63946.js" defer></script><script src="/wiki.unrealengine.com/assets/js/2.4f53495e.js" defer></script><script src="/wiki.unrealengine.com/assets/js/292.482a9853.js" defer></script>
  </body>
</html>
