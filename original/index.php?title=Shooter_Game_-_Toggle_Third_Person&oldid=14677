<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>Shooter Game - Toggle Third Person - Epic Wiki</title>
<meta name="generator" content="MediaWiki 1.22.2" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Epic Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.unrealengine.com/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Epic Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=epic&amp;*" />
<link rel="stylesheet" href="/extensions/EpicVideoSystem/CSS/VideoSystem.css" />
<link rel="stylesheet" href="/skins/epic/resources/screen.css?303" media="screen" />
<link rel="stylesheet" href="/skins/epic/resources/epic.css?303" media="screen" />
<link rel="stylesheet" href="/skins/epic/resources/prettify.css?303" media="screen" />
<link rel="stylesheet" href="/skins/epic/resources/jquery.qtip.css?303" media="screen" /><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=epic&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: my_wiki:resourceloader:filter:minify-css:7:07b6a8ccf3fd62e770f192d0a6f8e123 */</style>

<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=epic&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Shooter_Game_-_Toggle_Third_Person","wgTitle":"Shooter Game - Toggle Third Person","wgCurRevisionId":14677,"wgRevisionId":14677,"wgArticleId":2637,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Tutorials","Code","Community Created Content"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Shooter_Game_-_Toggle_Third_Person","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"templateEditor":false,"templates":false,"preview":true,"previewDialog":false,"publish":true,"toc":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"epic","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: my_wiki:resourceloader:filter:minify-js:7:2197af7670c41256853f340e275ede1b */
}</script>
<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=skins.epic.extras.js%7Cskins.epic.fancybox.js%7Cskins.epic.js%7Cskins.epic.qtip.js%7Cskins.epic.slimscroll.js&amp;only=scripts&amp;skin=epic&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["ext.voteNY","mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000ff;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #666666;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #000099; font-weight: bold;}
.cpp.source-cpp .es1 {color: #000099; font-weight: bold;}
.cpp.source-cpp .es2 {color: #660099; font-weight: bold;}
.cpp.source-cpp .es3 {color: #660099; font-weight: bold;}
.cpp.source-cpp .es4 {color: #660099; font-weight: bold;}
.cpp.source-cpp .es5 {color: #006699; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #FF0000;}
.cpp.source-cpp .nu0 {color: #0000dd;}
.cpp.source-cpp .nu6 {color: #208080;}
.cpp.source-cpp .nu8 {color: #208080;}
.cpp.source-cpp .nu12 {color: #208080;}
.cpp.source-cpp .nu16 {color:#800080;}
.cpp.source-cpp .nu17 {color:#800080;}
.cpp.source-cpp .nu18 {color:#800080;}
.cpp.source-cpp .nu19 {color:#800080;}
.cpp.source-cpp .me1 {color: #007788;}
.cpp.source-cpp .me2 {color: #007788;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><style type="text/css">/*<![CDATA[*/
.source-ini {line-height: normal;}
.source-ini li, .source-ini pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for ini
 * CSS class: source-ini, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.ini.source-ini .de1, .ini.source-ini .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.ini.source-ini  {font-family:monospace;}
.ini.source-ini .imp {font-weight: bold; color: red;}
.ini.source-ini li, .ini.source-ini .li1 {font-weight: normal; vertical-align:top;}
.ini.source-ini .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.ini.source-ini .li2 {font-weight: bold; vertical-align:top;}
.ini.source-ini .co0 {color: #666666; font-style: italic;}
.ini.source-ini .sy0 {color: #000066; font-weight:bold;}
.ini.source-ini .st0 {color: #933;}
.ini.source-ini .re0 {color: #000066; font-weight:bold;}
.ini.source-ini .re1 {color: #000099;}
.ini.source-ini .re2 {color: #660066;}
.ini.source-ini .ln-xtra, .ini.source-ini li.ln-xtra, .ini.source-ini div.ln-xtra {background-color: #ffc;}
.ini.source-ini span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/epic/csshover.min.htc")}</style><![endif]--><script type="text/javascript">
var experimentID = false;
var cxApi = null;
var variation = 0;
var fancyTitle = "";
var CE_SNAPSHOT_NAME = document.getElementsByTagName("title")[0].innerHTML;
$(document).ready(function(){
	if(experimentID != false)
	{
		$(head).append('<script src="//www.google-analytics.com/cx/api.js?experiment=' + experimentID + '" />' + '</scr' + 'ipt>');
		HandleExperiment();
	}
	else
	{
		CE_SNAPSHOT_NAME = (fancyTitle != "" ? fancyTitle : document.getElementsByTagName("title")[0].innerHTML);
		setTimeout(function () {
			var a = document.createElement("script");
			var b = document.getElementsByTagName("script")[0];
			a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0028/4572.js?" + Math.floor(new Date().getTime() / 3600000);
			a.async = true; a.type = "text/javascript"; b.parentNode.insertBefore(a, b)
		}, 1);	
	}
});
function HandleExperiment()
{
	CE_SNAPSHOT_NAME = (fancyTitle != "" ? fancyTitle : document.getElementsByTagName("title")[0].innerHTML);
	if(cxApi != null)
	{
		variation = cxApi.chooseVariation();
		cxApi.setChosenVariation(variation, experimentID);
		if(variation != cxApi.ORIGINAL_VARIATION && variation != cxApi.NO_CHOSEN_VARIATION && variation != cxApi.NOT_PARTICIPATING)
		{
			//var URL = document.location.href + (document.location.search != '' ? '&var=' : '?var=') + variation;
			ga('send', 'event', 'A/B', 'ID: ' + experimentID, 'Variation: ' + variation, {'nonInteraction': 1});
			//document.location.href = URL; 
			CE_SNAPSHOT_NAME = document.getElementsByTagName("title")[0].innerHTML + ' (variation ' + variation + ')';
			var test = "";
		}
		else
		{
			ga('send', 'event', 'A/B', 'ID: ' + experimentID, 'Variation: ' + variation, {'nonInteraction': 1});
		}
		ToggleExperimentContent(variation);
		setTimeout(function () {
			var a = document.createElement("script");
			var b = document.getElementsByTagName("script")[0];
			a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0028/4572.js?" + Math.floor(new Date().getTime() / 3600000);
			a.async = true; a.type = "text/javascript"; b.parentNode.insertBefore(a, b)
		}, 1);
	}
	else
	{
		setTimeout("HandleExperiment()", 500);
	}
}

function ToggleExperimentContent(variation)
{
	$('.AB').hide();
	$('#variation_' + variation).show();
}
</script></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Shooter_Game_-_Toggle_Third_Person skin-epic action-view vector-animateLayout">
		<!--<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>-->
		<!-- Google Tag Manager -->
		<noscript>
			<iframe src="//www.googletagmanager.com/ns.html?id=GTM-KWRD6D"
					height="0" width="0" style="display:none;visibility:hidden"></iframe>
		</noscript>
		<script>
		(function (w, d, s, l, i) {
		w[l] = w[l] || []; w[l].push({
		'gtm.start':
		new Date().getTime(), event: 'gtm.js'
		}); var f = d.getElementsByTagName(s)[0],
		j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
		'//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
		})(window, document, 'script', 'dataLayer', 'GTM-KWRD6D');</script>
		<!-- End Google Tag Manager -->
		<div id="webThree">
		<div id="head">
		





<input type="hidden" id="updateenable" value="true">

    <script src="https://cdn1.unrealengine.com/2670222/unifiedHeaderBundle-c133cbefbece60d20fd29c5b1819fa39.js" defer></script>
    <link rel="stylesheet" href="https://cdn1.unrealengine.com/2670222/unifiedHeader-dd083735d5017970978496baee5b916e.css">


<header id="header" data-path="/" data-sitepath="https://www.unrealengine.com">
<input type="hidden" id="isUnified" value="1" />
    <input type="hidden" id="current_locale" value="en_US"/>
    <input type="hidden" id="header-host" value="https://www.unrealengine.com" />
    <nav class="main-menu">
        <div class="menu-mobile">
            <span class="menu-mobile-icon"></span>
            <ul>

                
                    

                        
                            <li class="menu-mobile-sub">
                                <a href="#" class="mobile-link">About</a>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/what-is-unreal-engine-4">Overview</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/unreal-engine-4">Features</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/vr-page">Virtual Reality</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/showcase">Showcase</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/49-release-notes-overview">What&#39;s New</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/faq">FAQ / EULA</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/previous-versions">Previous Versions</a>
                                            
                                        </li>
                                    
                                </ul>
                            </li>
                        

                    
                
                    

                        
                            <li class="menu-mobile-sub">
                                <a href="#" class="mobile-link">Learn</a>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="https://docs.unrealengine.com/" target="_blank">Documentation</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://wiki.unrealengine.com/Videos " target="_blank">Video Tutorials</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://wiki.unrealengine.com/Main_Page" target="_blank">Wiki</a>
                                            
                                        </li>
                                    
                                </ul>
                            </li>
                        

                    
                
                    

                        
                            <li class="menu-mobile-sub">
                                <a href="#" class="mobile-link">Community</a>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/blog">Blog</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://forums.unrealengine.com/" target="_blank">Forums</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://answers.unrealengine.com/" target="_blank">AnswerHub</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://trello.com/b/gHooNW9I/ue4-roadmap" target="_blank">Roadmap</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/unrealdevgrants">Unreal Dev Grants</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="http://www.unrealtournament.com/blog/" target="_blank">Unreal Tournament</a>
                                            
                                        </li>
                                    
                                </ul>
                            </li>
                        

                    
                
                    

                        
                            <li class="menu-mobile-sub">
                                <a href="#" class="mobile-link">Marketplace</a>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/marketplace">Browse</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://publish.unrealengine.com/faq" target="_blank">Business Terms</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://publish.unrealengine.com/submission-guidelines" target="_blank">Submission Guidelines</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://publish.unrealengine.com/welcome" target="_blank">Submit Your Content</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://forums.unrealengine.com/forumdisplay.php?56-Marketplace" target="_blank">Marketplace Forums</a>
                                            
                                        </li>
                                    
                                </ul>
                            </li>
                        

                    
                
                    

                        
                            <li class="menu-mobile-sub">
                                <a href="#" class="mobile-link">Academia</a>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/education">Education Program</a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="https://www.unrealengine.com/academic-partners">Academic Partners</a>
                                            
                                        </li>
                                    
                                </ul>
                            </li>
                        

                    
                
                
                <li class="btn-account ignore" style="display: none">
                    <a href="https://www.unrealengine.com/dashboard">Account</a>
                </li>
                <li class="btn-signout ignore" style="display: none">
                    <a class="sso-sign-out" href="">Log Out</a>
                </li>
                <li class="btn-signin ignore" style="display: none">
                    <a class="sso-sign-in" href="">Sign in</a>
                </li>
            </ul>
        </div>

        <ul class="menu-items">
            <li class="logo ignore">
                
                    <a href="https://www.unrealengine.com/blog"></a>
                
            </li>

            
                

                    
                        <li>
                            
                                <a>About</a>
                            

                            <ul>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/what-is-unreal-engine-4">Overview</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/unreal-engine-4">Features</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/vr-page">Virtual Reality</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/showcase">Showcase</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/49-release-notes-overview">What&#39;s New</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/faq">FAQ / EULA</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/previous-versions">Previous Versions</a>
                                        
                                    </li>
                                
                            </ul>
                        </li>
                    

                
            
                

                    
                        <li>
                            
                                <a>Learn</a>
                            

                            <ul>
                                
                                    <li>
                                        
                                            <a href="https://docs.unrealengine.com/" target="_blank">Documentation</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://wiki.unrealengine.com/Videos " target="_blank">Video Tutorials</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://wiki.unrealengine.com/Main_Page" target="_blank">Wiki</a>
                                        
                                    </li>
                                
                            </ul>
                        </li>
                    

                
            
                

                    
                        <li>
                            
                                <a>Community</a>
                            

                            <ul>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/blog">Blog</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://forums.unrealengine.com/" target="_blank">Forums</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://answers.unrealengine.com/" target="_blank">AnswerHub</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://trello.com/b/gHooNW9I/ue4-roadmap" target="_blank">Roadmap</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/unrealdevgrants">Unreal Dev Grants</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="http://www.unrealtournament.com/blog/" target="_blank">Unreal Tournament</a>
                                        
                                    </li>
                                
                            </ul>
                        </li>
                    

                
            
                

                    
                        <li>
                            
                                <a>Marketplace</a>
                            

                            <ul>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/marketplace">Browse</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://publish.unrealengine.com/faq" target="_blank">Business Terms</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://publish.unrealengine.com/submission-guidelines" target="_blank">Submission Guidelines</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://publish.unrealengine.com/welcome" target="_blank">Submit Your Content</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://forums.unrealengine.com/forumdisplay.php?56-Marketplace" target="_blank">Marketplace Forums</a>
                                        
                                    </li>
                                
                            </ul>
                        </li>
                    

                
            
                

                    
                        <li>
                            
                                <a>Academia</a>
                            

                            <ul>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/education">Education Program</a>
                                        
                                    </li>
                                
                                    <li>
                                        
                                            <a href="https://www.unrealengine.com/academic-partners">Academic Partners</a>
                                        
                                    </li>
                                
                            </ul>
                        </li>
                    

                
            
        </ul>


        <div class="menu-download" data-sub="dl">
            <a class="sso-register" href="">
                <span class="isUpdateEnabled">Get Unreal</span>
            </a>
        </div>
        

        <div id="search" class="menu-search ignore">
                <span></span>
        </div>
        
        <div class="search-header">
            <div class="input-search">
                <div id="search-tips" class="search-tips-en_US">
                    You may be unable to view the results of this search unless you connect to a VPN first.
                </div>
                <span></span>
                <input type="text" name="search" value="" style="background:none !important" id="isearch" class="text" placeholder="Search..." />
                <p class="search-btn">Search</p>
            </div>
        </div>

        <ul class="menu-icons">
            <li id="btn-account" class="ignore" data-sub="account" style="display: none">
                <a href="/dashboard">Account</a>
                <ul class="account-sub-menu">
                    <li>
                        <a href="/dashboard">Personal</a>
                    </li>
                    <li>
                        <a href="https://publish.unrealengine.com/">Seller</a>
                    </li>
                </ul>
            </li>
            <li id="btn-signout" class="ignore" data-sub="account" style="display: none">
                <a class="sso-sign-out last-border" href="">Log Out</a>
            </li>
            <li id="btn-signin" class="ignore" data-sub="account" style="display: none">
                <a class="sso-sign-in last-border" href="">Sign in</a>
            </li>
        </ul>
        
    </nav>
</header>

		</div>
		<div id="pagedefault">		
                    <div id="pagenav">
                        <div>
                            <!-- Start of Other language links -->
                            <!-- End of Other language links -->
                            <div class="homelink_container">
                                <a href="https://wiki.unrealengine.com" title="UE4 Wiki Home" class="homelink">HOME</a>
                            </div>
                        </div>
                        <div style="clear:both;">
                        </div>
                    </div>	
		<div id="mw-navigation" style="max-width:972px;margin:1em auto 0 auto;">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="jumplink" onclick="$('#sidebar').toggle();">
					Navigation
				</div>
				<div id="sidebar">
					<!-- Start of jump page links -->
					<div class="largetitle">
						Quick Links
					</div>
					<div class="arrowlist">
						<!-- End of jump page links -->
						<!-- Start of related page links -->
						<!-- End of related page links -->								
						<div id="mw-panel">
							<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage"><a href="/Main_Page" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
			<li id="n-Tutorials"><a href="/Category:Tutorials">Tutorials</a></li>
			<li id="n-Videos"><a href="/Videos">Videos</a></li>
			<li id="n-Plug-ins"><a href="/Category:Plug-ins">Plug-ins</a></li>
			<li id="n-Code"><a href="/Category:Code">Code</a></li>
			<li id="n-Games"><a href="/Category:Games">Games</a></li>
			<li id="n-Unreal-Tournament"><a href="/Category:Unreal_Tournament">Unreal Tournament</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="/Special:WhatLinksHere/Shooter_Game_-_Toggle_Third_Person" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="/Special:RecentChangesLinked/Shooter_Game_-_Toggle_Third_Person" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="/index.php?title=Shooter_Game_-_Toggle_Third_Person&amp;oldid=14677&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="/index.php?title=Shooter_Game_-_Toggle_Third_Person&amp;oldid=14677" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="/index.php?title=Shooter_Game_-_Toggle_Third_Person&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
						</div>
					</div>
				</div>				
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="/Shooter_Game_-_Toggle_Third_Person"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="/index.php?title=Talk:Shooter_Game_-_Toggle_Third_Person&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="/Shooter_Game_-_Toggle_Third_Person" >View</a></span></li>
					<li id="ca-viewsource"><span><a href="/index.php?title=Shooter_Game_-_Toggle_Third_Person&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="/index.php?title=Shooter_Game_-_Toggle_Third_Person&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">History</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-createaccount"><a href="/index.php?title=Special:UserLogin&amp;returnto=Shooter+Game+-+Toggle+Third+Person&amp;returntoquery=oldid%3D14677&amp;type=signup">Create account</a></li><li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Shooter+Game+-+Toggle+Third+Person&amp;returntoquery=oldid%3D14677" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>
				</div>
			</div>
		</div>
		<div id="maincol">
		<div class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- Start of crumbs links -->
			<div class="crumbs">
			<p>
							</p>
			</div>
			<!-- End of crumbs links -->
			<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Shooter Game - Toggle Third Person</span></h1>
			<div id="bodyContent">
				<div id="contentSub"><div id="mw-revision-info">Revision as of 20:28, 10 July 2015 by <a href="/index.php?title=User:GregBlast&amp;action=edit&amp;redlink=1" class="new mw-userlink" title="User:GregBlast (page does not exist)">GregBlast</a>  <span class="mw-usertoollinks">(<a href="/index.php?title=User_talk:GregBlast&amp;action=edit&amp;redlink=1" class="new" title="User talk:GregBlast (page does not exist)">Talk</a> | <a href="/Special:Contributions/GregBlast" title="Special:Contributions/GregBlast">contribs</a>)</span></div><br />
				<div id="mw-revision-nav">(<a href="/index.php?title=Shooter_Game_-_Toggle_Third_Person&amp;diff=prev&amp;oldid=14677" title="Shooter Game - Toggle Third Person">diff</a>) <a href="/index.php?title=Shooter_Game_-_Toggle_Third_Person&amp;direction=prev&amp;oldid=14677" title="Shooter Game - Toggle Third Person">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>
																<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="aux">
<div>
<b>Rate this Article:</b> <div id="rating_"><div class="rating-score"><div class="voteboxrate">5.00</div></div><div class="rating-section"><img class="vote-rating-star" data-vote-the-vote="1" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__1" src="/extensions/VoteNY/images/star_on.gif" alt="" /><img class="vote-rating-star" data-vote-the-vote="2" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__2" src="/extensions/VoteNY/images/star_on.gif" alt="" /><img class="vote-rating-star" data-vote-the-vote="3" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__3" src="/extensions/VoteNY/images/star_on.gif" alt="" /><img class="vote-rating-star" data-vote-the-vote="4" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__4" src="/extensions/VoteNY/images/star_on.gif" alt="" /><img class="vote-rating-star" data-vote-the-vote="5" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__5" src="/extensions/VoteNY/images/star_on.gif" alt="" /> <span class="rating-total">(3 votes)</span></div>
				<div class="rating-clear">
			</div></div>
</div>
<div>
<p>Approved for Versions:4.4, 4.5, 4.6, 4.7
</p>
</div>
</div>
<p>Original author: <a rel="nofollow" class="external text" href="https://forums.unrealengine.com/member.php?3827-GregBlast">GregBlast</a>
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Purpose"><span class="tocnumber">2</span> <span class="toctext">Purpose</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Required"><span class="tocnumber">3</span> <span class="toctext">Required</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Tutorial"><span class="tocnumber">4</span> <span class="toctext">Tutorial</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Play-testing_the_game"><span class="tocnumber">4.1</span> <span class="toctext">Play-testing the game</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Inside_the_code"><span class="tocnumber">4.2</span> <span class="toctext">Inside the code</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Digging_the_grave_.28into_the_death_code.29"><span class="tocnumber">4.2.1</span> <span class="toctext">Digging the grave (into the death code)</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Camera_view_state"><span class="tocnumber">4.2.2</span> <span class="toctext">Camera view state</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Adding_third_person_support"><span class="tocnumber">4.2.3</span> <span class="toctext">Adding third person support</span></a>
<ul>
<li class="toclevel-4 tocsection-10"><a href="#Preparing_the_header_file"><span class="tocnumber">4.2.3.1</span> <span class="toctext">Preparing the header file</span></a></li>
<li class="toclevel-4 tocsection-11"><a href="#Adding_the_code"><span class="tocnumber">4.2.3.2</span> <span class="toctext">Adding the code</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-12"><a href="#Adding_inputs"><span class="tocnumber">4.2.4</span> <span class="toctext">Adding inputs</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-13"><a href="#Taking_a_step_back"><span class="tocnumber">4.3</span> <span class="toctext">Taking a step back</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#The_weapon"><span class="tocnumber">4.4</span> <span class="toctext">The weapon</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Adding_support_for_third_person_view_in_weapon_code"><span class="tocnumber">4.4.1</span> <span class="toctext">Adding support for third person view in weapon code</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#Fixing_the_camera_view_in_third_person"><span class="tocnumber">4.5</span> <span class="toctext">Fixing the camera view in third person</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Adding_the_third_person_camera"><span class="tocnumber">4.5.1</span> <span class="toctext">Adding the third person camera</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Fixing_the_zoom_in.2Fout_.28FOV_change.29_on_right-click"><span class="tocnumber">4.5.2</span> <span class="toctext">Fixing the zoom in/out (FOV change) on right-click</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#Fixing_muzzle_flash"><span class="tocnumber">4.6</span> <span class="toctext">Fixing muzzle flash</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#Recap"><span class="tocnumber">5</span> <span class="toctext">Recap</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#Potential_Issues"><span class="tocnumber">6</span> <span class="toctext">Potential Issues</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Overview">Overview</span></h1>
<p>Hello everyone&#160;!
</p><p><br />
In this tutorial I will show you how you can modify the <b>Shooter Game</b> sample from the <b>Marketplace</b> to allow toggling between first and third person views. The approach I will be using will be focused on sticking as much as possible to the original behaviour. By this I mean that I am not going to erase the use of a first person mesh when in first person view, but rather still keep its advantage and add a way to use the third person model and features only when needed.
</p><p>In the tutorial I describe how I understood the code to tell you what it does and based on what. That's why it's not a quick short tutorial. If I have misunderstood something please do not hesitate to let me know.
</p>
<div class="thumb tnone"><div class="thumbinner" style="width:942px;"><a href="/File:ShooterGameThirdPersonView.png" class="image"><img alt="" src="https://d3ar1piqh1oeli.cloudfront.net/d/d5/ShooterGameThirdPersonView.png/940px-ShooterGameThirdPersonView.png" width="940" height="508" class="thumbimage" srcset="https://d3ar1piqh1oeli.cloudfront.net/d/d5/ShooterGameThirdPersonView.png/1410px-ShooterGameThirdPersonView.png 1.5x, https://d3ar1piqh1oeli.cloudfront.net/d/d5/ShooterGameThirdPersonView.png/1880px-ShooterGameThirdPersonView.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="/File:ShooterGameThirdPersonView.png" class="internal" title="Enlarge"><img src="/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></a></div><b>Third Person View</b> in the <b>Shooter Game</b> sample from the <b>Marketplace</b></div></div></div>
<h1><span class="mw-headline" id="Purpose">Purpose</span></h1>
<p>The main purpose of this tutorial is of course to show you how to upgrade the original code to add third person view. However I will try to explain everything I did and how I found out it had to be done so that you can understand what you do instead of just copy-pasting the code.<br />
The code sections won't include the methods names if they have been exposed in the description above them, so that you have to read them to know what to do. However I've marked the most relevant information in bold whenever applicable.
</p>
<h1><span class="mw-headline" id="Required">Required</span></h1>
<p>For this tutorial you will need to download the <b>Shooter Game</b> sample from the <b>Marketplace</b> and create a project preferably using <b>Unreal Engine 4.4.3</b> (most other versions will probably work but you might notice a few differences).
</p>
<div style="background-color: #F0F0E7; border: 1px solid #C93; border-left: 5px solid #C93; padding-left: 5px; margin: 4px 0; min-height: 40px;">
<p><img alt="Note" src="https://d26ilriwvtzlb.cloudfront.net/a/a5/Icon_template_note1.png" width="30" height="35" style="vertical-align: top" /> 
I have personally tested it on <b>4.7</b> and all was fine (taking into account the additional notes I wrote in the different sections below).
</p>
</div>
<h1><span class="mw-headline" id="Tutorial">Tutorial</span></h1>
<h2><span class="mw-headline" id="Play-testing_the_game">Play-testing the game</span></h2>
<p>So to get started - and if you haven't already - you should first run the sample to see how everything behaves.
</p><p>When alive you can see your character arms and weapon. If you look down you won't see any legs. That's because a special first person mesh has been given to the local player. As the local player is always in first person view you could think that the code has been written in that direction as well. And it has for some parts of it but fortunately not all. We'll get back on this later.
</p><p>It's interesting to see what happens when you die. The camera stops moving and you can see a third person ragdoll fall to the floor. This means that at this point the game switches between first person and third person views. 
</p><p>That is what got me started.
</p>
<h2><span class="mw-headline" id="Inside_the_code">Inside the code</span></h2>
<h3><span class="mw-headline" id="Digging_the_grave_.28into_the_death_code.29">Digging the grave (into the death code)</span></h3>
<p>From that point I searched for the handling of player death. Having a look at <b>ShooterCharacter.cpp</b> you will quickly find the <b>OnDeath</b> method which is called upon player death. Inside of that method you will notice the following commented piece of code (On line 341):
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="co1">// switch back to 3rd person view</span>
UpdatePawnMeshes<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>Let's then have a look at <b>UpdatePawnMeshes</b>. In that method you can see that another method determines which mesh should be visible: <b>IsFirstPerson()</b>. Its value is used with a call to <b>SetOwnerNoSee</b> on each mesh to show the first person mesh when in first person and show the third person mesh when in third person.
</p>
<h3><span class="mw-headline" id="Camera_view_state">Camera view state</span></h3>
<p>The <b>IsFirstPerson()</b> method defines the camera view state. If you have a look at its implementation you can see that it:
</p>
<ul>
<li> returns <b>false</b> if the player is dead
</li>
<li> returns <b>false</b> for remote players
</li>
<li> returns <b>true</b> for local players
</li>
</ul>
<p>This is good enough for the purpose of the game as it is but you can see that it doesn't really talk about first or third person. It just assumes that local players will always be in first person unless they are dead (hence the third person switch on death). So next we're going to start by adding support for third person.
</p>
<h3><span class="mw-headline" id="Adding_third_person_support">Adding third person support</span></h3>
<p>Here's what we're going to do for this purpose:
</p>
<ul>
<li> add a flag that will tell whether the player is using third person or not
</li>
<li> add support for this flag to be replicated so that the server will know if a player is using third person
</li>
<li> add default input support for this flag
</li>
<li> update IsFirstPerson to rely on this flag
</li>
</ul>
<h4><span class="mw-headline" id="Preparing_the_header_file">Preparing the header file</span></h4>
<p>Find the section of <b>ShooterCharacter.h</b> where the other flags are defined (e.g. below <b>bWantsToFire</b>) and add a new boolean flag for third person toggle:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/** flag used to toggle third person camera view */</span>
UPROPERTY<span class="br0">&#40;</span>Transient, Replicated<span class="br0">&#41;</span>
<span class="kw4">uint8</span> bIsThirdPerson<span class="sy4">;</span></pre></div></div>
<p>Next find the definition of <b>SetRunning</b> because we will be using a similar approach here. Below it add a definition for <b>SetThirdPerson</b>. This function will be responsible for actually toggling the camera view mode.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/** &lt;GB&gt; [server + local] change third person state (server has to know that player is using third person) */</span>
<span class="kw4">void</span> SetThirdPerson<span class="br0">&#40;</span><span class="kw4">bool</span> bNewThirdPerson<span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>We'll need one last definition in the header file. At the very bottom of the code you'll see <b>ServerSetRunning</b>. Again we'll add a relatively similar method below it:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/** update first person state*/</span>
UFUNCTION<span class="br0">&#40;</span>reliable, server, WithValidation<span class="br0">&#41;</span>
<span class="kw4">void</span> ServerSetThirdPerson<span class="br0">&#40;</span><span class="kw4">bool</span> bNewThirdPerson<span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<h4><span class="mw-headline" id="Adding_the_code">Adding the code</span></h4>
<p>Let's head to the code and add the implementation for our methods. Under <b>UpdateRunSounds</b> which is a good place for our purpose add the base code for the <b>SetThirdPerson</b> method (which will be similar to <b>SetRunning</b>):
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">void</span> AShooterCharacter<span class="sy4">::</span><span class="me2">SetThirdPerson</span><span class="br0">&#40;</span><span class="kw4">bool</span> bNewThirdPerson<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	bIsThirdPerson <span class="sy1">=</span> bNewThirdPerson<span class="sy4">;</span>
&#160;
	<span class="kw1">if</span> <span class="br0">&#40;</span>Role <span class="sy1">&lt;</span> ROLE_Authority<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		ServerSetThirdPerson<span class="br0">&#40;</span>bNewThirdPerson<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Then similarily add the server validation and implementation:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">bool</span> AShooterCharacter<span class="sy4">::</span><span class="me2">ServerSetThirdPerson_Validate</span><span class="br0">&#40;</span><span class="kw4">bool</span> bNewThirdPerson<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw1">return</span> <span class="kw2">true</span><span class="sy4">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> AShooterCharacter<span class="sy4">::</span><span class="me2">ServerSetThirdPerson_Implementation</span><span class="br0">&#40;</span><span class="kw4">bool</span> bNewThirdPerson<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	SetThirdPerson<span class="br0">&#40;</span>bNewThirdPerson<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Alright this will take care of updating our flag. However we saw earlier that <b>UpdatePawnMeshes</b> is the method that toggles the visibility of the mesh to use. We should then call it from <b>SetThirdPerson</b> to make sure that our first person mesh gets hidden and our third person mesh becomes visible when using third person (and vice versa). Simply add a call to <b>UpdatePawnMeshes();</b> at the bottom of <b>SetThirdPerson</b>.
</p><p>Good. But still <b>UpdatePawnMeshes</b> relies on <b>IsFirstPerson()</b> to determine which mesh to show or hide. We thus still need to update it so it uses our flag to determine the camera view mode. Head to <b>IsFirstPerson()</b> and in addition to testing whether the player is alive and local, also check if the third person flag is not set:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">return</span> IsAlive<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy3">&amp;&amp;</span> Controller <span class="sy3">&amp;&amp;</span> Controller<span class="sy2">-</span><span class="sy1">&gt;</span>IsLocalPlayerController<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy3">&amp;&amp;</span> <span class="sy3">!</span>bIsThirdPerson<span class="sy4">;</span></pre></div></div>
<p>Oh and last but not least lets not forget to initialize our flag in the constructor. Below <b>bWantsToFire = false;</b> do the same with our flag:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1">bIsThirdPerson <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span></pre></div></div>
<p><br />
</p>
<div style="background-color: #F0F0E7; border: 1px solid #C93; border-left: 5px solid #C93; padding-left: 5px; margin: 4px 0; min-height: 40px;">
<p><img alt="Note" src="https://d26ilriwvtzlb.cloudfront.net/a/a5/Icon_template_note1.png" width="30" height="35" style="vertical-align: top" /> 
You should probably declare a replication lifetime condition inside <b>GetLifetimeReplicatedProps</b> for the third person flag. I am unsure of how that works currently so I simply used the same as for <b>bWantsToRun</b>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1">DOREPLIFETIME_CONDITION<span class="br0">&#40;</span>AShooterCharacter, bIsThirdPerson, COND_SkipOwner<span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
</div>
<h3><span class="mw-headline" id="Adding_inputs">Adding inputs</span></h3>
<p>This section will be pretty straightforward as it is assumed that you know how to add inputs to trigger some action. In <b>ShooterCharacter.h</b> below <b>OnStopRunning</b> add the following input declarations:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/** player pressed 3rd person action */</span>
<span class="kw4">void</span> OnThirdPerson<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
<span class="coMULTI">/** player toggled 3rd person action */</span>
<span class="kw4">void</span> OnThirdPersonToggle<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
<span class="coMULTI">/** player released 3rd person action */</span>
<span class="kw4">void</span> OnFirstPerson<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>In the code file <b>ShooterCharacter.cpp</b> add the third person inputs implementations below <b>IsRunning</b>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">void</span> AShooterCharacter<span class="sy4">::</span><span class="me2">OnThirdPerson</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	AShooterPlayerController<span class="sy2">*</span> MyPC <span class="sy1">=</span> Cast<span class="sy1">&lt;</span>AShooterPlayerController<span class="sy1">&gt;</span><span class="br0">&#40;</span>Controller<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>MyPC <span class="sy3">&amp;&amp;</span> MyPC<span class="sy2">-</span><span class="sy1">&gt;</span>IsGameInputAllowed<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		SetThirdPerson<span class="br0">&#40;</span><span class="kw2">true</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> AShooterCharacter<span class="sy4">::</span><span class="me2">OnThirdPersonToggle</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	AShooterPlayerController<span class="sy2">*</span> MyPC <span class="sy1">=</span> Cast<span class="sy1">&lt;</span>AShooterPlayerController<span class="sy1">&gt;</span><span class="br0">&#40;</span>Controller<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>MyPC <span class="sy3">&amp;&amp;</span> MyPC<span class="sy2">-</span><span class="sy1">&gt;</span>IsGameInputAllowed<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		SetThirdPerson<span class="br0">&#40;</span><span class="sy3">!</span>bIsThirdPerson<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> AShooterCharacter<span class="sy4">::</span><span class="me2">OnFirstPerson</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	SetThirdPerson<span class="br0">&#40;</span><span class="kw2">false</span><span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Now let's bind those actions in <b>SetupPlayerInputComponent</b>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1">InputComponent<span class="sy2">-</span><span class="sy1">&gt;</span>BindAction<span class="br0">&#40;</span><span class="st0">&quot;ThirdPerson&quot;</span>, IE_Pressed, <span class="kw3">this</span>, <span class="sy3">&amp;</span>AShooterCharacter<span class="sy4">::</span><span class="me2">OnThirdPerson</span><span class="br0">&#41;</span><span class="sy4">;</span>
InputComponent<span class="sy2">-</span><span class="sy1">&gt;</span>BindAction<span class="br0">&#40;</span><span class="st0">&quot;ThirdPersonToggle&quot;</span>, IE_Pressed, <span class="kw3">this</span>, <span class="sy3">&amp;</span>AShooterCharacter<span class="sy4">::</span><span class="me2">OnThirdPersonToggle</span><span class="br0">&#41;</span><span class="sy4">;</span>
InputComponent<span class="sy2">-</span><span class="sy1">&gt;</span>BindAction<span class="br0">&#40;</span><span class="st0">&quot;ThirdPerson&quot;</span>, IE_Released, <span class="kw3">this</span>, <span class="sy3">&amp;</span>AShooterCharacter<span class="sy4">::</span><span class="me2">OnFirstPerson</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>Finally lets edit <b>Config/DefaultInput.ini</b> to bind some default keys to those actions:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="ini source-ini"><pre class="de1">+ActionMappings<span class="sy0">=</span><span class="re2"><span class="br0">&#40;</span>ActionName=</span><span class="st0">&quot;ThirdPersonToggle&quot;</span>,Key<span class="sy0">=</span><span class="re2">G,bShift=False,bCtrl=False,bAlt=False,bCmd=False<span class="br0">&#41;</span></span>
+ActionMappings<span class="sy0">=</span><span class="re2"><span class="br0">&#40;</span>ActionName=</span><span class="st0">&quot;ThirdPerson&quot;</span>,Key<span class="sy0">=</span><span class="re2">F,bShift=False,bCtrl=False,bAlt=False,bCmd=False<span class="br0">&#41;</span></span></pre></div></div>
<p>You'll thus be able to toggle third person with <b>G</b> or press and release <b>F</b> to switch to/from third person.
</p>
<h2><span class="mw-headline" id="Taking_a_step_back">Taking a step back</span></h2>
<p>Alright now we have a functional logic to toggle third person. So let's see what we get when running this code. Well you will actually notice a few problems:
</p>
<ul>
<li> in third person, the camera is inside of the player
</li>
<li> in third person, the weapon doesn't snap to the character's hands
</li>
<li> in third person, the right-click doesn't change bring iron sights or change the FOV
</li>
</ul>
<p>We'll start by taking care of the weapon.
</p>
<h2><span class="mw-headline" id="The_weapon">The weapon</span></h2>
<p>If you look at the code in <b>ShooterWeapon.cpp</b> you'll see that it also defines two meshes (one for 1st person and one for 3rd person) and that pretty much everywhere both of those are used in a rather generic manner so that you won't have to change much. For example:
</p>
<ul>
<li> <b>GetWeaponMesh</b> already checks for <b>IsFirstPerson()</b> on the owning Pawn
</li>
<li> <b>AttachMeshToPawn</b> has a comment that says: <i>For locally controller players we attach both weapons and let the bOnlyOwnerSee, bOwnerNoSee flags deal with visibility.</i>
</li>
</ul>
<p>However it doesn't snap to the player when in third person. The reason for that is simple: it's still the first person weapon mesh that is displayed in third person. And that last comment I quoted should set you on the correct path to handling this issue. You just need to swap model visibilities when switching between camera view modes just like it is done for the player model.
</p>
<h3><span class="mw-headline" id="Adding_support_for_third_person_view_in_weapon_code">Adding support for third person view in weapon code</span></h3>
<p>Let's define a new method in the <b>ShooterWeapon</b> header file that will be responsible for switching mesh visibility (below <b>IsAttachedToPawn</b> is fine):
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/** update the meshes visibility */</span>
<span class="kw4">void</span> UpdateMeshes<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>The implementation in <b>ShooterWeapon.cpp</b> will simply check the pawn <b>IsFirstPerson()</b> and assign visibility based on that. We don't need to check if the pawn is a player and not a bot because <b>IsFirstPerson()</b> already checks if the pawn is locally controlled and returns false if not (i.e. third person for bots).
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">void</span> AShooterWeapon<span class="sy4">::</span><span class="me2">UpdateMeshes</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>MyPawn<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		<span class="kw4">const</span> <span class="kw4">bool</span> bFirstPerson <span class="sy1">=</span> MyPawn<span class="sy2">-</span><span class="sy1">&gt;</span>IsFirstPerson<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
		Mesh1P<span class="sy2">-</span><span class="sy1">&gt;</span>SetOwnerNoSee<span class="br0">&#40;</span><span class="sy3">!</span>bFirstPerson<span class="br0">&#41;</span><span class="sy4">;</span>
		Mesh3P<span class="sy2">-</span><span class="sy1">&gt;</span>SetOwnerNoSee<span class="br0">&#40;</span>bFirstPerson<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Now we need to call that method when we switch between camera view modes. So let's go back to <b>ShooterCharacter.cpp</b> and update <b>UpdatePawnMeshes</b>. We'll simply update the meshes visibility for the current weapon, if any:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span>CurrentWeapon<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	CurrentWeapon<span class="sy2">-</span><span class="sy1">&gt;</span>UpdateMeshes<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Now if you run this you will notice a little problem when switching weapon. The second weapon will not use that code we just wrote. Well that's because when it is created and added to the inventory it will use the first person mesh and since we only change the visibilities when we toggle the camera view mode it won't affect that other weapon at the time we equip it.
</p><p>To fix that we can simply have a look at <b>AShooterWeapon.OnEquip</b>. At the bottom of the code you'll see that there is a check for locally controlled pawns. That is perfect for us to call our method. So add a call to <b>UpdateMeshes();</b> directly below the call to <b>PlayerWeaponSound</b>.
</p>
<h2><span class="mw-headline" id="Fixing_the_camera_view_in_third_person">Fixing the camera view in third person</span></h2>
<p>Now you could be tempted to think that this section will be the easiest. Well if you know how the engine works with the cameras you will probably have guessed that we're going to use a <b>UCameraComponent</b> to customize the third person view.
</p><p>For those of you who (like me before making this) do not know how the engine handles the local player view location and rotation here's what you need to know for this tutorial:
</p>
<ul>
<li> the <b>PlayerCameraManager</b> should be fed with a view target
</li>
<li> if the view target is a <b>CameraActor</b> or an <b>Actor</b> that contains a <b>CameraComponent</b>, it will use its information only if <b>bFindCameraComponentWhenViewTarget</b> is set to <b>true</b>
</li>
<li> if the flag is set to <b>false</b> or the <b>Actor</b> doesn't have a <b>CameraComponent</b> the camera manager will use the Actor's location and rotation
</li>
</ul>
<p>That said we know what we have to do:
</p>
<ul>
<li> add a <b>CameraComponent</b> to <b>ShooterCharacter</b>
</li>
<li> make sure <b>bFindCameraComponentWhenViewTarget</b> is disabled when using the first person mesh (so that the camera manager keeps using the first person mesh's location and rotation and not our third person camera)
</li>
</ul>
<h3><span class="mw-headline" id="Adding_the_third_person_camera">Adding the third person camera</span></h3>
<p>In the <b>ShooterCharacter</b> header file under <b>Mesh1P</b> add the following elements (camera + spring arm):
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/** third person camera */</span>
UPROPERTY<span class="br0">&#40;</span>VisibleDefaultsOnly, Category<span class="sy1">=</span>Camera<span class="br0">&#41;</span>
TSubobjectPtr<span class="sy1">&lt;</span>UCameraComponent<span class="sy1">&gt;</span> ThirdPersonCamera<span class="sy4">;</span>
&#160;
<span class="coMULTI">/** an arm for the third person camera*/</span>
UPROPERTY<span class="br0">&#40;</span>VisibleDefaultsOnly, Category<span class="sy1">=</span>Camera<span class="br0">&#41;</span>
TSubobjectPtr<span class="sy1">&lt;</span>USpringArmComponent<span class="sy1">&gt;</span> ThirdPersonCameraArm<span class="sy4">;</span></pre></div></div>
<p>Initialize them in the constructor in the code file:
</p><p>(If you're using engine version <b>4.5</b> or newer, replace the two instances of <b>bUseControllerViewRotation</b> with <b>bUsePawnControlRotation</b>)
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1">ThirdPersonCameraArm <span class="sy1">=</span> PCIP.<span class="me1">CreateDefaultSubobject</span><span class="sy1">&lt;</span>USpringArmComponent<span class="sy1">&gt;</span><span class="br0">&#40;</span><span class="kw3">this</span>, TEXT<span class="br0">&#40;</span><span class="st0">&quot;ThirdPersonCameraArm&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>TargetOffset <span class="sy1">=</span> FVector<span class="br0">&#40;</span><span class="nu0">0</span>.<span class="me1">f</span>, <span class="nu0">0</span>.<span class="me1">f</span>, <span class="nu0">0</span>.<span class="me1">f</span><span class="br0">&#41;</span><span class="sy4">;</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>SetRelativeLocation<span class="br0">&#40;</span>FVector<span class="br0">&#40;</span><span class="sy2">-</span><span class="nu0">40</span>.<span class="me1">f</span>, <span class="nu0">0</span>.<span class="me1">f</span>, <span class="nu0">160</span>.<span class="me1">f</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>SetRelativeRotation<span class="br0">&#40;</span>FRotator<span class="br0">&#40;</span><span class="sy2">-</span><span class="nu0">10</span>.<span class="me1">f</span>, <span class="nu0">0</span>.<span class="me1">f</span>, <span class="nu0">0</span>.<span class="me1">f</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>AttachTo<span class="br0">&#40;</span>Mesh<span class="br0">&#41;</span><span class="sy4">;</span> <span class="co1">// attach it to the third person mesh</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>TargetArmLength <span class="sy1">=</span> <span class="nu0">200</span>.<span class="me1">f</span><span class="sy4">;</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>bEnableCameraLag <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>bEnableCameraRotationLag <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>bUseControllerViewRotation <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span> <span class="co1">// let the controller handle the view rotation</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>bInheritYaw <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>bInheritPitch <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span>
ThirdPersonCameraArm<span class="sy2">-</span><span class="sy1">&gt;</span>bInheritRoll <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
&#160;
ThirdPersonCamera <span class="sy1">=</span> PCIP.<span class="me1">CreateDefaultSubobject</span><span class="sy1">&lt;</span>UCameraComponent<span class="sy1">&gt;</span><span class="br0">&#40;</span><span class="kw3">this</span>, TEXT<span class="br0">&#40;</span><span class="st0">&quot;ThirdPersonCamera&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
ThirdPersonCamera<span class="sy2">-</span><span class="sy1">&gt;</span>AttachTo<span class="br0">&#40;</span>ThirdPersonCameraArm, USpringArmComponent<span class="sy4">::</span><span class="me2">SocketName</span><span class="br0">&#41;</span><span class="sy4">;</span>
ThirdPersonCamera<span class="sy2">-</span><span class="sy1">&gt;</span>bUseControllerViewRotation <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span> <span class="co1">// the arm is already doing the rotation</span>
ThirdPersonCamera<span class="sy2">-</span><span class="sy1">&gt;</span>FieldOfView <span class="sy1">=</span> <span class="nu0">90</span>.<span class="me1">f</span><span class="sy4">;</span></pre></div></div>
<div style="background-color: #F0F0E7; border: 1px solid #C93; border-left: 5px solid #C93; padding-left: 5px; margin: 4px 0; min-height: 40px;">
<p><img alt="Note" src="https://d26ilriwvtzlb.cloudfront.net/a/a5/Icon_template_note1.png" width="30" height="35" style="vertical-align: top" /> 
In the most recent versions of the engine the <b>PCIP</b> variable is replaced by <b>ObjectInitializer</b>.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1">ThirdPersonCamera <span class="sy1">=</span> ObjectInitializer.<span class="me1">CreateDefaultSubobject</span><span class="sy1">&lt;</span>UCameraComponent<span class="sy1">&gt;</span><span class="br0">&#40;</span><span class="kw3">this</span>, TEXT<span class="br0">&#40;</span><span class="st0">&quot;ThirdPersonCamera&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>Also note that <b>TSubobjectPtr</b> is deprecated and components should be defined directly as a pointer instead (as stated by warning C4996: <i>TSubobjectPtr is deprecated and should no longer be used. Please use pointers instead.</i>)
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/** third person camera */</span>
UPROPERTY<span class="br0">&#40;</span>VisibleDefaultsOnly, Category<span class="sy1">=</span>Camera<span class="br0">&#41;</span>
UCameraComponent<span class="sy2">*</span> ThirdPersonCamera<span class="sy4">;</span></pre></div></div>
</div>
<p>Now we need to deactivate the auto-search for camera functionality within our pawn when in <b>first person</b>. This will prevent the camera manager from using our <b>third person camera</b> as the point of view there. Remember it will use the <b>first person mesh's</b> location and rotation in that case. We can do this directly in <b>UpdatePawnMeshes</b> before updating the weapon meshes:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1">bFindCameraComponentWhenViewTarget <span class="sy1">=</span> <span class="sy3">!</span>bFirstPerson<span class="sy4">;</span></pre></div></div>
<div style="background-color: #F0F0E7; border: 1px solid #C93; border-left: 5px solid #C93; padding-left: 5px; margin: 4px 0; min-height: 40px;">
<p><img alt="Note" src="https://d26ilriwvtzlb.cloudfront.net/a/a5/Icon_template_note1.png" width="30" height="35" style="vertical-align: top" /> 
The player controller can also be used as the view target in some situations. You should set it to never search for a camera to make sure it never uses it (even if I'm not sure the camera manager would find the pawn camera for it).
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span>Controller<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	Controller<span class="sy2">-</span><span class="sy1">&gt;</span>bFindCameraComponentWhenViewTarget <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
</div>
<p>At this point if you test the game everything should be working as expected. Everything except a little detail we forgot: remember what the right-click does in first person&#160;? Well it would be great to have at least a part of it functioning in third person too right&#160;? I mean it should at least zoom in/out (change the FOV). Well let's fix that then.
</p>
<h3><span class="mw-headline" id="Fixing_the_zoom_in.2Fout_.28FOV_change.29_on_right-click">Fixing the zoom in/out (FOV change) on right-click</span></h3>
<p>The <b>ShooterCharacter</b> code file contains a method called <b>OnCameraUpdate</b>. This method is actually called by the custom camera manager called <b>ShooterPlayerCameraManager</b> when it updates the camera (<b>UpdateCamera</b>). The first thing to note about this method is that it gets called only in first person. That's how it is defined to work in <b>ShooterPlayerCameraManager.UpdateCamera</b>. Since <b>OnCameraUpdate</b> is meant to update the camera view for the pawn we should use it if we need specific actions to be done with the view in third person. So let's modify <b>ShooterPlayerCameraManager.UpdateCamera</b> to do what we need in third person.
</p><p>The first part of the code calculates a new FOV (field of view). It does it only if the pawn returns <b>true</b> with <b>IsFirstPerson()</b>. If you still remember <b>IsFirstPerson</b> checks if the player is alive, local and now if he's not in third person (using our flag). Well let's just get rid of the check on our flag so it runs in third person too by checking alive and local manually.
Replace:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span>MyPawn <span class="sy3">&amp;&amp;</span> MyPawn<span class="sy2">-</span><span class="sy1">&gt;</span>IsFirstPerson<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre></div></div>
<p>With:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span>MyPawn <span class="sy3">&amp;&amp;</span> MyPawn<span class="sy2">-</span><span class="sy1">&gt;</span>IsAlive<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy3">&amp;&amp;</span> MyPawn<span class="sy2">-</span><span class="sy1">&gt;</span>IsLocallyControlled<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre></div></div>
<p>Do the same to call <b>OnCameraUpdate</b> on the pawn below the call to the base class.
</p><p>Finally we need to handle the camera update differently for the third person. There we'll only change the FOV of our third person camera while in first person there is a bunch of code that calculates a new relative location and rotation for the fist person mesh, which we don't want.
</p><p>In the <b>ShooterCharacter</b> header file add two new method declarations that take the same parameters as <b>OnCameraUpdate</b>. This is because they will be called by <b>OnCameraUpdate</b> using a branch on the camera view mode. Add those below <b>TornOff();</b>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/** camera update in first person */</span>
<span class="kw4">void</span> UpdateCameraFirstPerson<span class="br0">&#40;</span><span class="kw4">const</span> FVector<span class="sy3">&amp;</span> CameraLocation, <span class="kw4">const</span> FRotator<span class="sy3">&amp;</span> CameraRotation<span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
<span class="coMULTI">/** camera update in third person */</span>
<span class="kw4">void</span> UpdateCameraThirdPerson<span class="br0">&#40;</span><span class="kw4">const</span> FVector<span class="sy3">&amp;</span> CameraLocation, <span class="kw4">const</span> FRotator<span class="sy3">&amp;</span> CameraRotation<span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>Now take all the code from <b>OnCameraUpdate</b> and use it as the implementation of <b>UpdateCameraFirstPerson</b>. Just a simple cut-paste from one method to the other&#160;;). Then modify <b>OnCameraUpdate</b> so that it updates the first person view in first person and the third person view in third person:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">if</span> <span class="br0">&#40;</span>IsFirstPerson<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	UpdateCameraFirstPerson<span class="br0">&#40;</span>CameraLocation, CameraRotation<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span>
<span class="kw1">else</span>
<span class="br0">&#123;</span>
	UpdateCameraThirdPerson<span class="br0">&#40;</span>CameraLocation, CameraRotation<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>The implementation of <b>UpdateCameraThirdPerson</b> is not very complicated. Remember what the <b>ShooterPlayerCameraManager</b> did with the FOV&#160;? It redefined it's own <b>DefaultFOV</b> value. So that's the one we'll be using for our third person camera. Simply assign the camera's FOV with the <b>DefaultFOV</b> from the camera manager like this:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">void</span> AShooterCharacter<span class="sy4">::</span><span class="me2">UpdateCameraThirdPerson</span><span class="br0">&#40;</span><span class="kw4">const</span> FVector<span class="sy3">&amp;</span> CameraLocation, <span class="kw4">const</span> FRotator<span class="sy3">&amp;</span> CameraRotation<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>Controller <span class="sy3">&amp;&amp;</span> ThirdPersonCamera<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		ThirdPersonCamera<span class="sy2">-</span><span class="sy1">&gt;</span>FieldOfView <span class="sy1">=</span> Cast<span class="sy1">&lt;</span>AShooterPlayerController<span class="sy1">&gt;</span><span class="br0">&#40;</span>Controller<span class="br0">&#41;</span><span class="sy2">-</span><span class="sy1">&gt;</span>PlayerCameraManager<span class="sy2">-</span><span class="sy1">&gt;</span>DefaultFOV<span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Done! It should now be fully operational. Wait... I noticed one more strange thingy when playing. Yeah, the muzzle flash is not spawned at the correct location in third person. Well that's right. Again that part is based on mesh visibility but doesn't take the first person state into account directly.
</p>
<h2><span class="mw-headline" id="Fixing_muzzle_flash">Fixing muzzle flash</span></h2>
<p><b>ShooterWeapon.SimulateWeaponFire</b> is the one method in charge for that. A comment has been added to let us know that 2 effects are created because of a potential split screen game. In thate case both players are locally controlled so the shooter will see one effect and the other player will see the other one. Well lets define our possible cases:
</p>
<ul>
<li> shooting in first person =&gt; show first person effect to shooter, show third person effect to other player
</li>
<li> shooting in third person =&gt; show third person effect to both players
</li>
</ul>
<p>So we'll first gather the result of <b>IsFirstPerson()</b>. Then we'll spawn the first person effect only in first person as nobody will need to see it in third person. It will be the shooting player's effect in first person. In third person it will become the other player's effect. The second effect will be the shooting player's effect when in third person and the other player's effect when in first person. Modify the code to look like this:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">if</span><span class="br0">&#40;</span> PlayerCon <span class="sy3">!</span><span class="sy1">=</span> <span class="kw2">NULL</span> <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw4">const</span> <span class="kw4">bool</span> isFirstPerson <span class="sy1">=</span> MyPawn<span class="sy2">-</span><span class="sy1">&gt;</span>IsFirstPerson<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
	<span class="co1">// &lt;GB&gt; In first person, this will be the Shooting player's effect</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>isFirstPerson<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		Mesh1P<span class="sy2">-</span><span class="sy1">&gt;</span>GetSocketLocation<span class="br0">&#40;</span>MuzzleAttachPoint<span class="br0">&#41;</span><span class="sy4">;</span>
		MuzzlePSC <span class="sy1">=</span> UGameplayStatics<span class="sy4">::</span><span class="me2">SpawnEmitterAttached</span><span class="br0">&#40;</span>MuzzleFX, Mesh1P, MuzzleAttachPoint<span class="br0">&#41;</span><span class="sy4">;</span>
		MuzzlePSC<span class="sy2">-</span><span class="sy1">&gt;</span>bOwnerNoSee <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
		MuzzlePSC<span class="sy2">-</span><span class="sy1">&gt;</span>bOnlyOwnerSee <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
&#160;
	<span class="co1">// &lt;GB&gt; In third person, this will be the Other player's effect</span>
	<span class="kw1">else</span>
	<span class="br0">&#123;</span>
		Mesh3P<span class="sy2">-</span><span class="sy1">&gt;</span>GetSocketLocation<span class="br0">&#40;</span>MuzzleAttachPoint<span class="br0">&#41;</span><span class="sy4">;</span>
		MuzzlePSC <span class="sy1">=</span> UGameplayStatics<span class="sy4">::</span><span class="me2">SpawnEmitterAttached</span><span class="br0">&#40;</span>MuzzleFX, Mesh3P, MuzzleAttachPoint<span class="br0">&#41;</span><span class="sy4">;</span>
		MuzzlePSC<span class="sy2">-</span><span class="sy1">&gt;</span>bOwnerNoSee <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span>
		MuzzlePSC<span class="sy2">-</span><span class="sy1">&gt;</span>bOnlyOwnerSee <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
&#160;
	<span class="co1">// &lt;GB&gt; In first person, this will be the Other player's effect</span>
	<span class="co1">// &lt;GB&gt; In third person, this will be the Shooting player's effect</span>
	Mesh3P<span class="sy2">-</span><span class="sy1">&gt;</span>GetSocketLocation<span class="br0">&#40;</span>MuzzleAttachPoint<span class="br0">&#41;</span><span class="sy4">;</span>
	MuzzlePSCSecondary <span class="sy1">=</span> UGameplayStatics<span class="sy4">::</span><span class="me2">SpawnEmitterAttached</span><span class="br0">&#40;</span>MuzzleFX, Mesh3P, MuzzleAttachPoint<span class="br0">&#41;</span><span class="sy4">;</span>
	MuzzlePSCSecondary<span class="sy2">-</span><span class="sy1">&gt;</span>bOwnerNoSee <span class="sy1">=</span> isFirstPerson<span class="sy4">;</span>
	MuzzlePSCSecondary<span class="sy2">-</span><span class="sy1">&gt;</span>bOnlyOwnerSee <span class="sy1">=</span> <span class="sy3">!</span>isFirstPerson<span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>That should do it. Now you'll see your muzzle flash coming out of your gun correctly in third person view.
</p>
<h1><span class="mw-headline" id="Recap">Recap</span></h1>
<p>That's it for this tutorial. Of course do not hesitate to let me know if I made any mistakes or if some improvements could be added. I'll gladly reply to you and upgrade this.
</p><p>Thanks for reading&#160;:).
</p><p><a rel="nofollow" class="external text" href="https://forums.unrealengine.com/member.php?3827-GregBlast">GregBlast</a>
</p>
<h1><span class="mw-headline" id="Potential_Issues">Potential Issues</span></h1>
<p>As mentioned in the tutorial I am unsure about the replication part of the code. But as it doesn't really fall into the scope of this tutorial I'm not going to dig any further into it. Please feel free to let me know if what I did was incorrect.
</p>
<!-- 
NewPP limit report
CPU time usage: 0.206 seconds
Real time usage: 0.257 seconds
Preprocessor visited node count: 369/1000000
Preprocessor generated node count: 786/1000000
Post‐expand include size: 2128/2097152 bytes
Template argument size: 1175/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->
</div>												<div class="printfooter">
				Retrieved from "<a href="https://wiki.unrealengine.com/index.php?title=Shooter_Game_-_Toggle_Third_Person&amp;oldid=14677">https://wiki.unrealengine.com/index.php?title=Shooter_Game_-_Toggle_Third_Person&amp;oldid=14677</a>"				</div>
												<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/Category:Tutorials" title="Category:Tutorials">Tutorials</a></li><li><a href="/Category:Code" title="Category:Code">Code</a></li><li><a href="/Category:Community_Created_Content" title="Category:Community Created Content">Community Created Content</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		</div>
		</div>
		
		<div id="footer">
			<div id="brand">

			</div>
			<div id="legal">
				<div id="copyright">
					&copy; 2004-2015, Epic Games, Inc. All rights reserved. Unreal and its logo are Epic's trademarks or registered trademarks in the US and elsewhere.
				</div>
				<div id="terms">
					<a target="_blank" href="http://epicgames.com/tou">TERMS OF USE</a> | <a target="_blank" href="http://epicgames.com/privacynotice">PRIVACY POLICY</a>
				</div>
			</div>
		</div>
	</div>
		<!--<div id="footer" role="contentinfo">
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<div name="copyright">&#169; 2004-2014, Epic Games, Inc. All rights reserved. Epic Games, Unreal, Unreal Engine, Unreal Tournament, and their respective logos are Epic's trademarks or registered trademarks in the US and elsewhere.</div>
					</li>
					<li id="footer-termsofuseico">
						<div name="termsofuse"><a href="http://epicgames.com/tou" target="_blank">Terms of Use</a></div>
					</li>
					<li id="footer-privacynoticeico">
						<div name="privacynotice"><a href="http://epicgames.com/privacynotice" target="_blank">Privacy Policy</a></div>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>-->
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="/extensions/EpicSearchSystem/Javascript/Search.js?303"></script>
<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=epic&amp;*"></script>
<!-- Served in 0.315 secs. -->		<img src="https://tracking.unrealengine.com/track.png" width="1" height="1">
		<!--<script type="text/javascript">
			setTimeout(function () {
				var a = document.createElement("script");
				var b = document.getElementsByTagName("script")[0];
				a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0028/4572.js?" + Math.floor(new Date().getTime() / 3600000);
				a.async = true; a.type = "text/javascript"; b.parentNode.insertBefore(a, b)
			}, 1);
		</script>-->
	</body>
</html>

		