(window.webpackJsonp=window.webpackJsonp||[]).push([[1004],{1452:function(e,t,r){"use strict";r.r(t);var n=r(28),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("Spawn Different Pawns For Every Player - Epic Wiki")]),e._v(" "),r("h1",{attrs:{id:"spawn-different-pawns-for-every-player"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#spawn-different-pawns-for-every-player"}},[e._v("#")]),e._v(" Spawn Different Pawns For Every Player")]),e._v(" "),r("p",[r("strong",[e._v("Rate this Article:")])]),e._v(" "),r("p",[e._v("4.00")]),e._v(" "),r("p",[r("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),r("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),r("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),r("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),r("img",{attrs:{src:"/extensions/VoteNY/images/star_off.gif",alt:""}}),e._v(" (one vote)")]),e._v(" "),r("p",[e._v("Approved for Versions:(please verify)")]),e._v(" "),r("p",[e._v("Not every player is likely going to use "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/DefaultPawnClass/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("DefaultPawnClass"),r("OutboundLink")],1),e._v(" as their Pawn and my quick search through the UE4 community didn't result in any information. The Shooter example touches on this but only handles the difference between AI and Player, and not what to do if you have multiple Pawns that a player can select.")]),e._v(" "),r("p",[e._v("The first question I had when starting into this was where to store the information that tells the server what player is using what Pawn. I think the reason I struggled with this for so long was simply because the class that really holds information about a player is named "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/APlayerController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("APlayerController"),r("OutboundLink")],1),e._v(" and that led me to believe that I really should only be using it for input from the player. So very very wrong. The "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/APlayerController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("APlayerController"),r("OutboundLink")],1),e._v(" class is perfectly suited for this usage.")]),e._v(" "),r("p",[e._v("So the first thing I did was create a new struct to hold information about the players chosen Pawn. In the example below I only have one int32 as a property, but in our actual code we're storing much more about the Pawn that is required at spawn such as items the player may have equipped. For the purposes of this tutorial though the below is enough.")]),e._v(" "),r("p",[e._v("struct PlayerPawnData\n{\nint32 Type;\n};")]),e._v(" "),r("p",[e._v("Then inside your custom "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/APlayerController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("APlayerController"),r("OutboundLink")],1),e._v(" declaration you'd want to define a public property that uses this struct as it's type.")]),e._v(" "),r("p",[e._v("PlayerPawnData CurrentPawnData;")]),e._v(" "),r("p",[e._v("With this data now available in your "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/APlayerController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("APlayerController"),r("OutboundLink")],1),e._v(" declaration lets move to the custom "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("AGameMode"),r("OutboundLink")],1),e._v(" you've defined for your UE4 game.")]),e._v(" "),r("p",[e._v("There are a few functions inside "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("AGameMode"),r("OutboundLink")],1),e._v(" that are important to respawning a player. The first is "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/RestartPlayer/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("RestartPlayer"),r("OutboundLink")],1),e._v(" and the name of this function should make it's use pretty self-explanatory. This function is called when a player spawns, whether it's when they've first joined or just died. The functions that are called inside "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/RestartPlayer/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("RestartPlayer"),r("OutboundLink")],1),e._v(" is what we're going to focus on, primarily "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/GetDefaultPawnClassForController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("GetDefaultPawnClassForController"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("The basic functionality of "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/GetDefaultPawnClassForController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("GetDefaultPawnClassForController"),r("OutboundLink")],1),e._v(" simply returns the member variable "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/DefaultPawnClass/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("DefaultPawnClass"),r("OutboundLink")],1),e._v(" but for this game that isn't going to work since each player could have a different Pawn class. That means we're going to have to override this function entirely. Lets start with the declaration inside your custom "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("AGameMode"),r("OutboundLink")],1),e._v(" class.")]),e._v(" "),r("p",[e._v("virtual UClass* GetDefaultPawnClassForController(AController* InController) OVERRIDE;")]),e._v(" "),r("p",[e._v("We'll also need some sort of storage so we can reference the Pawn class using the type provided inside the PlayerPawnData variable on the "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/APlayerController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("APlayerController"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("TMapBase<int32, UClass*, false> PawnTypes;")]),e._v(" "),r("p",[e._v("So we've marked "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/GetDefaultPawnClassForController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("GetDefaultPawnClassForController"),r("OutboundLink")],1),e._v(" as an override and we have a place to store our pawn types now lets create the functionality. Same as the examples above I've simplified the code for this tutorial. We've got a little more going on inside our "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/GetDefaultPawnClassForController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("GetDefaultPawnClassForController"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("UClass* AMyGameMode::GetDefaultPawnClassForController(AController* InController)\n{\nAMyPlayerController* PlayerController = Cast"),r("AMyPlayerController",[e._v("(InController);")])],1),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("UClass\\* PawnClass = PawnTypes.Find(PlayerController->CurrentPawnData.Type);\n\nreturn PawnClass;\n")])])]),r("p",[e._v("}")]),e._v(" "),r("p",[e._v("So what's happening above? We're casting the incoming "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("AController"),r("OutboundLink")],1),e._v(" into our customÂ "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/APlayerController/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("APlayerController"),r("OutboundLink")],1),e._v(" and then referencing the CurrentPawnData's property Type to find the correct Pawn to spawn. With just this overridden the UE4 base "),r("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AGameMode/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("AGameMode"),r("OutboundLink")],1),e._v(" class will start spawning the correct Pawn when the player joins or dies.")]),e._v(" "),r("p",[e._v("I'm sure there's a different way to go about doing this but this felt right to me. Storing the actual UClass would be an option but because in our specific use case we're storing more than just the UClass to spawn but also base stats pertaining to that Pawn type I went with just storing the type.")]),e._v(" "),r("p",[e._v("Reposted from "),r("a",{attrs:{href:"http://www.osnapgames.com/2014/06/17/spawn-different-pawns-depending-on-player-selection/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.osnapgames.com/2014/06/17/spawn-different-pawns-depending-on-player-selection/"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v('Retrieved from "'),r("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Spawn_Different_Pawns_For_Every_Player&oldid=8306",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=Spawn_Different_Pawns_For_Every_Player&oldid=8306"),r("OutboundLink")],1),e._v('"')]),e._v(" "),r("p",[r("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[e._v("Categories")]),e._v(":")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"/Category:Tutorials",title:"Category:Tutorials"}},[e._v("Tutorials")])]),e._v(" "),r("li",[r("a",{attrs:{href:"/Category:Code",title:"Category:Code"}},[e._v("Code")])]),e._v(" "),r("li",[r("a",{attrs:{href:"/Category:Community_Created_Content",title:"Category:Community Created Content"}},[e._v("Community Created Content")])])]),e._v(" "),r("p",[e._v("Hidden category:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"/Category:Templates",title:"Category:Templates"}},[e._v("Templates")])])]),e._v(" "),r("p",[r("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);t.default=a.exports}}]);