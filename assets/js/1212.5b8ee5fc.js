(window.webpackJsonp=window.webpackJsonp||[]).push([[1212],{511:function(e,t,a){"use strict";a.r(t);var i=a(28),r=Object(i.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Visual Effects: Lesson 03 A: Near Camera Fading - Epic Wiki")]),e._v(" "),a("h1",{attrs:{id:"visual-effects-lesson-03-a-near-camera-fading"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#visual-effects-lesson-03-a-near-camera-fading"}},[e._v("#")]),e._v(" Visual Effects: Lesson 03 A: Near Camera Fading")]),e._v(" "),a("p",[e._v("If you have played any first person or third person action game there is a pretty good chance that at one moment or another, an explosion effect or drifting smoke effect happened to play in close proximity to your player camera.")]),e._v(" "),a("p",[e._v("In this lesson we will show you how to nicely fade out sprites as they get near to the camera to avoid the unsightly pop which might happen when a single camera facing sprite clips the near plane of the gameplay camera.")]),e._v(" "),a("p",[e._v("This is one trick we employ at Epic on nearly every effect we know will be in the gameplay space, and has any possibility of interacting with the player camera. The visual POP when a sprite clips the camera is not only very distracting; it also destroys the illusion of volume every sprite driven effect is hoping to convey.")]),e._v(" "),a("p",[e._v("If you have completed lesson 02, you should now have 2 materials in your Content Browser. It is my hope that we continue to build on the material for the first lesson, so you can easily see how to best layer on material effects within a network, and begin to see how to break a material down into the core components which make-up the logic which drives the visual.")]),e._v(" "),a("p",[e._v("Let’s start by duplicating our DepthFade material, and name it M_Trans_Unlit_DepthCameraFade.")]),e._v(" "),a("p",[e._v("Now that we know how to drag off of inputs/outputs, I am going to go a bit faster, often times saying to string up your inputs/outputs. I will do my best to always include a thumbnail so you can ensure the connections are correct.")]),e._v(" "),a("p",[e._v("Open your new Material and let’s add a Spheremask to the graph.")]),e._v(" "),a("p",[e._v("For a detailed description of what the Spheremask expression does, check "),a("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/Engine/Rendering/Materials/ExpressionReference/Utility/index.html#spheremask",target:"_blank",rel:"noopener noreferrer"}},[e._v("this page"),a("OutboundLink")],1),e._v(" of the UE4 materials compendium.")]),e._v(" "),a("p",[e._v("For the A, input connect a PixelDepth expression; for the B hook up a constant, you can do this by pressing + holding the 1 key, and clicking in the graph. Set your constant to a value of 0.00 and connect it to the B input.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:PixelDepthSphereMask.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/b/ba/PixelDepthSphereMask.png",alt:"PixelDepthSphereMask.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:PixelDepthSphereMask.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Next select the Sphere Mask node and leave the Radius at the default value, and set the Hardness to 10.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:MatExDetails.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/c/c9/MatExDetails.png",alt:"MatExDetails.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:MatExDetails.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("We are now going to use a handy feature of the material editor to see exactly what our expression setup is doing. Right Click on the output of the SphereMask expression and choose Start Previewing Node from the drop down list.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:PreviewOutputSphere.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/4/46/PreviewOutputSphere.png",alt:"PreviewOutputSphere.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:PreviewOutputSphere.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("You will now see the Material Preview window is only displaying the result of this small snippet of your Material network on the preview surface. If you have not already done so, click the plane icon so that you see the preview on a flat plane. If the plane is not visible, try rotating the view around. This is a one-sided material, so you may be looking at the backface of the preview plane.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:GraySquare.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/3/39/GraySquare.png",alt:"GraySquare.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:GraySquare.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("To see the result we are looking for, move your camera back and forth along the Y Axis (closer and further from the plane). You can see that the color shifts from white to black as the view gets further away.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BlackSquarePreview.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/2/23/BlackSquarePreview.png",alt:"BlackSquarePreview.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BlackSquarePreview.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("This is the result we are going to use to drive our near camera fade.")]),e._v(" "),a("p",[e._v("Next let’s try playing with the distance. Perhaps we want this transition to be very slow and soft. Select the SphereMask node again and change the radius to 500. Now move your view back and forth, and note that it takes twice as much distance to make the color shift from white to black. This radius is essentially defining a sphere around the sprite, in which the material will begin to fade in and out. Since this is done per sprite, it will work perfectly for our needs, as we don’t want the entire effect to fade out, just the pixels associated with the sprites nearest to our camera.")]),e._v(" "),a("p",[e._v("We have one problem left to solve. In order to fade the particles as they reach the camera, we need the color to change from white at a distance, to black when the camera gets near. This is a straight forward problem to fix, with an expression you will get a bunch of use out of in the future.")]),e._v(" "),a("p",[e._v("Right Click your SphereMask expression and choose Stop Previewing Node.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:StopPreviewOutput.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/2/26/StopPreviewOutput.png",alt:"StopPreviewOutput.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:StopPreviewOutput.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Drag off of the Sphere Mask output, and start typing “oneminus.”")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:1MinusX.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/5/57/1MinusX.png",alt:"1MinusX.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:1MinusX.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Note that the One Minus expression has a hyphenated name, in order to save precious screen real estate. 1-x is searchable by oneminus in the search panes.")]),e._v(" "),a("p",[e._v("The One Minus expression basically inverts the output of your node. So your blacks turn white, and your whites turn black. This will give us the near fade result we desire, when we multiply our Opacity output by this bit of logic.")]),e._v(" "),a("p",[e._v("Click and drag in the graph and highlight all of your near fade logic, rclick and start typing “comment” in the graph. Choose Create Comment from Selection in the list.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:DepthFade12.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/a/a3/DepthFade12.png/600px-DepthFade12.png",alt:"DepthFade12.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:DepthFade12.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("This will create a box around your logic, and position a cursor waiting for you to input a description. Type “NearCameraFade” in the field.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:NearCameraFadeComment.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/1/18/NearCameraFadeComment.png",alt:"NearCameraFadeComment.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:NearCameraFadeComment.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("This comment box makes it easy for you to come back at a later date and quickly see how you might have accomplished something. Often times weeks or months might go by before you need to touch your materials again. Well-documented materials make it easier to dissect your logic.")]),e._v(" "),a("p",[e._v("Next we will drag off of the one minus and connect it to a multiply node. Connect the output of your particleAlpha, multiply to the input of your NearCameraFade multiply, and string that into the input of your DepthFade expression.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:CameraMaterialNetwork.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/6/6a/CameraMaterialNetwork.png/600px-CameraMaterialNetwork.png",alt:"CameraMaterialNetwork.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:CameraMaterialNetwork.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Now if you move back and forth in the viewport, you will see your preview plane effectively fades in and out as you get closer to it. Next we will find a value that works best for our distance fading.")]),e._v(" "),a("p",[e._v("In the content browser, find your previous depth fade effect and copy it off. Give it an appropriate name. I named mine P_CameraFade. You can name your effect anything that is easiest for you to remember, and properly organize your work.")]),e._v(" "),a("p",[e._v("Open the effect from the content browser by double clicking the asset.")]),e._v(" "),a("p",[e._v("Click on the Required Module and set the material reference to your new CameraFade Material. Go to the Spawn Module and set the spawn rate to 10. Next let’s add a spherical emission by rClicking in the grey area beneath the module stack and choosing location > sphere. This will cause our particles to spawn in a sphere 50 units in radius.")]),e._v(" "),a("p",[e._v("Now, if you have followed along with me step by step, your particles will not fade out as you get closer to them in Cascade. I have made an error in my process, and I have done it on purpose to hopefully show you a possible work-flow hang-up that might catch you off guard.")]),e._v(" "),a("p",[e._v("The particles are not fading in and out as you move closer because we never compiled our material. Previewing your material outputs is a very handy tool, but sometimes it tricks me up and gets me comfortable with my result, and I forget to hit the compile button. If you ever get a result you are not expecting after working with a Material, make sure you go back to the Material editor and verify you compiled it, prior to changing up your logic.")]),e._v(" "),a("p",[e._v("Compile the material now, and return to Cascade. You will now see the particles fade out as you move closer to them, and it is done on a per pixel basis, so particles farther from the camera remain opaque.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:ParticleNearFad.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/b/b6/ParticleNearFad.png",alt:"ParticleNearFad.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:ParticleNearFad.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Find your effect in the content browser, by clicking the magnifying glass in Cascade.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:FindMaterialInCB.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/8/8b/FindMaterialInCB.png",alt:"FindMaterialInCB.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:FindMaterialInCB.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Drag the effect from the Content Browser into your scene. If you don’t have a scene open, create a default scene from the File menu.")]),e._v(" "),a("p",[e._v("Return to your Material and try tweaking the near fade distance in your material by changing the Radius to 75. Compile the Material and move your camera in the Perspective viewport back and forth until you get a distance you are happy with, relative to the size of your sprites.")]),e._v(" "),a("p",[e._v("I thought the value of 75 looked pretty good, and commented my SphereMask so I could quickly tell what distance I used for this Material.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:75percentCameraFade.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/e/e3/75percentCameraFade.png",alt:"75percentCameraFade.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:75percentCameraFade.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Now my particles will no longer clip the near plane of the camera, and that nasty POP! of the camera moving through a volume of sprites is solved!")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:NearFadeFinalResult.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/f/ff/NearFadeFinalResult.png/600px-NearFadeFinalResult.png",alt:"NearFadeFinalResult.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:NearFadeFinalResult.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("The Near Fade logic is material logic which we use quite frequently. As a result, many of our projects have created a MaterialFunction to handle this. A Material function is a very handy feature of the UE4 material editor which I will go over in the next lesson.")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/Visual_Effects:_Lesson_02:_Using_Depth_Fade",title:"Visual Effects: Lesson 02: Using Depth Fade"}},[e._v("Go back to Part 2")])]),e._v(" "),a("li",[a("a",{attrs:{href:"/Visual_Effects:_Lesson_03_B:_Replacing_Near_Camera_Fade_Logic_with_a_Material_Function",title:"Visual Effects: Lesson 03 B: Replacing Near Camera Fade Logic with a Material Function"}},[e._v("Continue to part 3 B")])])]),e._v(" "),a("p",[e._v('Retrieved from "'),a("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Visual_Effects:_Lesson_03_A:_Near_Camera_Fading&oldid=6497",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=Visual_Effects:_Lesson_03_A:_Near_Camera_Fading&oldid=6497"),a("OutboundLink")],1),e._v('"')]),e._v(" "),a("p",[a("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[e._v("Categories")]),e._v(":")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/Category:Tutorials",title:"Category:Tutorials"}},[e._v("Tutorials")])]),e._v(" "),a("li",[a("a",{attrs:{href:"/Category:Particle",title:"Category:Particle"}},[e._v("Particle")])]),e._v(" "),a("li",[a("a",{attrs:{href:"/Category:Epic_Created_Content",title:"Category:Epic Created Content"}},[e._v("Epic Created Content")])])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);t.default=r.exports}}]);