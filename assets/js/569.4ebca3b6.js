(window.webpackJsonp=window.webpackJsonp||[]).push([[569],{973:function(t,e,n){"use strict";n.r(e);var i=n(28),r=Object(i.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[t._v("How To Create Custom Blueprint Pin - Epic Wiki")]),t._v(" "),n("h1",{attrs:{id:"how-to-create-custom-blueprint-pin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#how-to-create-custom-blueprint-pin"}},[t._v("#")]),t._v(" How To Create Custom Blueprint Pin")]),t._v(" "),n("h2",{attrs:{id:"about"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#about"}},[t._v("#")]),t._v(" About")]),t._v(" "),n("p",[t._v("In this tutorial I will show you how to create custom Pins, which can be displayed in blueprint functions or nodes. If you ever used GameplayTags, I'm sure you noticed that some nodes have drop down tag list, you can select, instead of typing tags manually, and in this tutorial I will show you how to do it.")]),t._v(" "),n("h2",{attrs:{id:"setting-up"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#setting-up"}},[t._v("#")]),t._v(" Setting up")]),t._v(" "),n("p",[t._v("First you will need Editor module in your plugin/game project. You can find information how to add it here:")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://answers.unrealengine.com/questions/41509/extending-editor-engine.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://answers.unrealengine.com/questions/41509/extending-editor-engine.html"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("Once you have you module working, loading and compiling, you will need edit, editor module *.Build.cs file. So you public or private dependency modules will look like this:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v('\t\tPublicDependencyModuleNames.AddRange(\n\t\t\tnew string\\[\\]\n\t\t\t{\n\t\t\t\t"Core",\n                "Engine",\n                "CoreUObject",\n                "GameAttributes",\n                "UnrealEd",\n                "BlueprintGraph",\n                "GraphEditor",\n                "PropertyEditor",\n                "SlateCore",\n                "Slate",\n                "EditorStyle",\n                "Kismet",\n                "KismetCompiler"\n\t\t\t\t// ... add other public dependencies that you statically link with here ...\n\t\t\t}\n\t\t\t);\n')])])]),n("p",[t._v("GameAttributes is my custom module, you should add here you custom modules, to which you want have dependencies.")]),t._v(" "),n("p",[t._v("You will also need struct to customize your pin. I'm pretty sure you can do it against any type (including default Unreal Types), but I strongly advise to not do it. Since you end up with customizing everything, in every node, which might not need itÂ ðŸ˜‰.")]),t._v(" "),n("p",[t._v("Create new header file in your runtime module (or add to any existing file) new USTRUCT()")]),t._v(" "),n("p",[t._v("USTRUCT(BlueprintType)\nstruct FGAAttribute\n{\nGENERATED_USTRUCT_BODY()\npublic:\n//It's important to mark property as UPROPERTY(), it doesn't need to have any specifiers though.\nUPROPERTY(BlueprintReadOnly)\nFName AttributeName;\n};")]),t._v(" "),n("h2",{attrs:{id:"implementation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[t._v("#")]),t._v(" Implementation")]),t._v(" "),n("p",[t._v("Now we need to add several new files to project. First let's add actual pin customization class. Call it however you want, but good practice is to end it with Pin. Header:")]),t._v(" "),n("p",[t._v('#pragma once\n#include "SlateBasics.h"\n#include "SGraphPin.h"\nÂ \nÂ \nclass SGAAttributePin : public SGraphPin\n{\npublic:\nSLATE_BEGIN_ARGS(SGAAttributePin) {}\nSLATE_END_ARGS()\nÂ \npublic:\nvoid Construct(const FArguments& InArgs, UEdGraphPin* InGraphPinObj);\n//this override is used to display slate widget used forcustomization.\nvirtual TSharedRef<SWidget>\tGetDefaultValueWidget() override;\nvoid OnAttributeSelected(TSharedPtr<FString> ItemSelected, ESelectInfo::Type SelectInfo);\nprivate:\nTArray<TSharedPtr<FString>> AttributesList;\n};')]),t._v(" "),n("p",[t._v("Implementation:")]),t._v(" "),n("p",[t._v('#include "GameAttributesEditor.h"\nÂ \n#include "KismetEditorUtilities.h"\nÂ \n#include "STextComboBox.h"\n#include "EdGraph/EdGraphPin.h"\n#include "EdGraph/EdGraphSchema.h"\n#include "GAGlobalTypes.h"\n#include "GAAttributesBase.h"\n#include "GAAttributePin.h"\nÂ \nvoid SGAAttributePin::Construct(const FArguments& InArgs, UEdGraphPin* InGraphPinObj)\n{\nAttributesList.Empty();\nÂ \nSGraphPin::Construct(SGraphPin::FArguments(), InGraphPinObj);\n}\nTSharedRef<SWidget>\tSGAAttributePin::GetDefaultValueWidget()\n{\n//AttributesList.Empty();\nreturn\tSNew(STextComboBox) //note you can display any widget here\n.OptionsSource(&AttributesList)\n.OnSelectionChanged(this, &SGAAttributePin::OnAttributeSelected);\nÂ \n}\nvoid SGAAttributePin::OnAttributeSelected(TSharedPtr<FString> ItemSelected, ESelectInfo::Type SelectInfo)\n{\n//FString CurrentValue = GraphPinObj->GetDefaultAsString();\nFString CurrentDefaultValue = GraphPinObj->GetDefaultAsString();\nFString attribute = *ItemSelected;\nif (CurrentDefaultValue.IsEmpty())\n{\nCurrentDefaultValue = FString(TEXT("()"));\n}\n//here we construct, setter for value in struct.\n//open it with (\nFString AttributeString = TEXT("(");\nif (!attribute.IsEmpty())\n{'),n("br"),t._v('\n//now set here proerty name from USTRUCT(), \\" - will add opening "\n// so it will look like AttributeName="\nAttributeString += TEXT("AttributeName=\\"");\n//add value you want to set to your property"\nAttributeString += attribute;\n//close with "\nAttributeString += TEXT("\\"");\n}\n//and at last add ) so it will look like (AttributeName="Value");\nAttributeString += TEXT(")");\n//and here we set our value to parameter if it different than last one.\nif (!CurrentDefaultValue.Equals(AttributeString))\n{\nGraphPinObj->GetSchema()->TrySetDefaultValue(*GraphPinObj, AttributeString);\n}\nÂ \n//if ()\n}')]),t._v(" "),n("p",[t._v("Voila! We have our simple custom widget done.")]),t._v(" "),n("p",[t._v("Now we need Pin factory for our custom pin. Create new class and name it, in the way you will know it's pin factorÂ ðŸ˜‰.")]),t._v(" "),n("p",[t._v('#pragma once\n#include "SlateBasics.h"\n#include "GAGlobalTypes.h"\n#include "EdGraph/EdGraphPin.h"\n#include "EdGraph/EdGraphSchema.h"\n#include "EdGraphSchema_K2.h"\n#include "GAAttributePanelGraphPinFactory.h"\n#include "GAAttributePin.h"\n#include "EdGraphUtilities.h"\nÂ \nclass FGAAttributePanelGraphPinFactory : public FGraphPanelPinFactory\n{\nvirtual TSharedPtr<class SGraphPin> CreatePin(class UEdGraphPin* InPin) const override\n{\nconst UEdGraphSchema_K2* K2Schema = GetDefault<UEdGraphSchema_K2>();\n/*\nCheck if pin is struct, and then check if that pin is of struct type we want customize\n*/\nif (InPin->PinType.PinCategory == K2Schema->PC_Struct\n&& InPin->PinType.PinSubCategoryObject == FGAAttribute::StaticStruct())\n{\nreturn SNew(SGAAttributePin, InPin); //and return our customized pin widgetÂ ðŸ˜‰.\n}\nreturn nullptr;\n}\n};')]),t._v(" "),n("p",[t._v("That's all! For factory.")]),t._v(" "),n("p",[t._v("Last step is to register our pin factory, so it will know, when to replace pins.")]),t._v(" "),n("p",[t._v("To your module implementation (YouModuleName.cpp), you will need this code, so it might end up looking like that:")]),t._v(" "),n("p",[t._v('#pragma once\n#include "../Public/GameAttributesEditor.h"\n#include "GAAttributePin.h"\n#include "GAGlobalTypes.h"\n#include "GAAttributePanelGraphPinFactory.h"\nÂ \nÂ \n#include "GameAttributesEditorPrivatePCH.h"\nÂ \nÂ \nclass FGameAttributesEditor : public IGameAttributesEditor\n{\n/** IModuleInterface implementation */\nvirtual void StartupModule() override\n{\n//create your factory and shared pointer to it.\nTSharedPtr<FGAAttributePanelGraphPinFactory> GAAttributePanelGraphPinFactory = MakeShareable(new FGAAttributePanelGraphPinFactory());\n//and now register it.\nFEdGraphUtilities::RegisterVisualPinFactory(GAAttributePanelGraphPinFactory);\n}\nvirtual void ShutdownModule() override\n{\nÂ \n}\n};\nÂ \nIMPLEMENT_MODULE(FGameAttributesEditor, GameAttributesEditor)')]),t._v(" "),n("p",[t._v("And that's it! You now should have working pin customization. Assuming your pin widget is workingÂ ðŸ˜‰.")]),t._v(" "),n("p",[n("a",{attrs:{href:"/index.php?title=User:Iniside&action=edit&redlink=1",title:"User:Iniside (page does not exist)"}},[t._v("iniside")]),t._v(" ("),n("a",{attrs:{href:"/index.php?title=User_talk:Iniside&action=edit&redlink=1",title:"User talk:Iniside (page does not exist)"}},[t._v("talk")]),t._v(")")]),t._v(" "),n("p",[t._v('Retrieved from "'),n("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=How_To_Create_Custom_Blueprint_Pin&oldid=10747",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://wiki.unrealengine.com/index.php?title=How_To_Create_Custom_Blueprint_Pin&oldid=10747"),n("OutboundLink")],1),t._v('"')]),t._v(" "),n("p",[n("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[t._v("Category")]),t._v(":")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"/Category:Code",title:"Category:Code"}},[t._v("Code")])])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);e.default=r.exports}}]);