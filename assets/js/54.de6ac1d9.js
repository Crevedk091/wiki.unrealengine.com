(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{351:function(t,e,a){"use strict";a.r(e);var o=a(28),n=Object(o.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("Actor Components, Making Native & Deferred Attached to Socket - Epic Wiki")]),t._v(" "),a("h1",{attrs:{id:"actor-components-making-native-deferred-attached-to-socket"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#actor-components-making-native-deferred-attached-to-socket"}},[t._v("#")]),t._v(" Actor Components, Making Native & Deferred Attached to Socket")]),t._v(" "),a("h2",{attrs:{id:"contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[t._v("#")]),t._v(" Contents")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#Overview"}},[t._v("1 Overview")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#Deferred_Attachment"}},[t._v("2 Deferred Attachment")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#.h"}},[t._v("3 .h")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#.Cpp_Constructor"}},[t._v("4 .Cpp Constructor")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#What_is_Mesh.3F"}},[t._v("5 What is Mesh?")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#Conclusion"}},[t._v("6 Conclusion")])])]),t._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),a("p",[a("strong",[t._v("Author:")]),t._v(" "),a("a",{attrs:{href:"/User:Rama",title:"User:Rama"}},[t._v("Rama")]),t._v(" ("),a("a",{attrs:{href:"/User_talk:Rama",title:"User talk:Rama"}},[t._v("talk")]),t._v(")")]),t._v(" "),a("p",[t._v("Dear Community,")]),t._v(" "),a("p",[t._v("Here is my complete code sample for creating and attaching native C++ actor components!")]),t._v(" "),a("p",[a("a",{attrs:{href:"/File:Nativecomp.jpg"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/9/91/Nativecomp.jpg",alt:"Nativecomp.jpg"}})])]),t._v(" "),a("h2",{attrs:{id:"deferred-attachment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deferred-attachment"}},[t._v("#")]),t._v(" Deferred Attachment")]),t._v(" "),a("p",[t._v("This code follows the Deferred Attachment model, whereby you pick a name and a socket, but the actual attachment occurs after the Character Blueprint has also initialized.")]),t._v(" "),a("p",[t._v("(blueprints are not yet setup during the C++ constructor, and their values cannot be relied on)")]),t._v(" "),a("h2",{attrs:{id:"h"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h"}},[t._v("#")]),t._v(" .h")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("//JoyControl\n")])])]),a("p",[t._v("TSubobjectPtr<UStaticMeshComponent> JoyfulControl;\nUStaticMesh * AssetSM_JoyControl;\n \nFORCEINLINE void SetupSMComponentsWithCollision(UStaticMeshComponent* Comp)\n{\nif(!Comp) return;\n//~~~~~~~~\n \nComp->bOwnerNoSee = false;\nComp->bCastDynamicShadow = true;\nComp->CastShadow = true;\nComp->BodyInstance.SetObjectType(ECC_WorldDynamic);\nComp->BodyInstance.SetCollisionEnabled(ECollisionEnabled::QueryAndPhysics);\nComp->BodyInstance.SetResponseToAllChannels(ECR_Ignore);\nComp->BodyInstance.SetResponseToChannel(ECC_WorldStatic, ECR_Block);\nComp->BodyInstance.SetResponseToChannel(ECC_WorldDynamic, ECR_Block);\nComp->BodyInstance.SetResponseToChannel(ECC_Pawn, ECR_Block);\nComp->SetHiddenInGame(false);\n}")]),t._v(" "),a("h2",{attrs:{id:"cpp-constructor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpp-constructor"}},[t._v("#")]),t._v(" .Cpp Constructor")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("//Asset, Reference Obtained Via Right Click in Editor\n")])])]),a("p",[t._v('static ConstructorHelpers::FObjectFinder<UStaticMesh> StaticMeshOb_AW2(TEXT("StaticMesh\'/Game/VictoryGoals/Mechs/JoyControl/JoyControl_WindTurtle.JoyControl_WindTurtle\'"));\n \nAssetSM_JoyControl = StaticMeshOb_AW2.Object;\n \n//Create\nJoyfulControl = ObjectInitializer.CreateDefaultSubobject < UStaticMeshComponent > (this, TEXT("JoyfulControlYay"));\n \n//Set Mesh\nJoyfulControl->SetStaticMesh(AssetSM_JoyControl);\n \n//Setup (see .h)\nSetupSMComponentsWithCollision(JoyfulControl);\n \n//Deferred Attachment (Ty Nick W.! Actual attach gets done after blueprint stuff)\nJoyfulControl->AttachParent = Mesh;\nJoyfulControl->AttachSocketName = "JoyControl";')]),t._v(" "),a("h2",{attrs:{id:"what-is-mesh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-is-mesh"}},[t._v("#")]),t._v(" What is Mesh?")]),t._v(" "),a("p",[t._v("Mesh is a great choice for a component to attach to if you are deriving from an ACharacter class.")]),t._v(" "),a("p",[t._v("If not using ACharacter, and if you have a RootComponent for your actor class already,")]),t._v(" "),a("p",[t._v("you can simply replace Mesh with RootComponent")]),t._v(" "),a("p",[t._v("JoyfulControl->AttachParent = RootComponent;")]),t._v(" "),a("p",[t._v("If you are making a new actor class that does not have a RootComponent, then make one of your new components into the RootComponent")]),t._v(" "),a("p",[t._v("RootComponent = YourComp;")]),t._v(" "),a("h2",{attrs:{id:"conclusion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[t._v("#")]),t._v(" Conclusion")]),t._v(" "),a("p",[t._v("Enjoy!")]),t._v(" "),a("p",[a("a",{attrs:{href:"/User:Rama",title:"User:Rama"}},[t._v("Rama")]),t._v(" ("),a("a",{attrs:{href:"/User_talk:Rama",title:"User talk:Rama"}},[t._v("talk")]),t._v(")")]),t._v(" "),a("p",[t._v('Retrieved from "'),a("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Actor_Components,_Making_Native_%26_Deferred_Attached_to_Socket&oldid=12165",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://wiki.unrealengine.com/index.php?title=Actor_Components,_Making_Native_%26_Deferred_Attached_to_Socket&oldid=12165"),a("OutboundLink")],1),t._v('"')]),t._v(" "),a("p",[a("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[t._v("Category")]),t._v(":")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/Category:Code",title:"Category:Code"}},[t._v("Code")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);e.default=n.exports}}]);