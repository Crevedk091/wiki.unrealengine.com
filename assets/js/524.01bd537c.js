(window.webpackJsonp=window.webpackJsonp||[]).push([[524],{929:function(e,t,a){"use strict";a.r(t);var n=a(28),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Game Instance, Custom Game Instance For Inter-Level Persistent Data Storage - Epic Wiki")]),e._v(" "),a("h1",{attrs:{id:"game-instance-custom-game-instance-for-inter-level-persistent-data-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#game-instance-custom-game-instance-for-inter-level-persistent-data-storage"}},[e._v("#")]),e._v(" Game Instance, Custom Game Instance For Inter-Level Persistent Data Storage")]),e._v(" "),a("h2",{attrs:{id:"contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[e._v("#")]),e._v(" Contents")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#Overview"}},[e._v("1 Overview")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Solus_Example"}},[e._v("2 Solus Example")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Example_For_You"}},[e._v("3 Example For You")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#.H"}},[e._v("4 .H")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#.CPP"}},[e._v("5 .CPP")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#PlayerController.cpp"}},[e._v("6 PlayerController.cpp")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Config_Setting"}},[e._v("7 Config Setting")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Other_Solus_C.2B.2B_Tutorials"}},[e._v("8 Other Solus C++ Tutorials")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Conclusion"}},[e._v("9 Conclusion")])])]),e._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),a("p",[e._v("One of the new UE4 engine features as of 4.4 is the Game Instance class!")]),e._v(" "),a("p",[e._v("This is a globally accessible instanced UObject that can store any data you want to be carried between levels!")]),e._v(" "),a("p",[e._v("Where formally you would have had to write out data to a config file or to binary file, to transfer between levels, now you can use the Game Instance class!")]),e._v(" "),a("p",[e._v("API documentation: "),a("code",[e._v("[UGameInstance](https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/Engine/UGameInstance/index.html)")])]),e._v(" "),a("h2",{attrs:{id:"solus-example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#solus-example"}},[e._v("#")]),e._v(" Solus Example")]),e._v(" "),a("p",[e._v("As a realistic example, in Solus there is a Comms Tower that needs to be in the same state when loaded into different levels, as it is seen from a great distance.")]),e._v(" "),a("p",[e._v("The player can perform actions that evolve the state of the Comms Tower, and those changes have to be reflected in each level that the player enters.")]),e._v(" "),a("p",[e._v("Using the Game Instance class, I can record the state of the Comms Tower any time the player makes modifications to it, and carry that information over when the player transitions to a new level!")]),e._v(" "),a("p",[e._v("Then, whenever the player saves the game, I can still save the Comms Tower normally, but a significant amount of management has been eased out of binary file manipulations thanks to the Game Instance class.")]),e._v(" "),a("h2",{attrs:{id:"example-for-you"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-for-you"}},[e._v("#")]),e._v(" Example For You")]),e._v(" "),a("p",[e._v("Here's an example we can do together!")]),e._v(" "),a("p",[e._v("We'll make a custom Game Instance class, and increment an int32 in the tick function of our player controller class.")]),e._v(" "),a("p",[e._v("Then you can watch as you change to several different maps in your own game (console -> open mapname), and you will see we'll have a record of the total ticks that have occurred, even between the different levels!")]),e._v(" "),a("h2",{attrs:{id:"h"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h"}},[e._v("#")]),e._v(" .H")]),e._v(" "),a("p",[e._v("Please note the essential include!")]),e._v(" "),a("p",[e._v("Also note you could access the Game Instance var in blueprints, by using the BP node to Get Game Instance and casting to your custom Game Instance Class!")]),e._v(" "),a("p",[e._v('/*\nBy Rama\n*/\n \n#pragma once\n \n//Essential Include\n#include "Engine/GameInstance.h"\n \n#include "SolusGameInstance.generated.h"\n \nUCLASS()\nclass USolusGameInstance : public UGameInstance\n{\nGENERATED_BODY()\npublic:\nUSolusGameInstance(const FObjectInitializer& ObjectInitializer);\n \n/** Increment this value in any map, change map, and notice it persists! */\nUPROPERTY(EditAnywhere, BlueprintReadWrite, Category=SolusHUDCrosshair)\nint32 InterLevelPersistentValue;\n \n};')]),e._v(" "),a("h2",{attrs:{id:"cpp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpp"}},[e._v("#")]),e._v(" .CPP")]),e._v(" "),a("p",[e._v('#include "Solus.h"\n#include "SolusGameInstance.h"\n \nUSolusGameInstance::USolusGameInstance(const FObjectInitializer& ObjectInitializer)\n: Super(ObjectInitializer)\n{\n \n}')]),e._v(" "),a("h2",{attrs:{id:"playercontroller-cpp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#playercontroller-cpp"}},[e._v("#")]),e._v(" PlayerController.cpp")]),e._v(" "),a("p",[e._v("As you can see below, every Actor.h class has a function called GetGameInstance() similar to GetWorld() as of 4.4 !")]),e._v(" "),a("p",[e._v("So this means you have global access to persistent values in your custom game instance class, in your entire code base!")]),e._v(" "),a("p",[e._v("void ASolusPC::PlayerTick(float DeltaTime)\n{\nSuper::PlayerTick(DeltaTime);\n \nUSolusGameInstance* SGI = Cast<USolusGameInstance>(GetGameInstance());\nif(SGI)\n{\nSGI->InterLevelPersistentValue++;\nClientMessage(FString::FromInt(SGI->InterLevelPersistentValue));\n}\n \n}")]),e._v(" "),a("h2",{attrs:{id:"config-setting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-setting"}},[e._v("#")]),e._v(" Config Setting")]),e._v(" "),a("p",[e._v("Make sure to set your DefaultEngine.ini to use your custom game instance!")]),e._v(" "),a("p",[e._v("[/Script/EngineSettings.GameMapsSettings]\nGameInstanceClass=/Script/Solus.SolusGameInstance")]),e._v(" "),a("h2",{attrs:{id:"other-solus-c-tutorials"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#other-solus-c-tutorials"}},[e._v("#")]),e._v(" Other Solus C++ Tutorials")]),e._v(" "),a("p",[e._v("I have many Solus C++ tutorials here!")]),e._v(" "),a("p",[a("a",{attrs:{href:"/Solus_C%2B%2B_Tutorials",title:"Solus C++ Tutorials"}},[e._v("Solus_C++_Tutorials")])]),e._v(" "),a("h2",{attrs:{id:"conclusion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[e._v("#")]),e._v(" Conclusion")]),e._v(" "),a("p",[e._v("Have fun today!")]),e._v(" "),a("p",[e._v("Rama")]),e._v(" "),a("p",[a("a",{attrs:{href:"/User:Rama",title:"User:Rama"}},[e._v("Rama")]),e._v(" ("),a("a",{attrs:{href:"/User_talk:Rama",title:"User talk:Rama"}},[e._v("talk")]),e._v(")")]),e._v(" "),a("p",[e._v('Retrieved from "'),a("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Game_Instance,_Custom_Game_Instance_For_Inter-Level_Persistent_Data_Storage&oldid=13797",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=Game_Instance,_Custom_Game_Instance_For_Inter-Level_Persistent_Data_Storage&oldid=13797"),a("OutboundLink")],1),e._v('"')]),e._v(" "),a("p",[a("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[e._v("Category")]),e._v(":")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/Category:Code",title:"Category:Code"}},[e._v("Code")])])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);t.default=s.exports}}]);