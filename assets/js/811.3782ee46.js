(window.webpackJsonp=window.webpackJsonp||[]).push([[811],{724:function(e,t,n){"use strict";n.r(t);var o=n(28),s=Object(o.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("Slate, Loading Styles & Resources - Epic Wiki")]),e._v(" "),n("h1",{attrs:{id:"slate-loading-styles-resources"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#slate-loading-styles-resources"}},[e._v("#")]),e._v(" Slate, Loading Styles & Resources")]),e._v(" "),n("p",[e._v("(Redirected from "),n("a",{attrs:{href:"/index.php?title=Loading_Slate_Styles_%26_Resources&redirect=no",title:"Loading Slate Styles & Resources"}},[e._v("Loading Slate Styles & Resources")]),e._v(")")]),e._v(" "),n("p",[n("strong",[e._v("Rate this Article:")])]),e._v(" "),n("p",[e._v("1.67")]),e._v(" "),n("p",[n("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),n("img",{attrs:{src:"/extensions/VoteNY/images/star_half.gif",alt:""}}),n("img",{attrs:{src:"/extensions/VoteNY/images/star_off.gif",alt:""}}),n("img",{attrs:{src:"/extensions/VoteNY/images/star_off.gif",alt:""}}),n("img",{attrs:{src:"/extensions/VoteNY/images/star_off.gif",alt:""}}),e._v(" (3 votes)")]),e._v(" "),n("p",[e._v("Approved for Versions:(please verify)")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/a/a5/Icon_template_note1.png",alt:"Note"}})]),e._v(" "),n("p",[n("strong",[e._v("Some or all of the information on this page is inconsistent, irrelevant or confusing.")])]),e._v(" "),n("p",[e._v("Please help clean it up if you are able.")]),e._v(" "),n("p",[n("a",{attrs:{href:"/File:Slate_Styles%26Resources.png"}},[n("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/2/29/Slate_Styles%26Resources.png/500px-Slate_Styles%26Resources.png",alt:""}})])]),e._v(" "),n("p",[n("a",{attrs:{href:"/File:Slate_Styles%26Resources.png",title:"Enlarge"}},[n("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),n("p",[e._v("Spell icons are property of Electronic Arts, I claim no ownership of these images. Long live UO!")]),e._v(" "),n("p",[e._v("Before reading these sources, be sure to take a look at the Hello Slate tutorial, it will bring you up to speed on the necessary reading to process the information below. There are some differences to be sure, we have also added a subclassed Game Module (FDefaultGameModuleImpl) class to the mix, in addition to the AHUD and SCompoundWidget. As of 4.0.2 these classes are working on an otherwise unmodified (except for the in-editor mods in Hello Slate) build, other than that my engine/environment is completely unmodified. The Hello Slate tutorial can be found here..."),n("br"),e._v(" "),n("a",{attrs:{href:"https://wiki.unrealengine.com/Slate,_Hello",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/Slate,_Hello"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("So, what's going on here. I'll just give a quick run-down of execution when you launch a PIE or stand-alone game. The first thing that happens is the Game Module is instanced/loaded, in this case that happens to be an FMyProject type. Our FMyProject object then instances FMyUIResources as an object named MyUIResources. MyUIResources then loads and registers all of our resources with Slate, it stores a handle to these resources internally which we will be using later. The next thing that happens related to this code happens in AMyHUD.")]),e._v(" "),n("p",[e._v("AMyHUD is instanced and loaded by the system on every execution of the PIE, or whenever else the HUD is loaded. It should be set as the designated HUD for our game-type in the editor before running the game, see Hello Slate under the coding tutorials if you have no idea what I'm talking about. The first of our AMyHUD functions to be executed is AMyHUD::BeginPlay(). BeginPlay() creates our widget then gives the Viewport a handle on that widget so that it can be drawn to the screen. It then asks the widget to SetVisibility() to EVisibility::Visible and that's the end of it. Before we move on lets take a step back and talk about SMyUIWidget.")]),e._v(" "),n("p",[e._v("SMyUIWidget only has one (required) function, SMyUIWidget::Construct(). Construct first asks our Game Module, FMyGameModule, to give us a handle on the Slate Resources we Initialized() earlier. Then it uses that handle to get a brush, and last it creates the child widgets, using a pointer to the brush we just got a second ago. Destruction should be handled by UE4 and Slate, the only deviation from SCompoundWidget is the addition of a FSlateGameResources TSharedPtr (TSharedPtr"),n("FSlateGameResources",[e._v(") which should also be destructed when the refcount to it becomes zero.")])],1),e._v(" "),n("p",[e._v("We get TSharedPtrs from the Game Module because we want to be sure that the resources will be for no reason inaccessible to anything that would use them, by having the Game Module hand out TSharedPtrs to the resources, the refcount of these resources will never be zero while something is still using them. When the game shuts down the Game Module's ShutdownModule() is called. ShutdownModule() calls the default ShutdownModule() of it's parent class, then it calls MyUIResources.Shutdown() which Unregisters itself with Slate, dereferences the shared pointer, and frees the memory if the refcount is zero. Take a look at FMyUIResources Shutdown() method to see how this is done.")]),e._v(" "),n("p",[e._v("That's all there is to it.")]),e._v(" "),n("p",[e._v('////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Date: April 2, 2014\n/////Author: Bleakwise\n/////File: MyGameResources.h\n \n#pragma once\n \n#include "MyHUD.h"\n#include "Slate.h"\n#include "SlateGameResources.h"\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Data Structure and Interface for maintaining SlateGameResources on Game to Game basis\nclass FMyUIResources\n{\npublic:\nFMyUIResources() : m_Path("/Game/UI"), MyUIResources(NULL) { } ;\n \n/*Loads resources and registers them with Slate*/\n/*Do this before trying to use resources*/\nvoid Initialize();\n \n/*cleanup*/\n/*Do this when shutting down game module*/\nvoid Shutdown();\n \n/*reloads textures used by slate renderer*/\n/*Does nothing at the moment*/\nvoid ReloadTextures();\n \n/*Give caller a pointer to our FSlateGameResources*/\nTSharedPtr<FSlateGameResources> GetSlateGameResources();\n \nprotected:\n/*Creates resources*/\nTSharedRef<class FSlateGameResources> Create();\n \n/*Defined in Cpp file, change as needed*/\nconst FString m_Path;\n \n/*Poitner to game resources, Initialize() before using*/\nTSharedPtr<FSlateGameResources> MyUIResources;\n};\n \nclass SMyUIWidget : public SCompoundWidget\n{\npublic:\nSLATE_BEGIN_ARGS(SMyUIWidget)\n{}\n \nSLATE_ARGUMENT(TWeakObjectPtr<AMyHUD>, OwnerHUD)\n \nSLATE_END_ARGS()\n \n//needed for every widget, constructs widget and children.\nvoid Construct(const FArguments& InArgs);\n \nprotected:\n//Pointer to our parent HUD\n/////Consdier making OwnerHUD a more base type for polymorphic HUDs\nTWeakObjectPtr<class AMyHUD> OwnerHUD;\n \n/*Pointer to resources in GameModule*/\nTSharedPtr<FSlateGameResources> MyUIResources;\n};')]),e._v(" "),n("p",[e._v('////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Date: April 2, 2014\n/////Author: Bleakwise\n/////File: MyGameResources.cpp\n \n#include "MyProject.h"\n#include "SlateGameResources.h"\n#include "MyGameResources.h"\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/*SMyUIWidget*//*SMyUIWidget*//*SMyUIWidget*//*SMyUIWidget*//*SMyUIWidget*//*SMyUIWidget*/\n////////////////////////////////////////////////////////////////////////////////////////////////////\n \nvoid SMyUIWidget::Construct(const FArguments& InArgs)\n{\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Get handle on game resources from GameModule\nMyUIResources = FModuleManager::GetModuleChecked<FMyProject>(FName("MyProject")).GetSlateGameResources();\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Get handle on spell_heal Slate Brush\n/////name: member_icon\nconst FSlateBrush *m_icon = MyUIResources->GetBrush(FName("/spells/spell_heal"));\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Set owner HUD to whatever HUD called system to create this widget\n/////Consider type if using multiple HUDs/types, see declaration in header\nOwnerHUD = InArgs._OwnerHUD;\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Create the child widgets\n \n//No need to add a new slot, ChildSlot is one,\nChildSlot.VAlign(VAlign_Bottom).HAlign(HAlign_Center)\n[//start adding contents\nSNew(SOverlay)\n/* + operator adds a new slot */\n+ SOverlay::Slot().HAlign(HAlign_Fill).VAlign(VAlign_Fill)\n[/* [ operator begins adding things to our new slot\'s contents */\nSNew(SHorizontalBox).Visibility(EVisibility::Visible)\n//Add slots to HorizontalBox, these will hold images\n+ SHorizontalBox::Slot().HAlign(HAlign_Left).VAlign(VAlign_Bottom)\n[   //\nSNew(SImage).Image(m_icon)\n]\n+ SHorizontalBox::Slot().HAlign(HAlign_Left).VAlign(VAlign_Bottom)\n[\nSNew(SImage).Image(m_icon)\n]\n+ SHorizontalBox::Slot().HAlign(HAlign_Left).VAlign(VAlign_Bottom)\n[\nSNew(SImage).Image(m_icon)\n]\n+ SHorizontalBox::Slot().HAlign(HAlign_Left).VAlign(VAlign_Bottom)\n[\nSNew(SImage).Image(m_icon)\n]\n]//End slotting of SOverlay\n];//End slotting ChildSlot\n}\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/*FMyUIResources*//*FMyUIResources*//*FMyUIResources*//*FMyUIResources*//*FMyUIResources*/\n////////////////////////////////////////////////////////////////////////////////////////////////////\n \nvoid FMyUIResources::Initialize()\n{\nif (!MyUIResources.IsValid())\n{\nMyUIResources = Create();\nFSlateStyleRegistry::RegisterSlateStyle(*MyUIResources);\n}\n}\n \nTSharedPtr<FSlateGameResources> FMyUIResources::GetSlateGameResources()\n{\nreturn MyUIResources;\n}\n \nTSharedRef<class FSlateGameResources> FMyUIResources::Create()\n{\nreturn FSlateGameResources::New(FName("MyUIResources"), m_Path, m_Path);\n}\n \n/*Unregister resources/styles with Slate, cleanup, free memory*/\nvoid FMyUIResources::Shutdown()\n{\n//Unregister *MyUIResources with Slate\nFSlateStyleRegistry::UnRegisterSlateStyle(*MyUIResources);\n \n//Debugging\nensure(MyUIResources.IsUnique());\n \n//Removes reference to resources, decrements refcount, destroys resources if refcount=0\n//Do this to all SharedPtrs on Shutdown() or SomethingSimilar() to avoid memory leak\nMyUIResources.Reset();\n}')]),e._v(" "),n("p",[e._v('////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Date: April 2, 2014\n/////Author: Bleakwise\n/////File: MyHUD.h\n \n#pragma once\n \n#include "GameFramework/HUD.h"\n#include "MyHUD.generated.h"\n \n/**\n*\n*/\nUCLASS()\nclass AMyHUD : public AHUD\n{\npublic:\nGENERATED_UCLASS_BODY()\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Called as soon as game starts, create SCompoundWidget and give Viewport access\nvoid BeginPlay();\n \nprotected:\n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Reference to SCompoundWidget\nTSharedPtr<class SMyUIWidget> MyUIWidget;\n};')]),e._v(" "),n("p",[e._v('////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Date: April 2, 2014\n/////Author: Bleakwise\n/////File: MyHUD.cpp\n \n#include "MyProject.h"\n#include "MyGameResources.h"\n#include "MyHUD.h"\n \n \nAMyHUD::AMyHUD(const class FPostConstructInitializeProperties& PCIP)\n: Super(PCIP)\n{\n \n}\n \nvoid AMyHUD::BeginPlay()\n{\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Create a SMyUIWidget on heap referenced by MyUIWidget pointer member\nSAssignNew(MyUIWidget, SMyUIWidget).OwnerHUD(this);\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Pass our viewport a weak reference to our widget, will not increment refcount\nif (GEngine->IsValidLowLevel())\nGEngine->GameViewport->\nAddViewportWidgetContent(SNew(SWeakWidget).PossiblyNullContent(MyUIWidget.ToSharedRef()));\n \nif (MyUIWidget.IsValid())\n{\n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Set widget\'s properties as visibile (sets child widget\'s properties recurisvely)\nMyUIWidget->SetVisibility(EVisibility::Visible);\n}\n}')]),e._v(" "),n("p",[e._v('////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Date: April 4, 2014\n/////Author: Bleakwise\n/////File: MyProject.h\n \n#pragma once\n \n#include "Engine.h"\n \n#include "MyGameResources.h"\n \nclass FMyProject : public FDefaultGameModuleImpl\n{\npublic:\n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Called when GameModule is loaded, load any resources game may need here\nvoid StartupModule();\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Called when GameModule is unloaded, before shutdown, unload resources/cleanup here\nvoid ShutdownModule();\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Give a handle to MyUIResources to anyone who asks\nTSharedPtr<FSlateGameResources> GetSlateGameResources();\n \nprotected:\n \n////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Data Structure and Interface for maintaining SlateGameResources on Game to Game basis\nFMyUIResources MyUIResources;\n \n};')]),e._v(" "),n("p",[e._v('////////////////////////////////////////////////////////////////////////////////////////////////////\n/////Date: April 2, 2014\n/////Author: Bleakwise\n/////File: MyProject.cpp\n \n#include "MyProject.h"\n \n#include "MyProject.generated.inl"\n \nIMPLEMENT_PRIMARY_GAME_MODULE( FMyProject, MyProject, "MyProject" );\n \nvoid FMyProject::StartupModule()\n{\nFDefaultGameModuleImpl::StartupModule();\n \n/*Loads resources and registers them with Slate*/\n/*Do this before trying to use resources*/\nMyUIResources.Initialize();\n \n/*TODO: Anything else game module might need to do on load*/\n}\n \nvoid FMyProject::ShutdownModule()\n{\nFDefaultGameModuleImpl::ShutdownModule();\n \n/*Unregister resources/styles with Slate, cleanup, free memory*/\nMyUIResources.Shutdown();\n \n/*Cleanup/free any resources here*/\n}\n \n/*First defined here, no need to call parent*/\n/*Give caller a pointer to our FSlateGameResources*/\nTSharedPtr<FSlateGameResources> FMyProject::GetSlateGameResources()\n{\n/*Give caller a pointer to our FSlateGameResources*/\n/*Giving strong pointer, helps gurantee access to resources*/\nreturn MyUIResources.GetSlateGameResources();\n}')]),e._v(" "),n("p",[e._v('Retrieved from "'),n("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Slate,_Loading_Styles_%26_Resources&oldid=8305",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=Slate,_Loading_Styles_%26_Resources&oldid=8305"),n("OutboundLink")],1),e._v('"')]),e._v(" "),n("p",[n("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[e._v("Categories")]),e._v(":")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"/Category:Templates",title:"Category:Templates"}},[e._v("Templates")])]),e._v(" "),n("li",[n("a",{attrs:{href:"/Category:Tutorials",title:"Category:Tutorials"}},[e._v("Tutorials")])]),e._v(" "),n("li",[n("a",{attrs:{href:"/Category:Code",title:"Category:Code"}},[e._v("Code")])]),e._v(" "),n("li",[n("a",{attrs:{href:"/Category:Community_Created_Content",title:"Category:Community Created Content"}},[e._v("Community Created Content")])])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);t.default=s.exports}}]);