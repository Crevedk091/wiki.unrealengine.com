(window.webpackJsonp=window.webpackJsonp||[]).push([[424],{815:function(t,e,a){"use strict";a.r(e);var n=a(28),i=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("Custom Character Actions Using Montages - Epic Wiki")]),t._v(" "),a("h1",{attrs:{id:"custom-character-actions-using-montages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-character-actions-using-montages"}},[t._v("#")]),t._v(" Custom Character Actions Using Montages")]),t._v(" "),a("p",[a("strong",[t._v("Rate this Tutorial:")])]),t._v(" "),a("p",[t._v("0.00")]),t._v(" "),a("p",[a("img",{attrs:{src:"/extensions/VoteNY/images/star_off.gif",alt:""}}),a("img",{attrs:{src:"/extensions/VoteNY/images/star_off.gif",alt:""}}),a("img",{attrs:{src:"/extensions/VoteNY/images/star_off.gif",alt:""}}),a("img",{attrs:{src:"/extensions/VoteNY/images/star_off.gif",alt:""}}),a("img",{attrs:{src:"/extensions/VoteNY/images/star_off.gif",alt:""}})]),t._v(" "),a("p",[t._v("Approved for Versions:4.11")]),t._v(" "),a("h2",{attrs:{id:"contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[t._v("#")]),t._v(" Contents")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#Overview"}},[t._v("1 Overview")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#C.2B.2B_Code_Portion"}},[t._v("2 C++ Code Portion")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#First_Steps"}},[t._v("2.1 First Steps")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#Custom_ACharacter_Subclass_.h"}},[t._v("2.2 Custom ACharacter Subclass .h")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#Getting_the_FName_of_an_Enum_Value"}},[t._v("2.3 Getting the FName of an Enum Value")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#Custom_ACharacter_.cpp"}},[t._v("2.4 Custom ACharacter .cpp")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#Calling_the_Event_from_C.2B.2B"}},[t._v("2.5 Calling the Event from C++")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#Animation_Montage_Portion"}},[t._v("3 Animation Montage Portion")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#Anim_Instance_Portion"}},[t._v("4 Anim Instance Portion")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#Event_Graph"}},[t._v("4.1 Event Graph")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#Binding_the_Event"}},[t._v("4.2 Binding the Event")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#That.27s_it.21"}},[t._v("5 That's it!")])])]),t._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),a("p",[t._v("This tutorial shows a method of using animation montages to run custom actions for your characters. Typical usages for this would be as follows:")]),t._v(" "),a("ul",[a("li",[t._v("Part of a combat system - making your character do a jump-attack where root motion is necessary")]),t._v(" "),a("li",[t._v("Character interacting with something - such as pulling a lever")]),t._v(" "),a("li",[t._v("Custom animation event trigger, for cinematic-like breaks in your game")])]),t._v(" "),a("p",[t._v("This tutorial is aimed at intermediate users who have an understanding of animation montages and animation instances. Currently this tutorial is setup to be used from C++ code, however it is possible to do a similar setup in Blueprint, however that is not currently covered.")]),t._v(" "),a("p",[t._v("Root Motion and Animation Montages are not covered here, but you can find them in the UnrealEngine documentation:")]),t._v(" "),a("p",[t._v("Root motion is covered "),a("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/Engine/Animation/RootMotion/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Animation Montages are covered "),a("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/Engine/Animation/AnimMontage/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"c-code-portion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#c-code-portion"}},[t._v("#")]),t._v(" C++ Code Portion")]),t._v(" "),a("h3",{attrs:{id:"first-steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#first-steps"}},[t._v("#")]),t._v(" First Steps")]),t._v(" "),a("p",[t._v("Outside of your character class, but included or in the same file, you will want to make an enum that contains your custom actions:")]),t._v(" "),a("p",[t._v('UENUM(BlueprintType)\nenum class EActions : uint8\n{\nAC_Climb\t\t\tUMETA(DisplayName = "Climb"),\nAC_WallJump\t\t\tUMETA(DisplayName = "Wall Jump")\n};')]),t._v(" "),a("p",[t._v("Then you will want a delegate that takes an EActions value:")]),t._v(" "),a("p",[t._v("DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam(FActionAnim, EActions, ActionUsed);")]),t._v(" "),a("h3",{attrs:{id:"custom-acharacter-subclass-h"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-acharacter-subclass-h"}},[t._v("#")]),t._v(" Custom ACharacter Subclass .h")]),t._v(" "),a("p",[t._v("You will want to setup your custom ACharacter to contain the BlueprintAssignable UPROPERTY and BlueprintCallable UFUNCTION.")]),t._v(" "),a("p",[t._v('UCLASS()\nclass MYGAME_API APlayer_Character : public ACharacter\n{\nGENERATED_BODY()\n \n \npublic:\nUPROPERTY(BlueprintAssignable)\nFActionAnim UseAction;\n \nUFUNCTION(BlueprintCallable, meta = (DisplayName = "Use Action"), Category = "Character|Animation")\nFName UseAction_Implementation(EActions ActionUsed);\n};')]),t._v(" "),a("h3",{attrs:{id:"getting-the-fname-of-an-enum-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-the-fname-of-an-enum-value"}},[t._v("#")]),t._v(" Getting the FName of an Enum Value")]),t._v(" "),a("p",[t._v("Our AnimInstance will want to know which animation to play, so we need to give it the value as an FName.")]),t._v(" "),a("p",[t._v("This function is taken from Epic's Kismet Libraries. It can go anywhere as long as you #include it.")]),t._v(" "),a("p",[t._v("static FName GetEnumValueAsName(const UEnum* Enum, uint8 EnumValue)\n{\nif (Enum != NULL)\n{\nint32 EnumIndex = Enum->GetIndexByValue(EnumValue);\nreturn FName(*Enum->GetEnumText(EnumIndex).ToString());\n}\n \nreturn FName();\n}")]),t._v(" "),a("h3",{attrs:{id:"custom-acharacter-cpp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-acharacter-cpp"}},[t._v("#")]),t._v(" Custom ACharacter .cpp")]),t._v(" "),a("p",[t._v("Place this in your custom character .cpp:")]),t._v(" "),a("p",[t._v('FName APlayer_Character::UseAction_Implementation(EActions ActionUsed)\n{\nconst UEnum* EnumPtr = FindObject<UEnum>(ANY_PACKAGE, TEXT("EActions"), true);\nreturn GetEnumValueAsName(EnumPtr, (uint8)ActionUsed);\n}')]),t._v(" "),a("h3",{attrs:{id:"calling-the-event-from-c"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#calling-the-event-from-c"}},[t._v("#")]),t._v(" Calling the Event from C++")]),t._v(" "),a("p",[t._v("When you want to use an action, simply call:")]),t._v(" "),a("p",[t._v("UseAction.Broadcast(EActions::AC_Climb);")]),t._v(" "),a("h2",{attrs:{id:"animation-montage-portion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#animation-montage-portion"}},[t._v("#")]),t._v(" Animation Montage Portion")]),t._v(" "),a("p",[t._v("Because we are using the FName of the Enum Value to call a Montage Section, we will want to setup our Animation Montage using Section names identical to the DisplayName set for the EActions Enum.")]),t._v(" "),a("p",[t._v('(Note: The method will return "Climb" rather than "AC_Climb")')]),t._v(" "),a("p",[a("a",{attrs:{href:"/File:AnimMontage.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/e/ec/AnimMontage.png",alt:"AnimMontage.png"}})])]),t._v(" "),a("h2",{attrs:{id:"anim-instance-portion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#anim-instance-portion"}},[t._v("#")]),t._v(" Anim Instance Portion")]),t._v(" "),a("h3",{attrs:{id:"event-graph"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event-graph"}},[t._v("#")]),t._v(" Event Graph")]),t._v(" "),a("p",[t._v('Setup your event graph as follows, however we\'ll cover the "Custom Action Event" in the next section.')]),t._v(" "),a("p",[a("a",{attrs:{href:"/File:EventGraph.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/1/16/EventGraph.png",alt:"EventGraph.png"}})])]),t._v(" "),a("h3",{attrs:{id:"binding-the-event"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#binding-the-event"}},[t._v("#")]),t._v(" Binding the Event")]),t._v(" "),a("p",[t._v('This is where we bind the event and tell it what we want it to do when it\'s broadcast. You can get the correct context for "Bind Event to UseAction" and "Use Action" by dragging off the Character pin.')]),t._v(" "),a("p",[a("a",{attrs:{href:"/File:Action_BindEvent.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/b/b6/Action_BindEvent.png",alt:"Action BindEvent.png"}})])]),t._v(" "),a("h2",{attrs:{id:"that-s-it"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#that-s-it"}},[t._v("#")]),t._v(" That's it!")]),t._v(" "),a("p",[t._v("Remember earlier when we called UseAction.BroadCast(EActions::AC_Climb) ? That's all you should have to do for it to play your custom animation.")]),t._v(" "),a("p",[t._v('Retrieved from "'),a("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Custom_Character_Actions_Using_Montages&oldid=21165",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://wiki.unrealengine.com/index.php?title=Custom_Character_Actions_Using_Montages&oldid=21165"),a("OutboundLink")],1),t._v('"')]),t._v(" "),a("p",[a("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[t._v("Category")]),t._v(":")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/Category:Tutorials",title:"Category:Tutorials"}},[t._v("Tutorials")])])]),t._v(" "),a("p",[t._v("Hidden category:")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/Category:Templates",title:"Category:Templates"}},[t._v("Templates")])])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);e.default=i.exports}}]);