(window.webpackJsonp=window.webpackJsonp||[]).push([[1125],{261:function(a,e,t){"use strict";t.r(e);var s=t(28),l=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("UT3 Weapons Tutorial - Flak Cannon - Epic Wiki")]),a._v(" "),t("h1",{attrs:{id:"ut3-weapons-tutorial-flak-cannon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ut3-weapons-tutorial-flak-cannon"}},[a._v("#")]),a._v(" UT3 Weapons Tutorial - Flak Cannon")]),a._v(" "),t("h2",{attrs:{id:"contents"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[a._v("#")]),a._v(" Contents")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#UT3_Weapons_Tutorial_-_Flak_Cannon"}},[a._v("1 UT3 Weapons Tutorial - Flak Cannon")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Requirements"}},[a._v("1.1 Requirements")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Features"}},[a._v("1.2 Features")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Notes"}},[a._v("1.3 Notes")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Contact"}},[a._v("1.4 Contact")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Flak_Cannon"}},[a._v("1.5 Flak Cannon")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Primary_Fire"}},[a._v("1.5.1 Primary Fire")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Secondary_Fire"}},[a._v("1.5.2 Secondary Fire")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Shard_Projectile"}},[a._v("1.5.3 Shard Projectile")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Main_Shard_Projectile"}},[a._v("1.5.4 Main Shard Projectile")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Shell_Projectile"}},[a._v("1.5.5 Shell Projectile")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Implementation"}},[a._v("1.6 Implementation")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Common_code"}},[a._v("1.6.1 Common code")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Creating_Flak_Cannon_Classes"}},[a._v("1.6.2 Creating Flak Cannon Classes")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Setting_up_weapon_asset_references"}},[a._v("1.6.3 Setting up weapon asset references")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Basic_Parameters"}},[a._v("1.6.4 Basic Parameters")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Playtesting"}},[a._v("1.6.5 Playtesting")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Adding_bounce_effects"}},[a._v("1.6.6 Adding bounce effects")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Bounce_Effect_Rotation"}},[a._v("1.6.6.1 Bounce Effect Rotation")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Making_projectile_become_affected_by_gravity_after_bounce"}},[a._v("1.6.7 Making projectile become affected by gravity after bounce")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Limiting_projectile_bounce_count"}},[a._v("1.6.8 Limiting projectile bounce count")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Increasing_projectile_lifespan_after_bounce"}},[a._v("1.6.9 Increasing projectile lifespan after bounce")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Reducing_projectile.27s_damage_over_time"}},[a._v("1.6.10 Reducing projectile's damage over time")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Making_projectile_apply_damage_only_when_moving_fast_enough"}},[a._v("1.6.11 Making projectile apply damage only when moving fast enough")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Flak_Cannon_main_shard"}},[a._v("1.6.12 Flak Cannon main shard")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Adjusting_damage_based_on_how_much_in-the-face_the_shot_was"}},[a._v("1.6.12.1 Adjusting damage based on how much in-the-face the shot was")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Making_Flak_Shell_spawn_additional_shards_on_explosion"}},[a._v("1.6.13 Making Flak Shell spawn additional shards on explosion")])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Spawning_multiple_shards_at_once"}},[a._v("1.6.14 Spawning multiple shards at once")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Projectile_firing_pattern"}},[a._v("1.6.14.1 Projectile firing pattern")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#Projectile_firing_pattern_randomization"}},[a._v("1.6.14.1.1 Projectile firing pattern randomization")])])])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Camera_Shake"}},[a._v("1.6.15 Camera Shake")])])])]),a._v(" "),t("li",[t("a",{attrs:{href:"#Source_Code"}},[a._v("1.7 Source Code")])])])])]),a._v(" "),t("h1",{attrs:{id:"ut3-weapons-tutorial-flak-cannon-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ut3-weapons-tutorial-flak-cannon-2"}},[a._v("#")]),a._v(" UT3 Weapons Tutorial - Flak Cannon")]),a._v(" "),t("p",[a._v("This tutorial will show you how to create Flak Cannon from Unreal Tournament 3 using C++ only.")]),a._v(" "),t("p",[a._v("NOTE:")]),a._v(" "),t("ul",[t("li",[a._v("UT has just upgraded to UE 4.2.1, this tutorial will be verified for compatibility shortly.")])]),a._v(" "),t("h2",{attrs:{id:"requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[a._v("#")]),a._v(" Requirements")]),a._v(" "),t("p",[a._v("Some existing C++ & Unreal Engine knowledge is needed.")]),a._v(" "),t("ul",[t("li",[a._v("Engine version: 4.2")]),a._v(" "),t("li",[a._v("Skill level: intermediate")]),a._v(" "),t("li",[a._v("Unreal Tournament commit: "),t("a",{attrs:{href:"https://github.com/EpicGames/UnrealTournament/commit/9fe9fc679a26a0ea816e9fd3db080255394bf4dc",target:"_blank",rel:"noopener noreferrer"}},[a._v("9fe9fc679a26a0ea816e9fd3db080255394bf4dc"),t("OutboundLink")],1)])]),a._v(" "),t("h2",{attrs:{id:"features"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#features"}},[a._v("#")]),a._v(" Features")]),a._v(" "),t("ul",[t("li",[a._v("Spawnng multiple projectiles at once")]),a._v(" "),t("li",[a._v("Controlled firing pattern for multiple projectiles")]),a._v(" "),t("li",[a._v("Making projectiles spawn other projectiles upon explosion")]),a._v(" "),t("li",[a._v("Adjusting projectile damage based on distance and hit location")]),a._v(" "),t("li",[a._v("Adjusting projectile damage over time")])]),a._v(" "),t("h2",{attrs:{id:"notes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[a._v("#")]),a._v(" Notes")]),a._v(" "),t("ul",[t("li",[a._v("When overriding a function in subclass always add a definition to the header file as well.")]),a._v(" "),t("li",[a._v("Functions with "),t("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/Programming/UnrealArchitecture/Reference/Functions/Specifiers/BlueprintNativeEvent/index.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("BlueprintNativeEvent"),t("OutboundLink")],1),a._v(' attribute generate additional virtual function called "FunctionName_Implementation". Override the _Implementation one instead.')]),a._v(" "),t("li",[a._v("Code snippets are located in grey expandable boxes. Click Expand on the right to see the code.")]),a._v(" "),t("li",[a._v("Yellow lines in code snippets highlight only the code that needs to be changed.")])]),a._v(" "),t("h2",{attrs:{id:"contact"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#contact"}},[a._v("#")]),a._v(" Contact")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://forums.unrealtournament.com/showthread.php?11233-UT3-Flak-Cannon-Tutorial&p=82857#post82857",target:"_blank",rel:"noopener noreferrer"}},[a._v("unrealtournament.com forum thread"),t("OutboundLink")],1)])]),a._v(" "),t("p",[a._v("--"),t("a",{attrs:{href:"/User:Neai",title:"User:Neai"}},[a._v("Neai")]),a._v(" ("),t("a",{attrs:{href:"/index.php?title=User_talk:Neai&action=edit&redlink=1",title:"User talk:Neai (page does not exist)"}},[a._v("talk")]),a._v(") 17:49, 30 June 2014 (UTC)")]),a._v(" "),t("h2",{attrs:{id:"flak-cannon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flak-cannon"}},[a._v("#")]),a._v(" Flak Cannon")]),a._v(" "),t("p",[a._v("We'll start by defining what features we want to implement:")]),a._v(" "),t("h3",{attrs:{id:"primary-fire"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#primary-fire"}},[a._v("#")]),a._v(" Primary Fire")]),a._v(" "),t("ol",[t("li",[a._v("Fire 9 shard projectiles at once")]),a._v(" "),t("li",[a._v("Main shard should be fired at crosshair")]),a._v(" "),t("li",[a._v("Remaining shards should be fired in a random'ish circle around the main shard")]),a._v(" "),t("li",[a._v("The firing pattern should spread shards evenly inside the firing cone")])]),a._v(" "),t("h3",{attrs:{id:"secondary-fire"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#secondary-fire"}},[a._v("#")]),a._v(" Secondary Fire")]),a._v(" "),t("ol",[t("li",[a._v("Fire an explosive shell projectile")])]),a._v(" "),t("h3",{attrs:{id:"shard-projectile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shard-projectile"}},[a._v("#")]),a._v(" Shard Projectile")]),a._v(" "),t("ol",[t("li",[a._v("Bounces up to 2 times")]),a._v(" "),t("li",[a._v("Is not affected by gravity until it bounces")]),a._v(" "),t("li",[a._v("Can deal damage only when moving fast enough")])]),a._v(" "),t("h3",{attrs:{id:"main-shard-projectile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#main-shard-projectile"}},[a._v("#")]),a._v(" Main Shard Projectile")]),a._v(" "),t("p",[a._v("Same as shard projectile except that:")]),a._v(" "),t("ol",[t("li",[a._v("Bounces up to 3 times")]),a._v(" "),t("li",[a._v("Deals additional damage & momentum when firing at point blank at center of enemy")])]),a._v(" "),t("h3",{attrs:{id:"shell-projectile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shell-projectile"}},[a._v("#")]),a._v(" Shell Projectile")]),a._v(" "),t("ol",[t("li",[a._v("High trajectory")]),a._v(" "),t("li",[a._v("Explodes upon contact")]),a._v(" "),t("li",[a._v("Upon explosion spawns 5 shards")])]),a._v(" "),t("h2",{attrs:{id:"implementation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[a._v("#")]),a._v(" Implementation")]),a._v(" "),t("p",[a._v("To implement such projectile weapon we should create subclasses of "),t("strong",[a._v("AUTWeapon")]),a._v(", "),t("strong",[a._v("AUTProjectile")]),a._v(", "),t("strong",[a._v("UUTDamageType")]),a._v(" and "),t("strong",[a._v("AUTWeaponAttachment")]),a._v(".")]),a._v(" "),t("h3",{attrs:{id:"common-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#common-code"}},[a._v("#")]),a._v(" Common code")]),a._v(" "),t("p",[a._v("We will implement some of the features in generic classes which can be later used for other weapons. To keep the tutorial code friendly to engine & game code updates, we will create our own generic subclasses of UTWeapon & UTProjectile instead of modifying them.")]),a._v(" "),t("p",[a._v("Lets start by creating an abstract subclass of "),t("strong",[a._v("AUTWeapon")]),a._v(" called "),t("strong",[a._v("AUTWeapon_Boom")]),a._v(". This will be our common base class for UT3 weapons.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("// Copyright 1998-2014 Epic Games, Inc. All Rights Reserved.")])]),a._v(" "),t("li",[t("p",[a._v("#pragma once")])]),a._v(" "),t("li",[t("p",[a._v('#include "UTWeapon.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTWeapon_Boom.generated.h"')])]),a._v(" "),t("li",[t("p",[a._v("UCLASS(Abstract, NotPlaceable)")])]),a._v(" "),t("li",[t("p",[a._v("class AUTWeapon_Boom : public AUTWeapon")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("GENERATED\\_UCLASS\\_BODY()\n")])])])]),a._v(" "),t("li",[t("p",[a._v("};")])])]),a._v(" "),t("p",[a._v("We will also need an abstract subclass of "),t("strong",[a._v("AUTProjectile")]),a._v(" called "),t("strong",[a._v("AUTProjectile_Boom")]),a._v(". This will be our common base class for UT3 projectiles.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("// Copyright 1998-2014 Epic Games, Inc. All Rights Reserved.")])]),a._v(" "),t("li",[t("p",[a._v("#pragma once")])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProjectile.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProjectile_Boom.generated.h"')])]),a._v(" "),t("li",[t("p",[a._v("UCLASS(Abstract, NotPlaceable)")])]),a._v(" "),t("li",[t("p",[a._v("class AUTProjectile_Boom : public AUTProjectile")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("GENERATED\\_UCLASS\\_BODY()\n")])])])]),a._v(" "),t("li",[t("p",[a._v("};")])])]),a._v(" "),t("p",[a._v("Since we are going to use property values from UT3, we will need to adjust them to UT4 player scale. In UT3 player is 88 units high, in UT4 player is 192 units high. Therefore we need to multiply all projectile velocities, damage radiuses, momentums, etc, to get the same results in UT4. Add the following definition to "),t("strong",[a._v("UnrealTournament.h")]),a._v(" so it's accessible from everywhere:")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("// Ratio for scaling UT3 distance-related values")])]),a._v(" "),t("li",[t("p",[a._v("// See AUTCharacter CapsuleComponent HalfHeight")])]),a._v(" "),t("li",[t("p",[a._v("#define UT3_TO_UT4_SCALE (96.f / 44.f)")])])]),a._v(" "),t("h3",{attrs:{id:"creating-flak-cannon-classes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-flak-cannon-classes"}},[a._v("#")]),a._v(" Creating Flak Cannon Classes")]),a._v(" "),t("p",[a._v("Next, lets create classes for all the elements of Flak Cannon:")]),a._v(" "),t("ol",[t("li",[a._v("Weapon\n"),t("ol",[t("li",[a._v("Create subclass of "),t("strong",[a._v("AUTWeapon_Boom")]),a._v(" called "),t("strong",[a._v("AUTWeap_FlakCannon")])])])]),a._v(" "),t("li",[a._v("3rd person weapon attachment\n"),t("ol",[t("li",[a._v("Create subclass of "),t("strong",[a._v("AUTWeaponAttachment")]),a._v(" called "),t("strong",[a._v("AUTAttachment_FlakCannon")])])])]),a._v(" "),t("li",[a._v("Projectiles\n"),t("ol",[t("li",[a._v("Create subclass of "),t("strong",[a._v("AUTProjectile_Boom")]),a._v(" called "),t("strong",[a._v("AUTProj_FlakShell")])]),a._v(" "),t("li",[a._v("Create subclass of "),t("strong",[a._v("AUTProjectile_Boom")]),a._v(" called "),t("strong",[a._v("AUTProj_FlakShard")])]),a._v(" "),t("li",[a._v("Create subclass of "),t("strong",[a._v("AUTProj_FlakShard")]),a._v(" called "),t("strong",[a._v("AUTProj_FlakShardMain")])])])]),a._v(" "),t("li",[a._v("Damage Types\n"),t("ol",[t("li",[a._v("Create subclass of "),t("strong",[a._v("UUTDamageType")]),a._v(" called "),t("strong",[a._v("UTDmgType_FlakShell")])]),a._v(" "),t("li",[a._v("Create subclass of "),t("strong",[a._v("UUTDamageType")]),a._v(" called "),t("strong",[a._v("UTDmgType_FlakShard")])])])])]),a._v(" "),t("h3",{attrs:{id:"setting-up-weapon-asset-references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-weapon-asset-references"}},[a._v("#")]),a._v(" Setting up weapon asset references")]),a._v(" "),t("p",[a._v("It's a good idea to have a functional weapon at the start, even if the custom logic isn't there yet. We will link all the parts together and assign visual properties. Assigning asset references to properties is very easy in blueprints, but we can do it in C++ as well.")]),a._v(" "),t("p",[t("strong",[a._v("AUTWeap_FlakCannon.cpp")]),a._v(" - Setup asset references")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("// Copyright 1998-2014 Epic Games, Inc. All Rights Reserved.")])]),a._v(" "),t("li",[t("p",[a._v('#include "UnrealTournament.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTWeap_FlakCannon.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProj_FlakShard.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProj_FlakShell.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProj_FlakShardMain.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTAttachment_FlakCannon.h"')])]),a._v(" "),t("li",[t("p",[a._v("AUTWeap_FlakCannon::AUTWeap_FlakCannon(const FPostConstructInitializeProperties& PCIP)")])]),a._v(" "),t("li",[t("p",[a._v(": Super(PCIP)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Asset references\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("struct FConstructorStatics\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<USkeletalMesh\\> SkeletalMesh;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UAnimBlueprintGeneratedClass\\> AnimBlueprintGeneratedClass;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UAnimMontage\\> FireAnimation0;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UAnimMontage\\> FireAnimation1;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UAnimMontage\\> BringUpAnim;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UAnimMontage\\> PutDownAnim;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<USoundCue\\> FireSound0;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<USoundCue\\> FireSound1;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<USoundCue\\> PickupSound;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UParticleSystem\\> MuzzleFlash;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tFConstructorStatics()\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t: SkeletalMesh(TEXT(\"SkeletalMesh'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Meshes/SK\\_WP\\_FlakCannon\\_1P.SK\\_WP\\_FlakCannon\\_1P'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, AnimBlueprintGeneratedClass(TEXT(\"AnimBlueprintGeneratedClass'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Anim/Flak\\_AnimBP.Flak\\_AnimBP\\_C'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, FireAnimation0(TEXT(\"AnimMontage'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Anim/Flak\\_Fire\\_Montage.Flak\\_Fire\\_Montage'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, FireAnimation1(TEXT(\"AnimMontage'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Anim/Flak\\_Fire\\_Montage.Flak\\_Fire\\_Montage'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, BringUpAnim(TEXT(\"AnimMontage'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Anim/Flak\\_Equip.Flak\\_Equip'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, PutDownAnim(TEXT(\"AnimMontage'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Anim/Flak\\_PutDown.Flak\\_PutDown'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, FireSound0(TEXT(\"SoundCue'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Audio/CUE/A\\_FlakCannon\\_FireCue.A\\_FlakCannon\\_FireCue'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, FireSound1(TEXT(\"SoundCue'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Audio/CUE/A\\_FlakCannon\\_FireAltCue.A\\_FlakCannon\\_FireAltCue'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, PickupSound(TEXT(\"SoundCue'/Game/RestrictedAssets/Proto/UT3\\_Pickups/Audio/Weapons/Cue/A\\_Pickup\\_Weapons\\_Flak\\_Cue.A\\_Pickup\\_Weapons\\_Flak\\_Cue'\"))MuzzleFlash(TEXT(\"ParticleSystem'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Effects/P\\_WP\\_FlakCannon\\_Muzzle\\_Flash.P\\_WP\\_FlakCannon\\_Muzzle\\_Flash'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("};\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("static FConstructorStatics ConstructorStatics;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Mesh\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Mesh\\-\\>SkeletalMesh \\= ConstructorStatics.SkeletalMesh.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Mesh\\-\\>AnimBlueprintGeneratedClass \\= ConstructorStatics.AnimBlueprintGeneratedClass.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Mesh\\-\\>RelativeLocation \\= FVector(\\-2.349056, \\-3.957190, \\-5.411549);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Mesh\\-\\>RelativeScale3D \\= FVector(0.750000, 0.750000, 0.750000);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("FireAnimation.SetNumZeroed(2);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("FireAnimation\\[0\\] \\= ConstructorStatics.FireAnimation0.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("FireAnimation\\[1\\] \\= ConstructorStatics.FireAnimation1.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("BringUpAnim \\= ConstructorStatics.BringUpAnim.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("PutDownAnim \\= ConstructorStatics.PutDownAnim.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Muzzle Flash\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('TSubobjectPtr<UParticleSystemComponent\\> MuzzleComponent \\= PCIP.CreateDefaultSubobject<UParticleSystemComponent\\>(this, TEXT("FlakCannon-MuzzleFlash"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("MuzzleComponent\\-\\>Template \\= ConstructorStatics.MuzzleFlash.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('MuzzleComponent\\-\\>AttachTo(Mesh, FName(TEXT("MuzzleFlashSocket")));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("MuzzleFlash.SetNumZeroed(2);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("MuzzleFlash\\[0\\] \\= MuzzleComponent;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("MuzzleFlash\\[1\\] \\= MuzzleComponent;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// 3rd person\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("AttachmentType \\= AUTAttachment\\_FlakCannon::StaticClass();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Sounds\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("FireSound.SetNumZeroed(2);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("FireSound\\[0\\] \\= ConstructorStatics.FireSound0.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("FireSound\\[1\\] \\= ConstructorStatics.FireSound1.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("PickupSound \\= ConstructorStatics.PickupSound.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// UI\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Group \\= 7;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("IconCoordinates \\= FTextureUVs(131.000000, 429.000000, 132.000000, 52.000000);\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[a._v("Notice that assets are loaded statically only once. Asset paths can be copy-pasted straight from editor.")]),a._v(" "),t("p",[t("strong",[a._v("AUTAttachment_FlakCannon.cpp")]),a._v(" - Setup asset references")]),a._v(" "),t("ol",[t("li",[t("p",[a._v('#include "UnrealTournament.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTAttachment_FlakCannon.h"')])]),a._v(" "),t("li",[t("p",[a._v("AUTAttachment_FlakCannon::AUTAttachment_FlakCannon(const class FPostConstructInitializeProperties& PCIP)")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" : Super(PCIP)\n")])])])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Structure to hold one-time initialization\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" struct FConstructorStatics\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<USkeletalMesh\\> SkeletalMesh;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tFConstructorStatics()\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t: SkeletalMesh(TEXT(\"SkeletalMesh'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Meshes/SK\\_WP\\_FlakCannon\\_3P\\_Mid.SK\\_WP\\_FlakCannon\\_3P\\_Mid'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("};\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("static FConstructorStatics ConstructorStatics;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Mesh\\-\\>SkeletalMesh \\= ConstructorStatics.SkeletalMesh.Object;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShell.cpp")]),a._v(" - Setup asset references")]),a._v(" "),t("ol",[t("li",[t("p",[a._v('#include "UnrealTournament.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProjectileMovementComponent.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProj_FlakShell.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProj_FlakShard.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTDmgType_FlakShell.h"')])]),a._v(" "),t("li",[t("p",[a._v("AUTProj_FlakShell::AUTProj_FlakShell(const class FPostConstructInitializeProperties& PCIP)")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" : Super(PCIP)\n")])])])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Structure to hold one-time initialization\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("struct FConstructorStatics\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UParticleSystem\\> ExplosionEffect;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<USoundCue\\> ExplosionSound;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<USoundCue\\> AmbientSound;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UParticleSystem\\> TrailEffect;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tFConstructorStatics()\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t: ExplosionEffect(TEXT(\"ParticleSystem'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Effects/P\\_WP\\_Flak\\_Alt\\_Explosion.P\\_WP\\_Flak\\_Alt\\_Explosion'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, ExplosionSound(TEXT(\"SoundCue'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Audio/CUE/A\\_FlakCannon\\_FireAltImpactExplodeCue.A\\_FlakCannon\\_FireAltImpactExplodeCue'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, AmbientSound(TEXT(\"SoundCue'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Audio/CUE/A\\_FlakCannon\\_FireAltInAirCue.A\\_FlakCannon\\_FireAltInAirCue'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, TrailEffect(TEXT(\"ParticleSystem'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Effects/P\\_WP\\_Flak\\_Alt\\_Smoke\\_Trail.P\\_WP\\_Flak\\_Alt\\_Smoke\\_Trail'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("};\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("static FConstructorStatics ConstructorStatics;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Visuals\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('TSubobjectPtr<UAudioComponent\\> AmbientSound \\= PCIP.CreateDefaultSubobject<UAudioComponent\\>(this, TEXT("FlakShell-Ambient"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("AmbientSound\\-\\>Sound \\= ConstructorStatics.AmbientSound.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("AmbientSound\\-\\>VolumeMultiplier \\= 0.5;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("AmbientSound\\-\\>AttachTo(RootComponent);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('TSubobjectPtr<UParticleSystemComponent\\> TrailComponent \\= PCIP.CreateDefaultSubobject<UParticleSystemComponent\\>(this, TEXT("FlakShell-Trail"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("TrailComponent\\-\\>Template \\= ConstructorStatics.TrailEffect.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("TrailComponent\\-\\>SetRelativeLocation(FVector(\\-3, 0, 0));\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("TrailComponent\\-\\>SetRelativeScale3D(FVector(1.5, 1.5, 1.5));\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("TrailComponent\\-\\>AttachTo(RootComponent);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('TSubobjectPtr<UPointLightComponent\\> LightComponent \\= PCIP.CreateDefaultSubobject<UPointLightComponent\\>(this, TEXT("FlakShell-Light"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>Intensity \\= 150;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>AttenuationRadius \\= 250;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>LightColor \\= FColor(47, 209, 255);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>SetCastShadows(false);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>AttachTo(RootComponent);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("ExplosionEffect \\= ConstructorStatics.ExplosionEffect.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("ExplosionSound \\= ConstructorStatics.ExplosionSound.Object;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[a._v("The mesh is actually set up as part of particle emitter, hence there's no static mesh component.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Setup asset references")]),a._v(" "),t("ol",[t("li",[t("p",[a._v('#include "UnrealTournament.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProjectileMovementComponent.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTProj_FlakShard.h"')])]),a._v(" "),t("li",[t("p",[a._v('#include "UTDmgType_FlakShard.h"')])]),a._v(" "),t("li",[t("p",[a._v("AUTProj_FlakShard::AUTProj_FlakShard(const class FPostConstructInitializeProperties& PCIP)")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" : Super(PCIP)\n")])])])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Structure to hold one-time initialization\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("struct FConstructorStatics\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UParticleSystem\\> BounceEffect;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<USoundCue\\> BounceSound;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UStaticMesh\\> StaticMesh;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UMaterial\\> StaticMeshMaterial0;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tConstructorHelpers::FObjectFinder<UParticleSystem\\> TrailEffect;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tFConstructorStatics()\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t: BounceEffect(TEXT(\"ParticleSystem'/Game/RestrictedAssets/Weapons/Flak/Assets/Flak\\_Hit\\_Spark.Flak\\_Hit\\_Spark'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, BounceSound(TEXT(\"SoundCue'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Audio/CUE/A\\_FlakCannon\\_FireImpactDirtCue.A\\_FlakCannon\\_FireImpactDirtCue'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, StaticMesh(TEXT(\"StaticMesh'/Game/RestrictedAssets/Proto/UT3\\_Weapons/WP\\_FlakCannon/Meshes/S\\_Flak\\_Chunk.S\\_Flak\\_Chunk'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, StaticMeshMaterial0(TEXT(\"Material'/Game/RestrictedAssets/Weapons/Flak/Assets/M\\_Shard.M\\_Shard'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t, TrailEffect(TEXT(\"ParticleSystem'/Game/RestrictedAssets/Weapons/Flak/Assets/Trail.Trail'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("};\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("static FConstructorStatics ConstructorStatics;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Visuals\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('TSubobjectPtr<UStaticMeshComponent\\> StaticMeshComponent \\= PCIP.CreateDefaultSubobject<UStaticMeshComponent\\>(this, TEXT("FlakShard-StaticMesh"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("StaticMeshComponent\\-\\>StaticMesh \\= ConstructorStatics.StaticMesh.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("StaticMeshComponent\\-\\>bGenerateOverlapEvents \\= false;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("StaticMeshComponent\\-\\>SetCollisionProfileName(UCollisionProfile::NoCollision\\_ProfileName);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("StaticMeshComponent\\-\\>SetMaterial(0, ConstructorStatics.StaticMeshMaterial0.Object);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("StaticMeshComponent\\-\\>SetRelativeScale3D(FVector(0.25, 0.25, 0.25));\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("StaticMeshComponent\\-\\>AttachTo(RootComponent);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('TSubobjectPtr<UParticleSystemComponent\\> TrailComponent \\= PCIP.CreateDefaultSubobject<UParticleSystemComponent\\>(this, TEXT("FlakShard-Trail"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("TrailComponent\\-\\>Template \\= ConstructorStatics.TrailEffect.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("TrailComponent\\-\\>AttachTo(RootComponent);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('TSubobjectPtr<UPointLightComponent\\> LightComponent \\= PCIP.CreateDefaultSubobject<UPointLightComponent\\>(this, TEXT("FlakShard-Light"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>Intensity \\= 100;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>AttenuationRadius \\= 100;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>LightColor \\= FColor(255, 133, 35);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>SetCastShadows(false);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("LightComponent\\-\\>AttachTo(RootComponent);\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("h3",{attrs:{id:"basic-parameters"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#basic-parameters"}},[a._v("#")]),a._v(" Basic Parameters")]),a._v(" "),t("p",[a._v("We're going to use parameter values from UT3. Set them in constructors:")]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShell.cpp")]),a._v(" - We will use high TossZ value to give the projectile high trajectory. This way player can aim at distant opponents without having to aim at the sky.")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Movement\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>InitialSpeed \\= 1200.f \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>MaxSpeed \\= 1200.f \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>ProjectileGravityScale \\= 1.0f;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" CollisionComp\\-\\>InitSphereRadius(10);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" TossZ \\= 305 \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Damage\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("MyDamageType \\= UUTDmgType\\_FlakShell::StaticClass();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("DamageParams.BaseDamage \\= 100;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("DamageParams.OuterRadius \\= 200 \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Momentum \\= 75000 \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("InitialLifeSpan \\= 6;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Lets make it rotate")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Movement\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' TSubobjectPtr<URotatingMovementComponent\\> RotatingMovement \\= PCIP.CreateDefaultSubobject<URotatingMovementComponent\\>(this, TEXT("FlakShard-RotatingMovement"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" RotatingMovement\\-\\>RotationRate \\= FRotator(0, 0, 270);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>InitialSpeed \\= 3500.f \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>MaxSpeed \\= 3500.f \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>ProjectileGravityScale \\= 0.f;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>bRotationFollowsVelocity \\= false;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("ProjectileMovement\\-\\>bShouldBounce \\= true;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Damage\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("MyDamageType \\= UUTDmgType\\_FlakShard::StaticClass();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("DamageParams.BaseDamage \\= 18.f;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Momentum \\= 14000 \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("InitialLifeSpan \\= 2.f;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeap_FlakCannon.cpp")]),a._v(" - Setting up fire modes")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Firing\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjClass.SetNumZeroed(2);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjClass\\[0\\] \\= AUTProj\\_FlakShardMain::StaticClass();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjClass\\[1\\] \\= AUTProj\\_FlakShell::StaticClass();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" FireInterval.SetNumZeroed(2);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" FireInterval\\[0\\] \\= 1.1;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" FireInterval\\[1\\] \\= 1.1;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("AmmoCost.SetNumZeroed(2);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("AmmoCost\\[0\\] \\= 1;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("AmmoCost\\[1\\] \\= 1;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Ammo \\= 10;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("MaxAmmo \\= 30;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("FireOffset \\= FVector(75.f, 18.f, \\-15.f);\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"playtesting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#playtesting"}},[a._v("#")]),a._v(" Playtesting")]),a._v(" "),t("p",[a._v("At this point we can test the weapon ingame, although it doesn't have custom logic yet. To test the weapon add an "),t("strong",[a._v("WeaponBase")]),a._v(" Blueprint to level and in its properties make it use our "),t("strong",[a._v("AUTWeap_FlakCannon")]),a._v(".")]),a._v(" "),t("h3",{attrs:{id:"adding-bounce-effects"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adding-bounce-effects"}},[a._v("#")]),a._v(" Adding bounce effects")]),a._v(" "),t("p",[t("strong",[a._v("AUTProjectile_Boom.h")]),a._v(" - Add properties for Bounce Effect assets")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Bounce effect \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= Projectile)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" UParticleSystem\\* BounceEffect;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Sound played when projectile bounces off wall \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= Projectile)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" USoundBase\\* BounceSound;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProjectile_Boom.cpp")]),a._v(" - Override OnBounce to make it play bounce effects")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTProjectile_Boom::OnBounce(const struct FHitResult& ImpactResult, const FVector& ImpactVelocity)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" Super::OnBounce(ImpactResult, ImpactVelocity);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Spawn bounce effect\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (GetNetMode() !\\= NM\\_DedicatedServer)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tUGameplayStatics::SpawnEmitterAtLocation(GetWorld(), BounceEffect, ImpactResult.Location, ImpactResult.ImpactNormal.Rotation(), true);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" }\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Play bounce sound\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("if (BounceSound !\\= NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tUUTGameplayStatics::UTPlaySound(GetWorld(), BounceSound, this, SRT\\_IfSourceNotReplicated, false);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Add default assets to constructor")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" BounceEffect \\= ConstructorStatics.BounceEffect.Object;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" BounceSound \\= ConstructorStatics.BounceSound.Object;\n")])])])])]),a._v(" "),t("p",[a._v("After those changes, shards will spark on bounce and play sound effect.")]),a._v(" "),t("h4",{attrs:{id:"bounce-effect-rotation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bounce-effect-rotation"}},[a._v("#")]),a._v(" Bounce Effect Rotation")]),a._v(" "),t("p",[a._v("Notice that the sparks asset used will spawn in incorrect direction. This is because we're spawning in HitNormal direction, which has X axis pointing away from surface, and the emitter is spawning projectiles in Z axis direction, which in this case will be parallel to floor. The correct fix is to adjust the emitter asset so it spawns in X direction. We can however add a temporary workaround.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProjectile_Boom.h")]),a._v(" - Lets add a BounceEffectRotation property")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Bounce effect \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= Projectile)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" FRotator BounceEffectRotation;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProjectile_Boom.cpp")]),a._v(" - We will use it to rotate HitNormal used for BounceEffect spawn rotation")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTProjectile_Boom::OnBounce(const struct FHitResult& ImpactResult, const FVector& ImpactVelocity)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" Super::OnBounce(ImpactResult, ImpactVelocity);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Spawn bounce effect\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (GetNetMode() !\\= NM\\_DedicatedServer)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tUGameplayStatics::SpawnEmitterAtLocation(GetWorld(), BounceEffect, ImpactResult.Location, BounceEffectRotation.RotateVector(ImpactResult.ImpactNormal).Rotation(), true);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" }\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Play bounce sound\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("if (BounceSound !\\= NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tUUTGameplayStatics::UTPlaySound(GetWorld(), BounceSound, this, SRT\\_IfSourceNotReplicated, false);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Set default BounceEffectRotation in constructor")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" BounceEffectRotation \\= FRotator(90, 0, 0);\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"making-projectile-become-affected-by-gravity-after-bounce"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#making-projectile-become-affected-by-gravity-after-bounce"}},[a._v("#")]),a._v(" Making projectile become affected by gravity after bounce")]),a._v(" "),t("p",[a._v("We want the shards to fly unaffected by gravity initially. Only after bounce they should fall towards floor.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - To do so, lets override OnBounce")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTProj_FlakShard::OnBounce(const struct FHitResult& ImpactResult, const FVector& ImpactVelocity)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" Super::OnBounce(ImpactResult, ImpactVelocity);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Set gravity on bounce\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>ProjectileGravityScale \\= 1.f;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("h3",{attrs:{id:"limiting-projectile-bounce-count"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#limiting-projectile-bounce-count"}},[a._v("#")]),a._v(" Limiting projectile bounce count")]),a._v(" "),t("p",[a._v("Next we will limit number of bounces to 2, as this is how UT3 Flak Shards work.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.h")]),a._v(" - Add 2 new properties to define max number of bounces and current number of bounces")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Limit number of bounces \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" int32 BounceLimit;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Current number of times this projectile bounced \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" int32 BounceCount;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Set default number of bounces in constructor")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" BounceLimit \\= 2;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Count the number of bounces in OnBounce and disable bouncing once limit is reached")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTProj_FlakShard::OnBounce(const struct FHitResult& ImpactResult, const FVector& ImpactVelocity)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" Super::OnBounce(ImpactResult, ImpactVelocity);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Set gravity on bounce\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>ProjectileGravityScale \\= 1.f;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Limit number of bounces\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (++BounceCount \\== BounceLimit)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tProjectileMovement\\-\\>bShouldBounce \\= false;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("h3",{attrs:{id:"increasing-projectile-lifespan-after-bounce"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#increasing-projectile-lifespan-after-bounce"}},[a._v("#")]),a._v(" Increasing projectile lifespan after bounce")]),a._v(" "),t("p",[a._v("We want to ensure that shards will fly for a bit after bouncing. Each projectile has a InitialLifeSpan property set that will limit how long this projectile can exist. Combined with velocity it affects maximum shooting distance.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.h")]),a._v(" - Add 2 new properties for increasing lifespan after bounce and an extra one after final bounce")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Increment lifespan on bounce by this amount \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" float BounceLifeSpanIncrement;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Increment lifespan when projectile stops by this amount \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" float BounceFinalLifeSpanIncrement;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Set default values for bonus lifespan")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" BounceLifeSpanIncrement \\= 0.5f;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" BounceFinalLifeSpanIncrement \\= 0.25f;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Count the number of bounces in OnBounce and disable bouncing once limit is reached")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTProj_FlakShard::OnBounce(const struct FHitResult& ImpactResult, const FVector& ImpactVelocity)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" Super::OnBounce(ImpactResult, ImpactVelocity);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Set gravity on bounce\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ProjectileMovement\\-\\>ProjectileGravityScale \\= 1.f;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Extend lifespan on bounce\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" SetLifeSpan(GetLifeSpan() + BounceLifeSpanIncrement);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Limit number of bounces\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("if (++BounceCount \\== BounceLimit)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tProjectileMovement\\-\\>bShouldBounce \\= false;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tSetLifeSpan(GetLifeSpan() + BounceFinalLifeSpanIncrement);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("h3",{attrs:{id:"reducing-projectile-s-damage-over-time"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reducing-projectile-s-damage-over-time"}},[a._v("#")]),a._v(" Reducing projectile's damage over time")]),a._v(" "),t("p",[a._v("Flak Shards lose 5 damage per second of flight. To implement that we'll need to add function that calculate actual damage instead of using only properties. While we're at it, we'll add dynamic momentum calculation as well, which will come handy later.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProjectile_Boom.h")]),a._v(" - Add DamageAttenuation property that will deteermine amount of damage lost per second, and 2 new functions.")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Damage reduction per second, down to minimum damage\\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= Damage)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" float DamageAttenuation;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Base damage calculation \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" UFUNCTION(BlueprintCallable, Category \\= Projectile)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" virtual float GetDamage(AActor\\* OtherActor, const FVector& HitLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Momentum calculation \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("UFUNCTION(BlueprintCallable, Category \\= Projectile)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("virtual float GetMomentum(AActor\\* OtherActor, const FVector& HitLocation);\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProjectile_Boom.cpp")]),a._v(" - If DamageAttenuation is set, GetDamage() will return reduced damage.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("float AUTProjectile_Boom::GetDamage(AActor* OtherActor, const FVector& HitLocation)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (DamageAttenuation \\> 0)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \treturn FMath::Max(DamageParams.BaseDamage \\- (GetWorld()\\-\\>TimeSeconds \\- CreationTime) \\* DamageAttenuation, DamageParams.MinimumDamage);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" }\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" return DamageParams.BaseDamage;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProjectile_Boom.cpp")]),a._v(" - GetMomentum() will return standard momentum by default.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("float AUTProjectile_Boom::GetMomentum(AActor* OtherActor, const FVector& HitLocation)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" return Momentum;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProjectile_Boom.cpp")]),a._v(" - To adjust damage & momentum of explosions, override Explode_Implementation().")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTProjectile_Boom::Explode_Implementation(const FVector& HitLocation, const FVector& HitNormal)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (!bExploded)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tif (DamageParams.OuterRadius \\> 0.0f)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t\tTArray<AActor\\*\\> IgnoreActors;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t\tif (ImpactedActor !\\= NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tIgnoreActors.Add(ImpactedActor);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tconst float AdjustedDamage \\= GetDamage(NULL, HitLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tconst float AdjustedMomentum \\= GetMomentum(NULL, HitLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tUUTGameplayStatics::UTHurtRadius(this, AdjustedDamage, DamageParams.MinimumDamage, AdjustedMomentum, HitLocation, DamageParams.InnerRadius, DamageParams.OuterRadius, DamageParams.DamageFalloff, MyDamageType, IgnoreActors, this, InstigatorController);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tif (Role \\== ROLE\\_Authority)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tbTearOff \\= true;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tbExploded \\= true;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tUUTGameplayStatics::UTPlaySound(GetWorld(), ExplosionSound, this, ESoundReplicationType::SRT\\_IfSourceNotReplicated);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tif (GetNetMode() !\\= NM\\_DedicatedServer)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tUGameplayStatics::SpawnEmitterAtLocation(GetWorld(), ExplosionEffect, GetActorLocation(), HitNormal.Rotation(), true);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tShutDown();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[a._v("In current version of UT we had to copy paste entire function from AUT_projectile, as applying radius damage is not split into own function yet.")]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.cpp")]),a._v(" - To adjust damage & momentum of direct damage, override DamageImpactedActor_Implementation")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTProjectile_Boom::DamageImpactedActor_Implementation(AActor* OtherActor, UPrimitiveComponent* OtherComp, const FVector& HitLocation, const FVector& HitNormal)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" const float AdjustedDamage \\= GetDamage(OtherActor, HitLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" const float AdjustedMomentum \\= GetMomentum(OtherActor, HitLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // treat as point damage if projectile has no radius\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (DamageParams.OuterRadius \\> 0.0f)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tFUTRadialDamageEvent Event;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tEvent.Params \\= DamageParams;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.Params.MinimumDamage \\= AdjustedDamage; // force full damage for direct hit\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.DamageTypeClass \\= MyDamageType;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.Origin \\= HitLocation;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.BaseMomentumMag \\= AdjustedMomentum;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tnew(Event.ComponentHits) FHitResult(OtherActor, OtherComp, HitLocation, HitNormal);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.ComponentHits\\[0\\].TraceStart \\= HitLocation \\- GetVelocity();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.ComponentHits\\[0\\].TraceEnd \\= HitLocation + GetVelocity();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tOtherActor\\-\\>TakeDamage(AdjustedDamage, Event, InstigatorController, this);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("else\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tFUTPointDamageEvent Event;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.Damage \\= AdjustedDamage;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.DamageTypeClass \\= MyDamageType;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.HitInfo \\= FHitResult(OtherActor, OtherComp, HitLocation, HitNormal);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.ShotDirection \\= GetVelocity().SafeNormal();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tEvent.Momentum \\= Event.ShotDirection \\* AdjustedMomentum;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tOtherActor\\-\\>TakeDamage(AdjustedDamage, Event, InstigatorController, this);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Finally set default DamageAttentuation in Flak Shard constructor")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" DamageAttenuation \\= 5.f;\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"making-projectile-apply-damage-only-when-moving-fast-enough"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#making-projectile-apply-damage-only-when-moving-fast-enough"}},[a._v("#")]),a._v(" Making projectile apply damage only when moving fast enough")]),a._v(" "),t("p",[a._v("Flak Shards deal damage only when moving over 400 UU/s. This way shards that lost much of the velocity after bounce won't hit you.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.h")]),a._v(" - Add MinDamageSpeed property to determine minimum speed required to apply damage.")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Minimum speed at which damage can be applied \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" float MinDamageSpeed;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - Set default MinDamageSpeed in FlakShard constructor.")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MinDamageSpeed \\= 400.f \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShard.cpp")]),a._v(" - With our custom GetDamage() function in place, override it in FlakShard to adjust its damage.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("float AUTProj_FlakShard::GetDamage(AActor* OtherActor, const FVector& HitLocation)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Apply damage only when moving fast enough\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (GetVelocity().Size() \\> MinDamageSpeed)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \treturn Super::GetDamage(OtherActor, HitLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" }\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" return 0.f;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("h3",{attrs:{id:"flak-cannon-main-shard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flak-cannon-main-shard"}},[a._v("#")]),a._v(" Flak Cannon main shard")]),a._v(" "),t("p",[a._v("Flak Cannon fires a special shard at the center. It always fires at crosshair, can bounce 3 times and deals additional damage at close range.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShardMain.cpp")]),a._v(" - Increase BounceLimit to 3 in FlakShardMain constructor.")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" BounceLimit \\= 3;\n")])])])])]),a._v(" "),t("h4",{attrs:{id:"adjusting-damage-based-on-how-much-in-the-face-the-shot-was"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adjusting-damage-based-on-how-much-in-the-face-the-shot-was"}},[a._v("#")]),a._v(" Adjusting damage based on how much in-the-face the shot was")]),a._v(" "),t("p",[a._v("Main Flak Shard deals bonus damage at very close range. Additionally it deals more damage when aiming at center of enemy.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShardMain.h")]),a._v(" - Add properties for bonus damage and momentum. To check how far the projectile travelled we will use the same method as in UT3 - checking elapsed LifeSpan")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Momentum bonus for point blank shots \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" float CenteredMomentumBonus;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Damage bonus for point blank shots \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" float CenteredDamageBonus;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Timeout for point blank shots \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("float MaxBonusTime;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShardMain.cpp")]),a._v(" - Set default properties in constructor")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" CenteredMomentumBonus \\= 90000 \\* UT3\\_TO\\_UT4\\_SCALE;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" CenteredDamageBonus \\= 100.0;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MaxBonusTime \\= 0.2;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShardMain.cpp")]),a._v(" - Override GetDamage() & GetMomentum() to return adjusted valued")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("/**")])]),a._v(" "),t("li",[t("p",[a._v("* Increase damage to UTPawns based on how centered this shard is on target.  If it is within the time MaxBonusTime time period.")])]),a._v(" "),t("li",[t("p",[a._v("* e.g. point blank shot with the flak cannon you will do mega damage.  Once MaxBonusTime passes then this shard becomes a normal shard.")])]),a._v(" "),t("li",[t("p",[a._v("*/")])]),a._v(" "),t("li",[t("p",[a._v("float AUTProj_FlakShardMain::GetDamage(AActor* OtherActor, const FVector& HitLocation)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" const float CalculatedDamage \\= Super::GetDamage(OtherActor, HitLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // When hitting a pawn within bonus point blank time\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("AUTCharacter\\* OtherCharacter \\= Cast<AUTCharacter\\>(OtherActor);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("const float BonusTime \\= GetLifeSpan() \\- InitialLifeSpan + MaxBonusTime;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("if (CalculatedDamage \\> 0.f && OtherCharacter !\\= NULL && BonusTime \\> 0)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Apply bonus damage\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst float CharacterRadius \\= OtherCharacter\\-\\>GetSimpleCollisionRadius();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst float OffCenterDistance \\= FMath::PointDistToLine(OtherActor\\-\\>GetActorLocation(), GetVelocity().SafeNormal(), HitLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst float OffCenterMultiplier \\= FMath::Max(0.f, 2.f \\* (CharacterRadius \\- OffCenterDistance)) / CharacterRadius;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst float BonusDamage \\= CenteredDamageBonus \\* BonusTime \\* OffCenterMultiplier;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\treturn CalculatedDamage + BonusDamage;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("return CalculatedDamage;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])]),a._v(" "),t("li",[t("p",[a._v("/**")])]),a._v(" "),t("li",[t("p",[a._v("* Increase momentum imparted based on how recently this shard was fired")])]),a._v(" "),t("li",[t("p",[a._v("*/")])]),a._v(" "),t("li",[t("p",[a._v("float AUTProj_FlakShardMain::GetMomentum(AActor* OtherActor, const FVector& HitLocation)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// When hitting something within bonus point blank time\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("const float Momentum \\= Super::GetMomentum(OtherActor, HitLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("const float BonusTime \\= GetLifeSpan() \\- InitialLifeSpan + MaxBonusTime;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("if (BonusTime \\> 0)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Apply bonus momentum\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\treturn Momentum + CenteredMomentumBonus \\* BonusTime;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("return Momentum;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("h3",{attrs:{id:"making-flak-shell-spawn-additional-shards-on-explosion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#making-flak-shell-spawn-additional-shards-on-explosion"}},[a._v("#")]),a._v(" Making Flak Shell spawn additional shards on explosion")]),a._v(" "),t("p",[a._v("Flak Shell should spawn 5 shards on explosion. The shards should fly away from hit surface.")]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShell.h")]),a._v(" - Add properties to FlakShell for number of shards to spawn, angle to spawn and class to use.")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Number of shards to spawn \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" int32 ShardSpawnCount;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Angle for spawning shards, relative to hit normal \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" float ShardSpawnAngle;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Shard class type \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Flak Cannon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("TSubclassOf<AUTProjectile\\> ShardClass;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShell.cpp")]),a._v(" - Set default properties in FlakShell constructor")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ShardClass \\= AUTProj\\_FlakShard::StaticClass();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ShardSpawnCount \\= 5;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" ShardSpawnAngle \\= 85;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTProj_FlakShell.cpp")]),a._v(" - Override Explode_Implementation() to spawn additional projectiles")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTProj_FlakShell::Explode_Implementation(const FVector& HitLocation, const FVector& HitNormal)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // On explosion spawn additional flak shards\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (!bExploded && Role \\== ROLE\\_Authority && ShardClass && ShardSpawnCount \\> 0)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// Setup spawn parameters\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tFActorSpawnParameters Params;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tParams.Instigator \\= Instigator;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tParams.Owner \\= Instigator;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tParams.bNoCollisionFail \\= true;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tfor (int32 i \\= 0; i < ShardSpawnCount; ++i)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t// Randomize spawn direction along hit normal\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tconst FRotator SpawnRotation \\= FMath::VRandCone(HitNormal, FMath::DegreesToRadians(ShardSpawnAngle)).Rotation();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t// Spawn shard\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tGetWorld()\\-\\>SpawnActor<AUTProjectile\\>(ShardClass, HitLocation, SpawnRotation, Params);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("Super::Explode\\_Implementation(HitLocation, HitNormal);\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("h3",{attrs:{id:"spawning-multiple-shards-at-once"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spawning-multiple-shards-at-once"}},[a._v("#")]),a._v(" Spawning multiple shards at once")]),a._v(" "),t("p",[a._v("Last but not least, we're going to add ability to spawn multiple projectiles at once from a weapon.")]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.h")]),a._v(" - Add properties for number of projectiles to fire and class for additional projectiles")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Number of projectiles to fire.\n")])])])]),a._v(" "),t("li",[t("p",[a._v("* When firing multiple projectiles at once, main projectile will be fired at crosshair.")])]),a._v(" "),t("li",[t("p",[a._v("* Remaining projectiles will be fired in a circle pattern */")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" TArray<int32\\> MultiShotCount;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Projectile class to use when firing multiple projectiles at once.\n")])])])]),a._v(" "),t("li",[t("p",[a._v("* This is only for additional projectiles, main projectile will use ProjClass.")])]),a._v(" "),t("li",[t("p",[a._v("* If not specified, ProjClass will be used. */")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("TArray< TSubclassOf<AUTProjectile\\> \\> MultiShotProjClass;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.cpp")]),a._v(" - Override FireProjectile() to spawn multiple projectiles at once. In this snippet projectiles will be spawned using default weapon's spread.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("AUTProjectile* AUTWeapon_Boom::FireProjectile()")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (GetUTOwner() \\== NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' \tUE\\_LOG(UT, Warning, TEXT("%s::FireProjectile(): Weapon is not owned (owner died during firing sequence)"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \treturn NULL;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" }\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" else if (Role \\== ROLE\\_Authority)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// try and fire a projectile\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tcheckSlow(ProjClass.IsValidIndex(CurrentFireMode) && ProjClass\\[CurrentFireMode\\] !\\= NULL);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// increment 3rd person muzzle flash count\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tUTOwner\\-\\>IncrementFlashCount(CurrentFireMode);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Setup spawn parameters\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tFActorSpawnParameters Params;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tParams.Instigator \\= UTOwner;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tParams.Owner \\= UTOwner;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tParams.bNoCollisionFail \\= true;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Get muzzle location and rotation\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst FVector SpawnLocation \\= GetFireStartLoc();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst FRotator SpawnRotation \\= GetAdjustedAim(SpawnLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Fire projectiles\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tAUTProjectile\\* MainProjectile \\= NULL;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tif (MultiShotCount.IsValidIndex(CurrentFireMode) && MultiShotCount\\[CurrentFireMode\\] \\> 1)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tfor (int32 i \\= 0; i < MultiShotCount\\[CurrentFireMode\\]; ++i)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t// Get firing location and rotation for this projectile\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tconst FVector MultiShotLocation \\= GetFireStartLoc();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tconst FRotator MultiShotRotation \\= GetAdjustedAim(SpawnLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t// Get projectile class\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tTSubclassOf<AUTProjectile\\> ProjectileClass \\= ProjClass\\[CurrentFireMode\\];\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tif (i !\\= 0 && MultiShotProjClass.IsValidIndex(CurrentFireMode) && MultiShotProjClass\\[CurrentFireMode\\] !\\= NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t\tProjectileClass \\= MultiShotProjClass\\[CurrentFireMode\\];\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t// Spawn projectile\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tAUTProjectile\\* MultiShot \\= GetWorld()\\-\\>SpawnActor<AUTProjectile\\>(ProjectileClass, MultiShotLocation, MultiShotRotation, Params);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tif (MainProjectile \\== NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t\tMainProjectile \\= MultiShot;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\telse\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t// Spawn projectile\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tMainProjectile \\= GetWorld()\\-\\>SpawnActor<AUTProjectile\\>(ProjClass\\[CurrentFireMode\\], SpawnLocation, SpawnRotation, Params);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\treturn MainProjectile;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("else\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\treturn NULL;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[a._v("This will spawn MultiShotCount projectiles on firing.")]),a._v(" "),t("p",[t("strong",[a._v("AUTWeap_FlakCannon.cpp")]),a._v(" - Add multishot default properties")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotCount.SetNumZeroed(1);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotCount\\[0\\] \\= 9;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotProjClass.SetNumZeroed(1);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotProjClass\\[0\\] \\= AUTProj\\_FlakShard::StaticClass();\n")])])])])]),a._v(" "),t("h4",{attrs:{id:"projectile-firing-pattern"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#projectile-firing-pattern"}},[a._v("#")]),a._v(" Projectile firing pattern")]),a._v(" "),t("p",[a._v("Flak Cannon fires shards in distinct semi-random pattern. Main shard is fired at crosshair. Each additional projectile then is fired at equally spaced fragment of firing cone circle. Slight location & rotation randomization is still applied but the shards are guaranteed to cover entire firing cone. This makes the weapon more predictable which is good for pro gaming. We're going to implement this pattern as default for multi-shot weapons.")]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.h")]),a._v(" - Add property for angle of firing pattern and two functions to return firing location & rotation of individual projectiles.")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Firing cone angle in degrees.\n")])])])]),a._v(" "),t("li",[t("p",[a._v("* Applies to individual projectiles when firing multiple at once. */")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" TArray<FRotator\\> MultiShotAngle;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Returns projectile spawn location when firing multiple projectiles at once \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UFUNCTION(BlueprintCallable, BlueprintNativeEvent, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" FVector GetFireLocationForMultiShot(int32 MultiShotIndex, const FVector& FireLocation, const FRotator& FireRotation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("/\\*\\* Returns projectile spawn rotation when firing multiple projectiles at once \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('UFUNCTION(BlueprintCallable, BlueprintNativeEvent, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("FRotator GetFireRotationForMultiShot(int32 MultiShotIndex, const FVector& FireLocation, const FRotator& FireRotation);\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeap_FlakCannon.cpp")]),a._v(" - Add multishot default properties")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotAngle.SetNumZeroed(1);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotAngle\\[0\\] \\= FRotator(0, 3, 0);\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.cpp")]),a._v(" - Implement GetFireLocationForMultiShot(). We will add randomization later.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("FVector AUTWeapon_Boom::GetFireLocationForMultiShot_Implementation(int32 MultiShotIndex, const FVector& FireLocation, const FRotator& FireRotation)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Main projectile fires straight from muzzle center\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" return FireLocation;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.cpp")]),a._v(" - Implement GetFireRotationForMultiShot(). We will add randomization later.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("FRotator AUTWeapon_Boom::GetFireRotationForMultiShot_Implementation(int32 MultiShotIndex, const FVector& FireLocation, const FRotator& FireRotation)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (MultiShotIndex \\> 0 && MultiShotAngle.IsValidIndex(CurrentFireMode))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// Each additional projectile can have own fragment of firing cone.\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// This way there are no empty spots in firing cone due to randomness.\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// While still randomish, the pattern is predictable, which is good for pro gaming.\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// Get direction at fragment of firing cone\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst float Alpha \\= (float)(MultiShotIndex \\- 1) / (float)(MultiShotCount\\[CurrentFireMode\\] \\- 1);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst FRotator ConeSector \\= FRotator(0, 0, 360.f \\* Alpha);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tFVector FireDirection \\= ConeSector.RotateVector(MultiShotAngle\\[CurrentFireMode\\].Vector());\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Return firing cone rotated by player's firing rotation\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\treturn FireRotation.RotateVector(FireDirection).Rotation();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Main projectile fires straight at crosshair\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("return FireRotation;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.cpp")]),a._v(" - Modify FireProjectile() so it uses our functions")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("AUTProjectile* AUTWeapon_Boom::FireProjectile()")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (GetUTOwner() \\== NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' \tUE\\_LOG(UT, Warning, TEXT("%s::FireProjectile(): Weapon is not owned (owner died during firing sequence)"));\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \treturn NULL;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" }\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" else if (Role \\== ROLE\\_Authority)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// try and fire a projectile\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tcheckSlow(ProjClass.IsValidIndex(CurrentFireMode) && ProjClass\\[CurrentFireMode\\] !\\= NULL);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// increment 3rd person muzzle flash count\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tUTOwner\\-\\>IncrementFlashCount(CurrentFireMode);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Setup spawn parameters\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tFActorSpawnParameters Params;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tParams.Instigator \\= UTOwner;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tParams.Owner \\= UTOwner;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tParams.bNoCollisionFail \\= true;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Get muzzle location and rotation\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst FVector SpawnLocation \\= GetFireStartLoc();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst FRotator SpawnRotation \\= GetAdjustedAim(SpawnLocation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Fire projectiles\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tAUTProjectile\\* MainProjectile \\= NULL;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tif (MultiShotCount.IsValidIndex(CurrentFireMode) && MultiShotCount\\[CurrentFireMode\\] \\> 1)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tfor (int32 i \\= 0; i < MultiShotCount\\[CurrentFireMode\\]; ++i)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t// Get firing location and rotation for this projectile\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tconst FVector MultiShotLocation \\= GetFireLocationForMultiShot(i, SpawnLocation, SpawnRotation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tconst FRotator MultiShotRotation \\= GetFireRotationForMultiShot(i, SpawnLocation, SpawnRotation);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t// Get projectile class\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tTSubclassOf<AUTProjectile\\> ProjectileClass \\= ProjClass\\[CurrentFireMode\\];\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tif (i !\\= 0 && MultiShotProjClass.IsValidIndex(CurrentFireMode) && MultiShotProjClass\\[CurrentFireMode\\] !\\= NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t\tProjectileClass \\= MultiShotProjClass\\[CurrentFireMode\\];\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t// Spawn projectile\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tAUTProjectile\\* MultiShot \\= GetWorld()\\-\\>SpawnActor<AUTProjectile\\>(ProjectileClass, MultiShotLocation, MultiShotRotation, Params);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tif (MainProjectile \\== NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t\tMainProjectile \\= MultiShot;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\telse\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t// Spawn projectile\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tMainProjectile \\= GetWorld()\\-\\>SpawnActor<AUTProjectile\\>(ProjClass\\[CurrentFireMode\\], SpawnLocation, SpawnRotation, Params);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\treturn MainProjectile;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("else\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\treturn NULL;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("h5",{attrs:{id:"projectile-firing-pattern-randomization"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#projectile-firing-pattern-randomization"}},[a._v("#")]),a._v(" Projectile firing pattern randomization")]),a._v(" "),t("p",[a._v("Right now projectiles are fired in perfect circle pattern. We're going to randomize starting location and rotation.")]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.h")]),a._v(" - Add properrties for location & rotation randomization")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Firing location randomness, in unreal units.\n")])])])]),a._v(" "),t("li",[t("p",[a._v("* Applies to individual projectiles when firing multiple at once */")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" TArray<FVector\\> MultiShotLocationSpread;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* Firing direction randomness, in degrees. \n")])])])]),a._v(" "),t("li",[t("p",[a._v("* Applies to individual projectiles when firing multiple at once */")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" TArray<float\\> MultiShotRotationSpread;\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.cpp")]),a._v(" - Modify GetFireLocationForMultiShot() so it returns adjusted location.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("FVector AUTWeapon_Boom::GetFireLocationForMultiShot_Implementation(int32 MultiShotIndex, const FVector& FireLocation, const FRotator& FireRotation)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (MultiShotIndex \\> 0 && MultiShotLocationSpread.IsValidIndex(CurrentFireMode))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// Randomise each projectile's spawn location if needed.\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \treturn FireLocation + FireRotation.RotateVector(FMath::VRand() \\* MultiShotLocationSpread\\[CurrentFireMode\\]);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" }\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Main projectile fires straight from muzzle center\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("return FireLocation;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.cpp")]),a._v(" - Modify GetFireRotationForMultiShot() so it returns adjusted rotation.")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("FRotator AUTWeapon_Boom::GetFireRotationForMultiShot_Implementation(int32 MultiShotIndex, const FVector& FireLocation, const FRotator& FireRotation)")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (MultiShotIndex \\> 0 && MultiShotAngle.IsValidIndex(CurrentFireMode))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// Each additional projectile can have own fragment of firing cone.\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// This way there are no empty spots in firing cone due to randomness.\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// While still randomish, the pattern is predictable, which is good for pro gaming.\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t// Get direction at fragment of firing cone\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst float Alpha \\= (float)(MultiShotIndex \\- 1) / (float)(MultiShotCount\\[CurrentFireMode\\] \\- 1);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tconst FRotator ConeSector \\= FRotator(0, 0, 360.f \\* Alpha);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tFVector FireDirection \\= ConeSector.RotateVector(MultiShotAngle\\[CurrentFireMode\\].Vector());\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Randomise each projectile's spawn rotation if needed \n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tif (MultiShotRotationSpread.IsValidIndex(CurrentFireMode))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\tFireDirection \\= FMath::VRandCone(FireDirection, FMath::DegreesToRadians(MultiShotRotationSpread\\[CurrentFireMode\\]));\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t// Return firing cone rotated by player's firing rotation\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\treturn FireRotation.RotateVector(FireDirection).Rotation();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("// Main projectile fires straight at crosshair\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("return FireRotation;\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeap_FlakCannon.cpp")]),a._v(" - Add firing pattern default properties")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotLocationSpread.SetNumZeroed(1);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotLocationSpread\\[0\\] \\= FVector(0, 3, 3);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotRotationSpread.SetNumZeroed(1);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" MultiShotRotationSpread\\[0\\] \\= 3;\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"camera-shake"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#camera-shake"}},[a._v("#")]),a._v(" Camera Shake")]),a._v(" "),t("p",[a._v("We can add camera shake as well to our base class. This way it can be used by all weapons.")]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.h")]),a._v(" - Add camera shake properties and function")]),a._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* delay between firing and camera shake being played \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" TArray<float\\> CameraShakeDelay;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" /\\*\\* how strong camera shake should be \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(' UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" TArray<float\\> CameraShakeScale;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("/\\*\\* camera shake type \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('UPROPERTY(EditAnywhere, BlueprintReadWrite, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("TArray< TSubclassOf<class UCameraShake\\> \\> CameraShakeType;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("/\\*\\* Plays camera shake immediately \\*/\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v('UFUNCTION(BlueprintCallable, BlueprintNativeEvent, Category \\= "Weapon")\n')])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("void PlayCameraShake();\n")])])])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.cpp")]),a._v(" - Add PlayCameraShake() implementation")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTWeapon_Boom::PlayCameraShake_Implementation()")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (UTOwner !\\= NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tAUTPlayerController\\* PC \\= Cast<AUTPlayerController\\>(UTOwner\\-\\>Controller);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tif (PC !\\= NULL)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t\t// Play camera shake\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t\tif (CameraShakeType.IsValidIndex(CurrentFireMode) && CameraShakeType\\[CurrentFireMode\\] !\\= NULL && CameraShakeScale.IsValidIndex(CurrentFireMode))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t\tPC\\-\\>ClientPlayCameraShake(CameraShakeType\\[CurrentFireMode\\], CameraShakeScale\\[CurrentFireMode\\]);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeapon_Boom.cpp")]),a._v(" - Override PlayFiringEffects() so it calls our PlayCameraShake() function")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("void AUTWeapon_Boom::PlayFiringEffects()")])]),a._v(" "),t("li",[t("p",[a._v("{")])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" Super::PlayFiringEffects();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" // Play camera shake after optional delay\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" if (CameraShakeDelay.IsValidIndex(CurrentFireMode) && CameraShakeDelay\\[CurrentFireMode\\] \\> 0)\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tGetWorldTimerManager().SetTimer(this, &AUTWeapon\\_Boom::PlayCameraShake, CameraShakeDelay\\[CurrentFireMode\\], false);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" }\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("else\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\tPlayCameraShake();\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("}\n")])])])]),a._v(" "),t("li",[t("p",[a._v("}")])])]),a._v(" "),t("p",[t("strong",[a._v("AUTWeap_FlakCannon.cpp")]),a._v(" - Add CameraShake assets & default properties to FlakCannon constructor")]),a._v(" "),t("ol",[t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" struct FConstructorStatics\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" {\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t...\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tConstructorHelpers::FClassFinder<UCameraShake\\> CameraShakeType0;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tConstructorHelpers::FClassFinder<UCameraShake\\> CameraShakeType1;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \tFConstructorStatics()\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t\t...\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t\t, CameraShakeType0(TEXT(\"BlueprintGeneratedClass'/Game/RestrictedAssets/Blueprints/WIP/Nick/CameraAnims/Camerashake2.Camerashake2\\_C'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v(" \t\t, CameraShakeType1(TEXT(\"BlueprintGeneratedClass'/Game/RestrictedAssets/Blueprints/WIP/Nick/CameraAnims/Camerashake2.Camerashake2\\_C'\"))\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t{\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("\t}\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("};\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("...\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("CameraShakeType.SetNumZeroed(2);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("CameraShakeType\\[0\\] \\= ConstructorStatics.CameraShakeType0.Class;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("CameraShakeType\\[1\\] \\= ConstructorStatics.CameraShakeType1.Class;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("CameraShakeDelay.SetNumZeroed(2);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("CameraShakeDelay\\[0\\] \\= 0.05f;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("CameraShakeDelay\\[1\\] \\= 0.05f;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("CameraShakeScale.SetNumZeroed(2);\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("CameraShakeScale\\[0\\] \\= 1.f;\n")])])])]),a._v(" "),t("li",[t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[a._v("CameraShakeScale\\[1\\] \\= 1.f;\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"source-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#source-code"}},[a._v("#")]),a._v(" Source Code")]),a._v(" "),t("p",[a._v("* "),t("a",{attrs:{href:"https://github.com/roman-dzieciol/UnrealTournament/commit/1a148e6381233f654aa4a1b84b88e94496c6b0c8",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/roman-dzieciol/UnrealTournament/commit/1a148e6381233f654aa4a1b84b88e94496c6b0c8"),t("OutboundLink")],1),a._v("\n* "),t("a",{attrs:{href:"https://github.com/EpicGames/UnrealTournament/pull/26",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/EpicGames/UnrealTournament/pull/26"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v('Retrieved from "'),t("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=UT3_Weapons_Tutorial_-_Flak_Cannon&oldid=10610",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://wiki.unrealengine.com/index.php?title=UT3_Weapons_Tutorial_-_Flak_Cannon&oldid=10610"),t("OutboundLink")],1),a._v('"')]),a._v(" "),t("p",[t("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[a._v("Categories")]),a._v(":")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"/Category:Unreal_Tournament",title:"Category:Unreal Tournament"}},[a._v("Unreal Tournament")])]),a._v(" "),t("li",[t("a",{attrs:{href:"/Category:UT_Content_Creation",title:"Category:UT Content Creation"}},[a._v("UT Content Creation")])])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);e.default=l.exports}}]);