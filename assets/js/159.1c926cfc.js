(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{888:function(e,t,a){"use strict";a.r(t);var r=a(28),i=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Blueprint Behavior Tree Tutorial - Epic Wiki")]),e._v(" "),a("h1",{attrs:{id:"blueprint-behavior-tree-tutorial"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#blueprint-behavior-tree-tutorial"}},[e._v("#")]),e._v(" Blueprint Behavior Tree Tutorial")]),e._v(" "),a("p",[a("strong",[e._v("Rate this Page:")])]),e._v(" "),a("p",[e._v("5.00")]),e._v(" "),a("p",[a("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),a("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),a("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),a("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),a("img",{attrs:{src:"/extensions/VoteNY/images/star_on.gif",alt:""}}),e._v(" (5 votes)")]),e._v(" "),a("p",[e._v("Approved for Versions:4.5.0")]),e._v(" "),a("h2",{attrs:{id:"contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[e._v("#")]),e._v(" Contents")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#Overview"}},[e._v("1 Overview")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Scene_Setup"}},[e._v("2 Scene Setup")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Creating_the_AIController"}},[e._v("3 Creating the AIController")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Creating_the_AICharacter"}},[e._v("4 Creating the AICharacter")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Creating_the_BlackBoard_Data_Asset"}},[e._v("5 Creating the BlackBoard Data Asset")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Creating_the_Behavior_Tree"}},[e._v("6 Creating the Behavior Tree")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Creating_a_Task"}},[e._v("7 Creating a Task")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Setting_Up_the_Behavior"}},[e._v("8 Setting Up the Behavior")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Spawning_the_AI"}},[e._v("9 Spawning the AI")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Extras"}},[e._v("10 Extras")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Useful_Links"}},[e._v("11 Useful Links")])])]),e._v(" "),a("h1",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),a("p",[e._v("This tutorial serves as a basic introduction for how to create a working AI character that uses a Behavior Tree to execute Blueprint Tasks.")]),e._v(" "),a("h1",{attrs:{id:"scene-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scene-setup"}},[e._v("#")]),e._v(" Scene Setup")]),e._v(" "),a("p",[e._v("1. Launch Latest version of Unreal Engine")]),e._v(" "),a("p",[e._v("2. Create a new Project. Select “Top Down”")]),e._v(" "),a("p",[e._v("3. Name project something like “MyBehaviorTree” and press “Create Project” Button.")]),e._v(" "),a("p",[e._v("4. Next add a NavMeshBoundsVolume to the scene and scale it to encompass the playspace. This volume is responsible to building navmesh that the AI will use to navigate.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_01.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/9/9a/Tut_Rev_01.png/400px-Tut_Rev_01.png",alt:"Tut Rev 01.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_01.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Note: "),a("strong",[e._v("P")]),e._v(" toggles path visibility")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_02.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/c/cb/Tut_Rev_02.png/400px-Tut_Rev_02.png",alt:"Tut Rev 02.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_02.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("h1",{attrs:{id:"creating-the-aicontroller"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-the-aicontroller"}},[e._v("#")]),e._v(" Creating the AIController")]),e._v(" "),a("p",[e._v("Create a new "),a("em",[e._v("Blueprint")]),e._v(" that uses the "),a("em",[e._v("AIController")]),e._v(" class as its parent and name it "),a("em",[e._v("BasicAIController")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_01.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/d/d7/Tut_01.png",alt:"Tut 01.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_01.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("h1",{attrs:{id:"creating-the-aicharacter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-the-aicharacter"}},[e._v("#")]),e._v(" Creating the AICharacter")]),e._v(" "),a("p",[e._v("Create a new "),a("em",[e._v("Blueprint")]),e._v(" that uses the "),a("em",[e._v("Character")]),e._v(" class as its parent and name it "),a("em",[e._v("BasicAICharacter")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_CreateAICharacter.JPG"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/7/7f/BBT_CreateAICharacter.JPG/400px-BBT_CreateAICharacter.JPG",alt:"BBT CreateAICharacter.JPG"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_CreateAICharacter.JPG",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Open the newly created Character Blueprint and set its default AIController Class to the one your created in the previous step, "),a("em",[e._v("(BasicAIController)")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_SettingAIController.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/3/35/BBT_SettingAIController.jpg/400px-BBT_SettingAIController.jpg",alt:"BBT SettingAIController.jpg"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_SettingAIController.jpg",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Finally add a "),a("em",[e._v("mesh")]),e._v(" component to the Character Blueprint so we can see the character (*Note: Creating the AI Character automatically adds skeletal mesh under components, however, you can still add a static mesh component and ignore the skeletal mesh icon -but you cannot remove the skeletal mesh from the component list.)")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_03.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/7/77/Tut_Rev_03.png/400px-Tut_Rev_03.png",alt:"Tut Rev 03.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_03.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("h1",{attrs:{id:"creating-the-blackboard-data-asset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-the-blackboard-data-asset"}},[e._v("#")]),e._v(" Creating the BlackBoard Data Asset")]),e._v(" "),a("p",[e._v("Create a new "),a("em",[e._v("BlackBoard")]),e._v(" Data Asset. This is done by right clicking inside the content browser then selecting Miscellaneous and then -> "),a("em",[e._v("BlackBoardD")]),e._v(" (Name this asset "),a("em",[e._v("BasicAIBlackboard")]),e._v(" )")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_03.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/0/0b/Tut_03.png/400px-Tut_03.png",alt:"Tut 03.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_03.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("The BlackBoard asset allows you to store information in keys that can then be used by the Behavior Tree. Create a key named "),a("em",[e._v("TargetPoint")]),e._v(" and set its Key Type to "),a("em",[e._v("Vector.")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_04.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/a/a6/Tut_Rev_04.png/400px-Tut_Rev_04.png",alt:"Tut Rev 04.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_04.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("h1",{attrs:{id:"creating-the-behavior-tree"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-the-behavior-tree"}},[e._v("#")]),e._v(" Creating the Behavior Tree")]),e._v(" "),a("ul",[a("li",[e._v("In versions of UE4 before 4.5 you must first enable it in "),a("em",[e._v("Edit")]),e._v(" --\x3e "),a("em",[e._v("Editor Preferences")]),e._v(" --\x3e "),a("em",[e._v("Experimental")])])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_CreateBehaviorTree_02.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/e/ed/BBT_CreateBehaviorTree_02.jpg/400px-BBT_CreateBehaviorTree_02.jpg",alt:"BBT CreateBehaviorTree 02.jpg"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_CreateBehaviorTree_02.jpg",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("In UE4.5, however, you no longer need to perform the previous step and can easily create a new Behavior Tree from the Content Browser as shown:")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_05.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/9/96/Tut_05.png/400px-Tut_05.png",alt:"Tut 05.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_05.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("ul",[a("li",[e._v("Name this asset "),a("em",[e._v("BasicBehaviorTree.")])])]),e._v(" "),a("p",[e._v("At this stage you should have the following 4 assets created.")]),e._v(" "),a("p",[a("em",[e._v("BasicAiBlackBoard,")]),e._v(" "),a("em",[e._v("BasicAICharacter,")]),e._v(" "),a("em",[e._v("BasicAIController,")]),e._v(" and "),a("em",[e._v("BasicBehaviorTree")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_06.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/8/88/Tut_Rev_06.png/200px-Tut_Rev_06.png",alt:"Tut Rev 06.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_06.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("h1",{attrs:{id:"creating-a-task"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-task"}},[e._v("#")]),e._v(" Creating a Task")]),e._v(" "),a("p",[e._v("We are going to create a simple Task for the Behavior Tree to execute. Create a new Blueprint using "),a("em",[e._v("BTTask_BlueprintBase")]),e._v(" as its parent. Name this "),a("em",[e._v("BasicTask")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_CreateTask_01.JPG"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/4/4f/BBT_CreateTask_01.JPG/400px-BBT_CreateTask_01.JPG",alt:"BBT CreateTask 01.JPG"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_CreateTask_01.JPG",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Next open up the created Task blueprint and go to its "),a("em",[e._v("EventGraph")]),e._v(". We need a "),a("em",[e._v("Receive Execute")]),e._v(" event for when the task is called by the behavior tree and a "),a("em",[e._v("Finish Execute")]),e._v(" event that returns success or failure upon task completion. Everything in between is task logic.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_TaskCreation_02.JPG"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/c/cc/BBT_TaskCreation_02.JPG/400px-BBT_TaskCreation_02.JPG",alt:"BBT TaskCreation 02.JPG"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_TaskCreation_02.JPG",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Before we fill in the logic for this task we need to create a public variable of type BlackboardKeySelector to store the random location that we find. "),a("strong",[e._v("Note")]),e._v(": To create a public variable, make sure that the eye icon beside the variable is highlighted yellow and open. Do so by left clicking the icon. Name this Variable "),a("em",[e._v("Destination")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Behavior_11.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/0/0b/Behavior_11.png",alt:"Behavior 11.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Behavior_11.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("We want this task to take the AI Characters current worldspace location and find a random point within a set radius. So we get the Actors current location, find a random point within a specified radius, and then set the BlackBoard value to that location. Make sure to set the Radius of the Get Random Point in Radius to something large, like 2000, or else the AI may just be told to move an inch and therefore ignore the instruction. *Note: Make sure "),a("em",[e._v("Success")]),e._v(' is checked under "Task Completion."')]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Behavior_12.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/1/12/Behavior_12.png/500px-Behavior_12.png",alt:"Behavior 12.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Behavior_12.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("h1",{attrs:{id:"setting-up-the-behavior"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-behavior"}},[e._v("#")]),e._v(" Setting Up the Behavior")]),e._v(" "),a("p",[e._v("Open up the Behavior Tree and set it to use your created BlackBoard Asset")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_CreateBehaviorTree_01.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/6/68/BBT_CreateBehaviorTree_01.jpg/500px-BBT_CreateBehaviorTree_01.jpg",alt:"BBT CreateBehaviorTree 01.jpg"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_CreateBehaviorTree_01.jpg",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("When the Behavior Tree is run it begins at the root and proceeds down the hierarchy executing tasks and returning successes or failures. For our simple wander example we are going to drag out from the bottom of the Root node and create a Sequence. From the bottom of the Sequence we are going to drag out and expand the tasks dropdown. Select the Blueprint Task "),a("em",[e._v("Destination")]),e._v(" we created in the previous step. Then from the same sequence node drag out again and select the Move To "),a("em",[e._v("TargetPoint.")]),e._v(" Your behavior tree should now look like this.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Behavior_13.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/a/a7/Behavior_13.png/500px-Behavior_13.png",alt:"Behavior 13.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Behavior_13.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("ul",[a("li",[e._v("IMPORTANT: Note that the acceptable radius here needs to be set to much lower, like 10 to 20, than the value we set up earlier for the AI Character’s current world space when we set the Radius of the Get Random Point in Radius to around 2000. Setting the value too high here will result in the AI Character not moving at all.")])]),e._v(" "),a("p",[e._v("Now, to run the Behavior Tree we have to call it from the AI Controller so in the Graph of your Blueprint AI Controller create the following:")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_Behavior_02.JPG"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/4/48/BBT_Behavior_02.JPG/600px-BBT_Behavior_02.JPG",alt:"BBT Behavior 02.JPG"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:BBT_Behavior_02.JPG",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("p",[e._v("Please note to select the Behaviour Tree asset from the drop-down box.")]),e._v(" "),a("p",[e._v("This will begin the Behavior Tree Simulation as soon as the Begin Play event is called.")]),e._v(" "),a("h1",{attrs:{id:"spawning-the-ai"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spawning-the-ai"}},[e._v("#")]),e._v(" Spawning the AI")]),e._v(" "),a("p",[e._v("The 2 easiest ways to preview the AI are to either place the AI Character blueprint in the level or use spawn actor in the level blueprint to create an instance of it.")]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_07.png"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/b/ba/Tut_Rev_07.png/400px-Tut_Rev_07.png",alt:"Tut Rev 07.png"}})])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Tut_Rev_07.png",title:"Enlarge"}},[a("img",{attrs:{src:"/skins/common/images/magnify-clip.png",alt:""}})])]),e._v(" "),a("h1",{attrs:{id:"extras"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#extras"}},[e._v("#")]),e._v(" Extras")]),e._v(" "),a("p",[e._v("To get your AI character to rotate based on movement enter the "),a("strong",[e._v("BasicAICharacter>Defaults")]),e._v(" tab. Find Use "),a("em",[e._v("Controller Rotation Yaw")]),e._v(" and set this to false. Open the "),a("strong",[e._v("Components")]),e._v(" tab and find the Character Movement. Find "),a("em",[e._v("Orient Rotation to Movement")]),e._v(" and set it to true.")]),e._v(" "),a("h1",{attrs:{id:"useful-links"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useful-links"}},[e._v("#")]),e._v(" Useful Links")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://forums.unrealengine.com/showthread.php?130-Behavior-Tree-Tutorial",target:"_blank",rel:"noopener noreferrer"}},[e._v("In Depth Behavior Tree Thread"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("a",{attrs:{href:"http://www.twitch.tv/ueschool/c/4038638",target:"_blank",rel:"noopener noreferrer"}},[e._v("Video Tutorial for setting up a similar behavior tree system"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v('Retrieved from "'),a("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Blueprint_Behavior_Tree_Tutorial&oldid=9988",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=Blueprint_Behavior_Tree_Tutorial&oldid=9988"),a("OutboundLink")],1),e._v('"')]),e._v(" "),a("p",[a("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[e._v("Categories")]),e._v(":")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/Category:Tutorials",title:"Category:Tutorials"}},[e._v("Tutorials")])]),e._v(" "),a("li",[a("a",{attrs:{href:"/Category:Blueprint",title:"Category:Blueprint"}},[e._v("Blueprint")])])]),e._v(" "),a("p",[e._v("Hidden category:")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/Category:Templates",title:"Category:Templates"}},[e._v("Templates")])])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);t.default=i.exports}}]);