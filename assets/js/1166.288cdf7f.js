(window.webpackJsonp=window.webpackJsonp||[]).push([[1166],{1092:function(e,t,a){"use strict";a.r(t);var i=a(28),n=Object(i.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Unreal Engine AI Tutorial - 3 - Random Wandering - Epic Wiki")]),e._v(" "),a("h1",{attrs:{id:"unreal-engine-ai-tutorial-3-random-wandering"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#unreal-engine-ai-tutorial-3-random-wandering"}},[e._v("#")]),e._v(" Unreal Engine AI Tutorial - 3 - Random Wandering")]),e._v(" "),a("p",[e._v("From Epic Wiki")]),e._v(" "),a("p",[e._v("Jump to: "),a("a",{attrs:{href:"#mw-head"}},[e._v("navigation")]),e._v(", "),a("a",{attrs:{href:"#p-search"}},[e._v("search")])]),e._v(" "),a("p",[e._v("Authored by: Mieszko Zielinski")]),e._v(" "),a("p",[e._v("This tutorial is done purely in data and can easily be pulled of in vanilla UE4 4.3.")]),e._v(" "),a("h2",{attrs:{id:"behavior-trees"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#behavior-trees"}},[e._v("#")]),e._v(" Behavior Trees!")]),e._v(" "),a("p",[e._v("It's high time I've started talking about behavior treesÂ ðŸ˜„ I'll try to keep it as simple as I can this time, but there's a fair amount of things to cover regardless.")]),e._v(" "),a("p",[e._v("Behavior Trees, as an AI technique, have been around for many years already. Just google \"behavior trees\" and you'll see how much have been said about them. So I won't waste time repeating all thatÂ ðŸ˜„")]),e._v(" "),a("p",[e._v("One of the things that distinguish UE4 implementation is that it has built-in support for being fully event driven, which means you can create a BT that will not require any ticking and will only change it's state in response to external events, like an AI reaching the end of a path or changes to an AI's world knowledge (via blackboard). More on event-driven BTs in future tutorials, now let's focus on a basic case.")]),e._v(" "),a("h2",{attrs:{id:"blackboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#blackboard"}},[e._v("#")]),e._v(" Blackboard")]),e._v(" "),a("p",[e._v("UE4 AI uses Blackboards (BBs for short) to store AI's world knowledge. Among many benefits of blackboards, like having every AI its own view of the world, this gives us an opportunity to easily observe AI's world knowledge changes. It's also very easy to get data from a BB in a generic fashion.")]),e._v(" "),a("p",[e._v("Lets start by creating a new Blackboard asset. You can create one by right clicking in the content browser, it's under Miscellaneous category.")]),e._v(" "),a("p",[e._v('A new BB is empty and we need to define key-value pairs we want this BB type to store. Every entry in a BB consists of a string "key" and a value of a specified type. Play around with BB editor to to see all the supported types.')]),e._v(" "),a("p",[e._v("For the purposes of this tutorial we need to create just one entry, to store the actor we'll want AI to go to. Once done it should look like this in the editor:")]),e._v(" "),a("p",[a("a",{attrs:{href:"/index.php?title=File:T03_BBKey.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/c/c6/T03_BBKey.png",alt:"T03 BBKey.png"}})])]),e._v(" "),a("h2",{attrs:{id:"finding-where-to-go-with-a-custom-bt-task"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#finding-where-to-go-with-a-custom-bt-task"}},[e._v("#")]),e._v(" Finding where to go with a custom BT task")]),e._v(" "),a("p",[e._v('To have AI move somewhere we need to find that "somewhere" first. One of the ways of doing that is having a behavior tree task that will search for "somewhere" and store it in the BB for later use by other BT tasks. We\'re going to do just that. And we\'re going to do that in blueprint! Because why not? And it\'s fun!Â ðŸ˜„')]),e._v(" "),a("p",[e._v("In content browser create a Blueprint derived from "),a("code",[e._v("BTTask_BlueprintBase")]),e._v(". This is a special class that hosts BP API for BT tasks. Let's name it BTTask_FindWanderPoint.")]),e._v(" "),a("p",[e._v("We just need a task that will look through all interesting actors in the world (I used Note actors for this purpose), pick one and store it somewhere. Let's make the task store data in AI's blackboard.")]),e._v(" "),a("p",[e._v("Getting all actors of selected class in BP is super easy. Just do something like this:")]),e._v(" "),a("p",[a("a",{attrs:{href:"/index.php?title=File:T03_GetAllNotes.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/2/21/T03_GetAllNotes.png",alt:"T03 GetAllNotes.png"}})])]),e._v(" "),a("p",[e._v("TempActor is a variable declared in the BP itself and after executing this bit of BP TempActor contains a random Note actor from the world.")]),e._v(" "),a("h2",{attrs:{id:"implementing-actual-task"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implementing-actual-task"}},[e._v("#")]),e._v(" Implementing actual task")]),e._v(" "),a("p",[e._v('What we want here is an "instant" task, which means it executes and finishes in "one go", without spreading actions or calculations over multiple frames.')]),e._v(" "),a("p",[e._v("A blueprint-implemented instant task has to do two things:")]),e._v(" "),a("ul",[a("li",[e._v("implement "),a("code",[e._v("EventReceiveExecute")]),e._v(" - this will get called when a task gets picked for execution.\n"),a("ul",[a("li",[a("code",[e._v("OwnerActor")]),e._v(" parameter is the actor BT is running for. In our case it will always be an "),a("code",[e._v("AIController")])])])]),e._v(" "),a("li",[e._v("make sure all possible code paths finish with "),a("code",[e._v("FinishExecute")]),e._v(" call - calling this function lets the BT know given task has finished its work. If you don't call it the BT will assume it's a latent task and will continue running it in future frames, until a FinishExecute call is made.\n"),a("ul",[a("li",[a("code",[e._v("Success")]),e._v(" parameter let's BT know if give task's execution was successful or not")])])])]),e._v(" "),a("p",[e._v("One more thing we want the BTTask_FindWanderPoint to do is to store its findings in the AI's blackboard. To do that we need to add a public variable that will indicate a BB key being the destination of calculated information. You do that by adding a variable of type "),a("code",[e._v("BlackboardKeySelector")]),e._v(" to BTTask_FindWanderPoint's blueprint (I've called it "),a("code",[e._v("Put Result To")]),e._v(") and using it to set a value in an AI's blackboard, like so:")]),e._v(" "),a("p",[a("a",{attrs:{href:"/index.php?title=File:T03_SetBBValue.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/9/9b/T03_SetBBValue.png",alt:"T03 SetBBValue.png"}})])]),e._v(" "),a("h2",{attrs:{id:"perform-the-actual-move"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#perform-the-actual-move"}},[e._v("#")]),e._v(" Perform the actual move")]),e._v(" "),a("p",[e._v("We've created a BB to store information and a task to supply a BB with data so all that's left to be done is to use that information. Let's create a Behavior Tree that will pick an interesting note actor and send AI there. It's as simple as this:")]),e._v(" "),a("p",[a("a",{attrs:{href:"/index.php?title=File:T03_BT.png"}},[a("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/a/a3/T03_BT.png",alt:"T03 BT.png"}})])]),e._v(" "),a("p",[e._v('The meat of the tree is the node labeled "Sequence" and its goal is to do just that: execute tasks in a sequence. The first task to execute is our freshly implemented BTTask_FindWanderPoint. It\'s supposed to pick a random Note actor and assign it as "GoalActor" blackboard key\'s value. The second task in the sequence is the engine-supplied '),a("code",[e._v("BTTask_MoveTo")]),e._v(" that picks an "),a("code",[e._v("AActor")]),e._v(" of an "),a("code",[e._v("FVector")]),e._v(" from an indicated BB key and sends AI that way.")]),e._v(" "),a("h2",{attrs:{id:"run-it"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-it"}},[e._v("#")]),e._v(" Run it!")]),e._v(" "),a("p",[e._v("The "),a("a",{attrs:{href:"http://unreal-ai-tutorial.info/repo/AITutorial03_Wandering.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("content"),a("OutboundLink")],1),e._v(" I've prepared for this tutorial contains a little map with four Note actors and an AI that is running between the note actors. Re-do it yourself or just grab the content package. Just remember, you need "),a("a",{attrs:{href:"https://github.com/MieszkoZ/AITutorialCPP",target:"_blank",rel:"noopener noreferrer"}},[e._v("the code"),a("OutboundLink")],1),e._v(' from the previous tutorials, but only for the "jumping" part of the demo map. Everything else is doable in vanilla UE4!')]),e._v(" "),a("p",[e._v("Enjoy!")]),e._v(" "),a("p",[e._v('Retrieved from "'),a("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Unreal_Engine_AI_Tutorial_-_3_-_Random_Wandering&oldid=687",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=Unreal_Engine_AI_Tutorial_-_3_-_Random_Wandering&oldid=687"),a("OutboundLink")],1),e._v('"')]),e._v(" "),a("p",[a("a",{attrs:{href:"/index.php?title=Special:Categories",title:"Special:Categories"}},[e._v("Category")]),e._v(":")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/index.php?title=Category:Tutorials&action=edit&redlink=1",title:"Category:Tutorials (page does not exist)"}},[e._v("Tutorials")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);