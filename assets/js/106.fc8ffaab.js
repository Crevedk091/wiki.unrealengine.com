(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{903:function(e,t,a){"use strict";a.r(t);var o=a(28),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Baking Models with Substance Painter Workflow - Epic Wiki")]),e._v(" "),a("h1",{attrs:{id:"baking-models-with-substance-painter-workflow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#baking-models-with-substance-painter-workflow"}},[e._v("#")]),e._v(" Baking Models with Substance Painter Workflow")]),e._v(" "),a("p",[e._v('The goal of this document is a quick "How-To" for those new to baking models. My focus is using a sync\'d tangent basis workflow from Substance Painter to UE4. In addition, some tips and tricks to fix artifacts. I am using Maya 2014 to prepare the models for baking inside of Substance Painter 1.3.')]),e._v(" "),a("h2",{attrs:{id:"contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[e._v("#")]),e._v(" Contents")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#Model_Preparation:"}},[e._v("1 Model Preparation:")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Baking_with_Painter:"}},[e._v("2 Baking with Painter:")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Exporting_the_model_for_UE4"}},[e._v("3 Exporting the model for UE4")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#Troubleshooting_Normal_Map_Artifacts"}},[e._v("4 Troubleshooting Normal Map Artifacts")])])]),e._v(" "),a("h2",{attrs:{id:"model-preparation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#model-preparation"}},[e._v("#")]),e._v(" Model Preparation:")]),e._v(" "),a("p",[a("strong",[e._v("Make sure the High Poly Mesh and the Low Poly Mesh are aligned, sized, and centered in the scene.")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Aligned1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/9/9f/Aligned1.jpg/150px-Aligned1.jpg",alt:"Aligned1.jpg"}})])]),e._v(" "),a("p",[e._v("I recommend sizing the model near to the correct size that you will be using inside of UE4. I find that a lot of the models I get from the modelers come in very small, and I have experienced artifacts from some averaging algorithms. Too small causes it to pull in data from far away normals which means your threshold is in the noise domain.")]),e._v(" "),a("p",[a("strong",[e._v("Don't go too Low Poly! Spend the extra geometry to match any extreme silhouette differences.")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Lowpoly1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/d/d0/Lowpoly1.jpg/150px-Lowpoly1.jpg",alt:"Lowpoly1.jpg"}})])]),e._v(" "),a("p",[e._v("Normals are only good within a certain tolerance between the low poly and high poly meshes. In today's production environment, polycount can go higher and the term Medium Poly should be thought of. If you really, want a true Low Poly, then follow up with a LOD mesh chain using Simplygon afterwards.")]),e._v(" "),a("p",[a("strong",[e._v("Triangulate the Low Poly Mesh and Average Normals.")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Triaverage1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/a/a7/Triaverage1.jpg/150px-Triaverage1.jpg",alt:"Triaverage1.jpg"}})])]),e._v(" "),a("p",[e._v("Before you triangulate the mesh, make sure to save a copy of the scene if you need to go back to the quad version without running the quadrangulate function later. Also, as an option, I like to perform an Average Normals function on the Low Poly mesh. The reason that I do this is so that my baking canvas becomes more relaxed. The grouping threshold to use will vary per model just dial it in. This averaging is optional and is my preference.")]),e._v(" "),a("p",[a("strong",[e._v("Clean up duplicate material nodes, implement naming conventions, and delete extra UV Sets.")])]),e._v(" "),a("p",[a("strong",[e._v("Exploding a mesh, Setting up SubMeshNames")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:Exploded1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/8/8c/Exploded1.jpg/150px-Exploded1.jpg",alt:"Exploded1.jpg"}})])]),e._v(" "),a("p",[e._v("Take your mesh and if there are any submeshes, separate them. Move the submeshes so that they are not close to other sub pieces. I like to keep things simple and move along the axes in 50 unit increments. This way you can easily move the sub-meshes back to their exact spot if the transform is lost.")]),e._v(" "),a("p",[a("em",[e._v('Note: A new feature coming soon may replace this technique, "Match by Sub-Meshes Name"')])]),e._v(" "),a("p",[a("strong",[e._v("Setting up a Cage for baking")])]),e._v(" "),a("p",[e._v("With Maya, Make sure that all of the sub meshes are separated. The goal is to create a cage which envelopes the High Poly and Low Poly mesh as close as possible without interpenetration. I find you can obtain closer fitting cages by doing each piece separate.")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Select only the Low Poly Mesh")])]),e._v(" "),a("li",[a("p",[e._v('Change to the Rendering preset and select Lighting/Shading from the menu and choose "Transfer Maps"')])]),e._v(" "),a("li",[a("p",[e._v('In the pop up, choose to show "Both" which makes the cage appear in red. Adjust the slider to expand and collapse the cage so that it hugs as close as possible.')])]),e._v(" "),a("li",[a("p",[e._v("When the right size is found, click on the cage in the viewport, duplicate it, and unparent it. Cancel the Transfer Map operation.")])]),e._v(" "),a("li",[a("p",[e._v("Repeat the operation for each SubMesh")])]),e._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/File:Transfermaps1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/d/d6/Transfermaps1.jpg/120px-Transfermaps1.jpg",alt:""}})])]),e._v(" "),a("p",[e._v("Opening Transfer Maps")])]),e._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/File:Envelope1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/0/04/Envelope1.jpg/120px-Envelope1.jpg",alt:""}})])]),e._v(" "),a("p",[e._v("Size the Envelope Tightly")])]),e._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/File:Duplicated.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/0/0f/Duplicated.jpg/117px-Duplicated.jpg",alt:""}})])]),e._v(" "),a("p",[e._v("Duplicate the Envelope")])]),e._v(" "),a("li",[a("p",[a("a",{attrs:{href:"/File:EnvelopeAll1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/8/89/EnvelopeAll1.jpg/120px-EnvelopeAll1.jpg",alt:""}})])]),e._v(" "),a("p",[e._v("Repeat for All Submeshes")])])]),e._v(" "),a("p",[a("em",[e._v("Basically, you just hijacked the cage from the Maya baker and will now export it to be used in Substance Painter. In other modeling programs you can do push operations or similiar procedures;")])]),e._v(" "),a("p",[a("strong",[e._v("Combine your meshes into a single mesh.")])]),e._v(" "),a("p",[e._v("For the Low Poly and Cage Mesh you need to combine the submeshes in the exact same sequence so that the vertex ordering is the same for the baking process. The High Poly doesn't seem to matter.")]),e._v(" "),a("p",[a("strong",[e._v("Export the Low Poly Mesh, High Poly Mesh, & Cage as FBX.")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:FBXexport1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/9/98/FBXexport1.jpg/150px-FBXexport1.jpg",alt:"FBXexport1.jpg"}})])]),e._v(" "),a("p",[e._v("Use the following settings when exporting. Check Smoothing Groups and Smooth Mesh")]),e._v(" "),a("p",[e._v("To find out more about other settings look here")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/Engine/Content/FBX/BestPractices/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("FBX Best Practices"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"baking-with-painter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#baking-with-painter"}},[e._v("#")]),e._v(" Baking with Painter:")]),e._v(" "),a("p",[a("strong",[e._v("Open Painter and create a new project.")])]),e._v(" "),a("p",[e._v("Load in the exploded low poly mesh and set the document resolution.")]),e._v(" "),a("p",[a("strong",[e._v("Select on the Bake Textures button")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:PainterBake1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/d/d7/PainterBake1.jpg/400px-PainterBake1.jpg",alt:"PainterBake1.jpg"}})])]),e._v(" "),a("p",[e._v("Set your desired output size and your Dilation width. The dilation width is how much padding around the uvshells you want to expand. This is helpful to keep enough space for mipmaps.")]),e._v(" "),a("p",[a("strong",[e._v("Load in your High Poly Mesh and Cage File")])]),e._v(" "),a("p",[e._v("Finalize your common Settings")]),e._v(" "),a("ul",[a("li",[e._v("Max Frontal Distance, the distance the rays will shoot outward looking for geometry")]),e._v(" "),a("li",[e._v("Max Rear Distance, same as frontal but shot the opposite direction")]),e._v(" "),a("li",[e._v("Relative to Bounding Box, leave checked")]),e._v(" "),a("li",[e._v("Average Normals, leave checked. It will smooth out your high poly mesh normals")]),e._v(" "),a("li",[e._v("Ignore Backface, leave checked")]),e._v(" "),a("li",[e._v("match by Sub-Meshes Name, leave unchecked. This a future feature which will replace the exploding mesh technique")]),e._v(" "),a("li",[e._v("Antialiasing, Max it to 8x8")])]),e._v(" "),a("p",[a("strong",[e._v("Perform the bake:")])]),e._v(" "),a("p",[e._v("After the bakes are done the textures are automatically mapped to the correct channels for use by painter. Save and paint away.")]),e._v(" "),a("p",[e._v("Allegorithmic created a nice video "),a("a",{attrs:{href:"https://youtu.be/7oLD4dmjJqI?list=PLB0wXHrWAmCyOxi2BbfTf4ySMJ2iR4Xqy",target:"_blank",rel:"noopener noreferrer"}},[e._v("Baking Textures 1.3"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"exporting-the-model-for-ue4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exporting-the-model-for-ue4"}},[e._v("#")]),e._v(" Exporting the model for UE4")]),e._v(" "),a("p",[a("strong",[e._v("Export the textures from Substance painter")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:ExportSP1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/3/34/ExportSP1.jpg/400px-ExportSP1.jpg",alt:"ExportSP1.jpg"}})])]),e._v(" "),a("ol",[a("li",[e._v("Select File, then Export all Channels")]),e._v(" "),a("li",[e._v('Set your Config to "Unreal Engine 4 (Packed). Packed means that the roughness and metal masks will be packed into a single file. By default, the Red & Green channels will have the Roughness mask and the Blue channel will contain the Metallic mask.')])]),e._v(" "),a("p",[a("em",[e._v("You can create your own configuration through the configuration tab")])]),e._v(" "),a("p",[a("strong",[e._v("Import the Low Poly Mesh and Textures into UE4")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:ImporteUE4_2.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/1/1d/ImporteUE4_2.jpg/300px-ImporteUE4_2.jpg",alt:"ImporteUE4 2.jpg"}})])]),e._v(" "),a("ul",[a("li",[a("p",[e._v('The import setting to remember for the mesh is to select "Import Normals" on the Normal Import Method option.')])]),e._v(" "),a("li",[a("p",[e._v("The other settings are unique to your workflow. If you want UE4 to generate a lightmap then check it, or even better you make your own lightmap uv set in a second uv set. There are other tutorials for that. "),a("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/Engine/Content/Types/StaticMeshes/LightmapUnwrapping/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Unwrapping UVs for Lightmaps"),a("OutboundLink")],1)])])]),e._v(" "),a("p",[a("em",[e._v("Read "),a("a",{attrs:{href:"https://docs.unrealengine.com/latest/INT/Engine/Content/FBX/ImportOptions/index.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("FBX Import Options Reference"),a("OutboundLink")],1),e._v(" to find out what other settings may apply for your workflow.")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:SRGB1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/8/8a/SRGB1.jpg/300px-SRGB1.jpg",alt:"SRGB1.jpg"}})])]),e._v(" "),a("ul",[a("li",[a("p",[e._v("When importing the Packed Roughness/Metallic texture, make sure to uncheck sRGB! If you don't your model will become very shiny. Again, this is only for the packed textures.")])]),e._v(" "),a("li",[a("p",[e._v("Another quick check for importing the normal maps, make sure to check they are actually imported as Normal Maps")]),e._v(" "),a("ul",[a("li",[e._v("Compression Settings to 'TC Normalmap\"")]),e._v(" "),a("li",[e._v('Set your Texture Group, such as "WorldNormalMap"')])])])]),e._v(" "),a("p",[a("strong",[e._v("Setup your Material and connect your textures.")])]),e._v(" "),a("p",[a("a",{attrs:{href:"/File:MatNodes1.jpg"}},[a("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/3/33/MatNodes1.jpg/300px-MatNodes1.jpg",alt:"MatNodes1.jpg"}})])]),e._v(" "),a("ul",[a("li",[a("p",[e._v('Remember "R" for "R"oughness, Blue for Metallic')])]),e._v(" "),a("li",[a("p",[e._v("Connect your Emmissive texture if one was exported")])]),e._v(" "),a("li",[a("p",[e._v("Optionally, you could also connect your AO map that was generated in Painter")])])]),e._v(" "),a("h2",{attrs:{id:"troubleshooting-normal-map-artifacts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting-normal-map-artifacts"}},[e._v("#")]),e._v(" Troubleshooting Normal Map Artifacts")]),e._v(" "),a("p",[e._v('Retrieved from "'),a("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Baking_Models_with_Substance_Painter_Workflow&oldid=12374",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=Baking_Models_with_Substance_Painter_Workflow&oldid=12374"),a("OutboundLink")],1),e._v('"')]),e._v(" "),a("p",[a("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[e._v("Category")]),e._v(":")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"/Category:Tutorials",title:"Category:Tutorials"}},[e._v("Tutorials")])])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);t.default=r.exports}}]);