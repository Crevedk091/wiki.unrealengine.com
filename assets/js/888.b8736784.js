(window.webpackJsonp=window.webpackJsonp||[]).push([[888],{1406:function(e,t,r){"use strict";r.r(t);var a=r(28),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("Operator Overloads - Epic Wiki")]),e._v(" "),r("h1",{attrs:{id:"operator-overloads"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#operator-overloads"}},[e._v("#")]),e._v(" Operator Overloads")]),e._v(" "),r("p",[e._v("(Redirected from "),r("a",{attrs:{href:"/index.php?title=Operator_Overloads_in_UE4_C%2B%2B&redirect=no",title:"Operator Overloads in UE4 C++"}},[e._v("Operator Overloads in UE4 C++")]),e._v(")")]),e._v(" "),r("h2",{attrs:{id:"contents"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[e._v("#")]),e._v(" Contents")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#Overview"}},[e._v("1 Overview")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#Code_Simplification"}},[e._v("1.1 Code Simplification")])])])]),e._v(" "),r("li",[r("a",{attrs:{href:"#UE4_String_Stream"}},[e._v("2 UE4 String Stream")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#Without_Custom_C.2B.2B_Operators"}},[e._v("2.1 Without Custom C++ Operators")])])])]),e._v(" "),r("li",[r("a",{attrs:{href:"#Global_Scope"}},[e._v("3 Global Scope")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#FORCEINLINE"}},[e._v("4 FORCEINLINE")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#The_C.2B.2B"}},[e._v("5 The C++")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#Overloading_Comparison_Operators"}},[e._v("6 Overloading Comparison Operators")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#C.2B.2B_Example"}},[e._v("6.1 C++ Example")])])])]),e._v(" "),r("li",[r("a",{attrs:{href:"#Summary"}},[e._v("7 Summary")])])]),e._v(" "),r("h2",{attrs:{id:"overview"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),r("p",[e._v("Dear Community,")]),e._v(" "),r("p",[e._v("Sooooo")]),e._v(" "),r("p",[e._v("This is one reason why I love UE4 C++ so much!")]),e._v(" "),r("p",[e._v("We can do "),r("strong",[e._v("anything")]),e._v("!")]),e._v(" "),r("p",[e._v("Below is the C++ code for making two operators that I've overloaded for use with an FString and a Float")]),e._v(" "),r("h3",{attrs:{id:"code-simplification"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#code-simplification"}},[e._v("#")]),e._v(" Code Simplification")]),e._v(" "),r("p",[e._v("This enables me to go from")]),e._v(" "),r("p",[e._v("(Str is a FString)")]),e._v(" "),r("p",[e._v("Str = FString::SanitizeFloat(TheFloat);")]),e._v(" "),r("p",[e._v("to")]),e._v(" "),r("p",[e._v("Str <<= TheFloat;")]),e._v(" "),r("h2",{attrs:{id:"ue4-string-stream"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ue4-string-stream"}},[e._v("#")]),e._v(" UE4 String Stream")]),e._v(" "),r("p",[e._v("Using the code I am sharing with you below, I can also now create a UE4 String Stream! Streaming in Float values to Str like this!")]),e._v(" "),r("p",[e._v('Str = "";\nStr << Float1 << Float2 << Float3;')]),e._v(" "),r("h3",{attrs:{id:"without-custom-c-operators"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#without-custom-c-operators"}},[e._v("#")]),e._v(" Without Custom C++ Operators")]),e._v(" "),r("p",[e._v("for reference to do the above without my operators I would have to do this")]),e._v(" "),r("p",[e._v('Str = ""\nStr += FString::SanitizeFloat(Float1);\nStr += " ";\nStr += FString::SantizeFloat(Float2);\nStr += " ";\nStr += FString::SanitizeFloat(Float3);')]),e._v(" "),r("h2",{attrs:{id:"global-scope"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#global-scope"}},[e._v("#")]),e._v(" Global Scope")]),e._v(" "),r("p",[e._v('Please note you must define the operators at the global scope, so whatever .h you put them, dont include any "::" like MyClass::etc')]),e._v(" "),r("h2",{attrs:{id:"forceinline"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#forceinline"}},[e._v("#")]),e._v(" FORCEINLINE")]),e._v(" "),r("p",[e._v("FORCEINLINE is a requirement for operator overloads if you want to be able to easily define them in a way that the UE4 compiler will like even when you have code split across multiple .cpp chunks!")]),e._v(" "),r("p",[e._v("With operator overloads you can either define them in one place, or use FORCEINLINE, and FORCEINLINE is the much easier approach when multiple header include appearances are involvedÂ ðŸ˜ƒ")]),e._v(" "),r("h2",{attrs:{id:"the-c"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#the-c"}},[e._v("#")]),e._v(" The C++")]),e._v(" "),r("p",[e._v('//Str float\nFORCEINLINE\tFString&\toperator<<(FString &Str, const float& Value )\n{\nif(Str.Len() > 0) Str += " ";\nStr += FString::SanitizeFloat(Value);\nreturn Str;\n}\nFORCEINLINE\tFString&\toperator<<=(FString &Str, const float& Value )\n{\nStr = FString::SanitizeFloat(Value);\nreturn Str;\n}')]),e._v(" "),r("h2",{attrs:{id:"overloading-comparison-operators"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#overloading-comparison-operators"}},[e._v("#")]),e._v(" Overloading Comparison Operators")]),e._v(" "),r("p",[e._v('Sometimes, you will want to overload a comparison operator for a special type of struct or class. Every comparison operator must return a boolean return value. Overloading comparison operators can be useful for determining if two objects are the same object based on a particular property rather than pointer reference. If you store a list of actors within a TArray, you may want those objects to be sorted by some particular property. If you overload the "<" operator, you can now call "sort()" on your TArray and the sort method will sort based off your "<" operator logic.')]),e._v(" "),r("h3",{attrs:{id:"c-example"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#c-example"}},[e._v("#")]),e._v(" C++ Example")]),e._v(" "),r("p",[e._v("Let's say you have a custom struct for storing a list of creatures and their associated 'aggro' values. Each creature has a TArray which contains a list of sensed creatures and their associated aggro values. Each tick, your creature will try to resense all nearby creatures and update this aggro value data. If the list already contains an aggro record, we want to update the existing record rather than adding a new one. Once all aggro records have been updated, we want to call \"sort()\" on the creatures list of aggro records.")]),e._v(" "),r("p",[e._v('USTRUCT(BlueprintType)\nstruct FAggroData\n{\nGENERATED_USTRUCT_BODY()\npublic:\nÂ \n/*Sort Key: This is the aggro value for this enemy*/\nUPROPERTY(BlueprintReadWrite, Category = "Aggro")\nint32 Aggro;\nÂ \n/*This is the enemy we sensed*/\nUPROPERTY(BlueprintReadWrite, Category = "Aggro")\nABaseCreature* Enemy;\nÂ \n/*This is the last known position of the enemy*/\nUPROPERTY(BlueprintReadWrite, Category = "Aggro")\nFVector LastSensePosition;\nÂ \n/*This is the last known velocity of the enemy*/\nUPROPERTY(BlueprintReadWrite, Category = "Aggro")\nFVector LastSenseVelocity;\nÂ \n/*This is how old the last sense time was*/\nUPROPERTY(BlueprintReadWrite, Category = "Aggro")\nfloat LastSenseAge;\nÂ \n//override the "<" operator so that this object can be sorted\nFORCEINLINE bool operator<(const FAggroData &Other) const\n{\nreturn Aggro < Other.Aggro;\n}\nÂ \n//check to see if the aggro record matches another aggro record by overloading the "==" operator.\nFORCEINLINE bool operator==(const FAggroData &Other) const\n{\nreturn Enemy == Other.Enemy;\n}\n};\nÂ \n//ABaseCreature Class header:\nTArray<FAggroData> SensedEnemies;\nÂ \n//ABaseCreature Tick:\n//This will sort the list of sensed enemies based on the overloaded "<" operator. In this case, our sort\n//scheme will put the creature with the highest aggro at the very front of the list. If we want to change the sort\n//order, we can just swap the operands in the "<" operator overload\nSensedEnemies.Sort();')]),e._v(" "),r("h2",{attrs:{id:"summary"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#summary"}},[e._v("#")]),e._v(" Summary")]),e._v(" "),r("p",[e._v("With these operators in your code, no more")]),e._v(" "),r("p",[e._v("Str = FString::SanitizeFloat(TheFoat);")]),e._v(" "),r("p",[e._v("you can just do")]),e._v(" "),r("p",[e._v("Str <<= TheFloat;")]),e._v(" "),r("p",[e._v("Yay!")]),e._v(" "),r("p",[r("a",{attrs:{href:"/User:Rama",title:"User:Rama"}},[e._v("Rama")]),e._v(" ("),r("a",{attrs:{href:"/User_talk:Rama",title:"User talk:Rama"}},[e._v("talk")]),e._v(")")]),e._v(" "),r("p",[e._v('Retrieved from "'),r("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Operator_Overloads&oldid=17324",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=Operator_Overloads&oldid=17324"),r("OutboundLink")],1),e._v('"')]),e._v(" "),r("p",[r("a",{attrs:{href:"/Special:Categories",title:"Special:Categories"}},[e._v("Category")]),e._v(":")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"/Category:Code",title:"Category:Code"}},[e._v("Code")])])]),e._v(" "),r("p",[r("img",{attrs:{src:"https://tracking.unrealengine.com/track.png",alt:""}})])])}),[],!1,null,null,null);t.default=o.exports}}]);