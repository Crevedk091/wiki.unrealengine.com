(window.webpackJsonp=window.webpackJsonp||[]).push([[876],{1396:function(e,t,r){"use strict";r.r(t);var a=r(28),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("p",[e._v("Networking/Replication - Epic Wiki")]),e._v(" "),r("h1",{attrs:{id:"networking-replication"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#networking-replication"}},[e._v("#")]),e._v(" Networking/Replication")]),e._v(" "),r("p",[e._v("From Epic Wiki")]),e._v(" "),r("p",[e._v("Jump to: "),r("a",{attrs:{href:"#mw-head"}},[e._v("navigation")]),e._v(", "),r("a",{attrs:{href:"#p-search"}},[e._v("search")])]),e._v(" "),r("h2",{attrs:{id:"contents"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[e._v("#")]),e._v(" Contents")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#Overview"}},[e._v("1 Overview")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#Creating_a_server"}},[e._v("2 Creating a server")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#Listen"}},[e._v("2.1 Listen")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#Dedicated"}},[e._v("2.2 Dedicated")])])])]),e._v(" "),r("li",[r("a",{attrs:{href:"#Joining_a_server"}},[e._v("3 Joining a server")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#Play_In_Editor_Support"}},[e._v("4 Play In Editor Support")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#Blueprint_support"}},[e._v("5 Blueprint support")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#C.2B.2B_examples"}},[e._v("6 C++ examples")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#Sync_character_health_to_all_clients"}},[e._v("6.1 Sync character health to all clients")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#YourCharacter.h"}},[e._v("6.1.1 YourCharacter.h")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#YourCharacter.cpp"}},[e._v("6.1.2 YourCharacter.cpp")])])])]),e._v(" "),r("li",[r("a",{attrs:{href:"#Command_from_client_to_server"}},[e._v("6.2 Command from client to server")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"#YourPlayerController.h"}},[e._v("6.2.1 YourPlayerController.h")])]),e._v(" "),r("li",[r("a",{attrs:{href:"#YourPlayerController.cpp"}},[e._v("6.2.2 YourPlayerController.cpp")])])])])])])]),e._v(" "),r("h2",{attrs:{id:"overview"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),r("p",[e._v("Unreal Engine has been designed with networking in mind since Unreal Engine 1."),r("br"),e._v("\nThis includes:")]),e._v(" "),r("ul",[r("li",[e._v("Remote procedure calls (RPC).")]),e._v(" "),r("li",[e._v("Replication of variables, including structs & dynamic arrays.")]),e._v(" "),r("li",[e._v("Dedicated server support.")]),e._v(" "),r("li",[e._v("VOIP")])]),e._v(" "),r("h2",{attrs:{id:"creating-a-server"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-server"}},[e._v("#")]),e._v(" Creating a server")]),e._v(" "),r("h3",{attrs:{id:"listen"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#listen"}},[e._v("#")]),e._v(" Listen")]),e._v(" "),r("p",[e._v("A listen server includes the host as a local player."),r("br"),e._v("\nTo launch a listen server, use the command line:"),r("br"),e._v("\n<mygame.exe> "),r("mymap",[e._v("?listen -game")])],1),e._v(" "),r("h3",{attrs:{id:"dedicated"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dedicated"}},[e._v("#")]),e._v(" Dedicated")]),e._v(" "),r("p",[e._v("A dedicated server does not include the host as a local player."),r("br"),e._v("\nRenderering, audio, and anything else that isn't required is disabled to use a minimal footprint both in memory and cpu.")]),e._v(" "),r("p",[e._v("To launch a dedicated server, use the command line:"),r("br"),e._v("\n<mygame.exe> "),r("mymap",[e._v(" -server")])],1),e._v(" "),r("p",[e._v("Games that are ready to ship with cooked data will also include a standalone executable <mygameserver.exe>."),r("br"),e._v("\nThese are fully optimized for multiple instances per machine.")]),e._v(" "),r("p",[e._v("To launch a dedicated server using <mygameserver.exe>, use the command line:"),r("br"),e._v("\n<mygameserver.exe> "),r("mymap")],1),e._v(" "),r("h2",{attrs:{id:"joining-a-server"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#joining-a-server"}},[e._v("#")]),e._v(" Joining a server")]),e._v(" "),r("p",[e._v("To join a server at a specified IP address as a client, use the command line:"),r("br"),e._v("\n<mygame.exe> "),r("IP",{attrs:{address:""}},[e._v(" -game")])],1),e._v(" "),r("p",[e._v("To join a server via the in-game console, use the command:"),r("br"),e._v("\nopen "),r("IP",{attrs:{address:""}})],1),e._v(" "),r("h2",{attrs:{id:"play-in-editor-support"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#play-in-editor-support"}},[e._v("#")]),e._v(" Play In Editor Support")]),e._v(" "),r("p",[e._v("The editor includes built in support for networked games.")]),e._v(" "),r("p",[e._v("This is incredibly handy for quickly testing multiplayer games on a single host machine.")]),e._v(" "),r("p",[r("a",{attrs:{href:"/index.php?title=File:EditorPIEOptions.jpg"}},[r("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/7/74/EditorPIEOptions.jpg",alt:""}})])]),e._v(" "),r("p",[e._v("PIE Options")]),e._v(" "),r("p",[r("a",{attrs:{href:"/index.php?title=File:EditorPIEOptions.jpg"}},[r("img",{attrs:{src:"https://d26ilriwvtzlb.cloudfront.net/7/74/EditorPIEOptions.jpg",alt:""}})])]),e._v(" "),r("p",[e._v("PIE Advanced Settings")]),e._v(" "),r("h2",{attrs:{id:"blueprint-support"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#blueprint-support"}},[e._v("#")]),e._v(" Blueprint support")]),e._v(" "),r("p",[e._v("Blueprints fully support replication, including replication notifications."),r("br"),e._v("\nReplication notifications are handy if you want a client to do something when a variable updates."),r("br"),e._v("\neg. Play a particle effect if their health increases.")]),e._v(" "),r("p",[r("a",{attrs:{href:"/index.php?title=File:ReplicationBlueprintSupport.jpg"}},[r("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/a/af/ReplicationBlueprintSupport.jpg/300px-ReplicationBlueprintSupport.jpg",alt:""}})])]),e._v(" "),r("p",[e._v("Blueprint Replication")]),e._v(" "),r("p",[r("a",{attrs:{href:"/index.php?title=File:ReplicationBlueprintOnRep.jpg"}},[r("img",{attrs:{src:"https://d3ar1piqh1oeli.cloudfront.net/e/e2/ReplicationBlueprintOnRep.jpg/300px-ReplicationBlueprintOnRep.jpg",alt:""}})])]),e._v(" "),r("p",[e._v("Blueprint On Rep")]),e._v(" "),r("h2",{attrs:{id:"c-examples"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#c-examples"}},[e._v("#")]),e._v(" C++ examples")]),e._v(" "),r("h3",{attrs:{id:"sync-character-health-to-all-clients"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sync-character-health-to-all-clients"}},[e._v("#")]),e._v(" Sync character health to all clients")]),e._v(" "),r("h4",{attrs:{id:"yourcharacter-h"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#yourcharacter-h"}},[e._v("#")]),e._v(" YourCharacter.h")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("UPROPERTY(Replicated)\nfloat Health;\n")])])]),r("h4",{attrs:{id:"yourcharacter-cpp"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#yourcharacter-cpp"}},[e._v("#")]),e._v(" YourCharacter.cpp")]),e._v(" "),r("p",[e._v('#include "UnrealNetwork.h"\n// ...\nvoid AYourCharacter::GetLifetimeReplicatedProps(TArray< FLifetimeProperty > & OutLifetimeProps) const\n{\nSuper::GetLifetimeReplicatedProps(OutLifetimeProps);')]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("// Replicate to everyone\nDOREPLIFETIME(AYourCharacter, Health);\n")])])]),r("p",[e._v("}")]),e._v(" "),r("p",[e._v('The DOREPLIFETIME macro is defined in UnrealNetwork.h, so make sure you #include it in your .cpp file. Your project will need a dependency on the "Engine" module in its Build.cs file to find the header, but most projects will have this dependency already.')]),e._v(" "),r("h3",{attrs:{id:"command-from-client-to-server"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#command-from-client-to-server"}},[e._v("#")]),e._v(" Command from client to server")]),e._v(" "),r("h4",{attrs:{id:"yourplayercontroller-h"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#yourplayercontroller-h"}},[e._v("#")]),e._v(" YourPlayerController.h")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("bool bSomeBool;\n\nvoid SetSomeBool(bool bNewSomeBool);\n\nUFUNCTION(reliable, server, WithValidation)\nvoid ServerSetSomeBool(bool bNewSomeBool);\nvirtual void ServerSetSomeBool\\_Implementation(bool bNewSomeBool);\nvirtual bool ServerSetSomeBool\\_Validate(bool bNewSomeBool);\n")])])]),r("p",[e._v("As of UE 4.15 the compile system adds the implementation and validation definitions for you. Making the code for the header as follows")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("bool bSomeBool;\n\nvoid SetSomeBool(bool bNewSomeBool);\n\nUFUNCTION(reliable, server, WithValidation)\nvoid ServerSetSomeBool(bool bNewSomeBool);\n")])])]),r("p",[e._v("You'll still need everything in the cpp file though!")]),e._v(" "),r("h4",{attrs:{id:"yourplayercontroller-cpp"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#yourplayercontroller-cpp"}},[e._v("#")]),e._v(" YourPlayerController.cpp")]),e._v(" "),r("p",[e._v("void AYourPlayerController::SetSomeBool(bool bNewSomeBool)\n{\n// Change the value of the bSomeBool property\nbSomeBool = bNewSomeBool;")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v("// If this next check succeeds, we are \\*not\\* the authority, meaning we are a network client.\n// In this case we also want to call the server function to tell it to change the bSomeBool property as well.\nif (Role < ROLE\\_Authority)\n{\n    ServerSetSomeBool(bNewSomeBool);\n}\n")])])]),r("p",[e._v("}")]),e._v(" "),r("p",[e._v("bool AYourPlayerController::ServerSetSomeBool_Validate(bool bNewSomeBool)\n{\nreturn true;\n}")]),e._v(" "),r("p",[e._v("void AYourPlayerController::ServerSetSomeBool_Implementation(bool bNewSomeBool)\n{\n// This function is only called on the server (where Role == ROLE_Authority), called over the network by clients.\n// We need to call SetSomeBool() to actually change the value of the bool now!\n// Inside that function, Role == ROLE_Authority, so it won't try to call ServerSetSomeBool() again.\nSetSomeBool(bNewSomeBool);\n}")]),e._v(" "),r("p",[r("a",{attrs:{href:"/index.php?title=User:Kris&action=edit&redlink=1",title:"User:Kris (page does not exist)"}},[e._v("Kris")])]),e._v(" "),r("p",[e._v('Retrieved from "'),r("a",{attrs:{href:"https://wiki.unrealengine.com/index.php?title=Networking/Replication&oldid=161",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://wiki.unrealengine.com/index.php?title=Networking/Replication&oldid=161"),r("OutboundLink")],1),e._v('"')]),e._v(" "),r("p",[r("a",{attrs:{href:"/index.php?title=Special:Categories",title:"Special:Categories"}},[e._v("Category")]),e._v(":")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"/index.php?title=Category:Code",title:"Category:Code"}},[e._v("Code")])])])])}),[],!1,null,null,null);t.default=o.exports}}]);