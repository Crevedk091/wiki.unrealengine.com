<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>Metal Rendering API - Epic Wiki</title>
<meta name="generator" content="MediaWiki 1.22.2" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Epic Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.unrealengine.com/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Epic Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: my_wiki:resourceloader:filter:minify-css:7:07b6a8ccf3fd62e770f192d0a6f8e123 */</style>

<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Metal_Rendering_API","wgTitle":"Metal Rendering API","wgCurRevisionId":7161,"wgRevisionId":7161,"wgArticleId":2131,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Metal_Rendering_API","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"templateEditor":false,"templates":false,"preview":true,"previewDialog":false,"publish":true,"toc":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: my_wiki:resourceloader:filter:minify-js:7:27249162ef7002415c3792ce5dfd2a9a */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Metal_Rendering_API skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Metal Rendering API</span></h1>
			<div id="bodyContent">
								<div id="siteSub">From Epic Wiki</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Metal_in_UE4"><span class="tocnumber">1</span> <span class="toctext">Metal in UE4</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#How_To_Use_Metal"><span class="tocnumber">1.1</span> <span class="toctext">How To Use Metal</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Source_Code_Required"><span class="tocnumber">1.1.1</span> <span class="toctext">Source Code Required</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="#Setup"><span class="tocnumber">1.1.2</span> <span class="toctext">Setup</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Notes.2FGotchas"><span class="tocnumber">1.1.3</span> <span class="toctext">Notes/Gotchas</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Metal_in_UE4">Metal in UE4</span></h2>
<div>
<p>With the release of UE4 version 4.3, we have brought our users the same Metal rendering technology that we showed in the Zen Garden demo during Apple's WWDC 2014 keynote. As an aside, that was the first live public demonstration of Metal, just like the Unreal Engine was also the first live demo of PS3 and PS4!
</p>
</div>
<p><br />
</p>
<div>
<p>Metal is a really awesome rendering API that is low overhead, and maps very well to Unreal's high level rendering methods. There are some interesting new ideas in Metal that add some structure that helps reduce the overhead that would be seen in GL ES2 or similar. One such core concept is the Render Pipeline State, which explicitly defines the graphics state in a premade object that can be reused. 
</p>
</div>
<p><br /> 
</p>
<div>
<p>Metal also introduces a new shader language (called Metal Shading Language) that is based on C++11, and can be precompiled offline. Unreal will translate the HLSL code in .usf files into Metal Shading Language when you cook content for iOS. 
Metal also has built-in support for rendering from multiple threads. We are currently developing our high-level, cross-platform parallel rendering technology in UE4. Once this is ready, Metal support will be really easy to add for even further faster CPU times, on any devices that have enough cores to take advantage of parallel rendering.
</p>
</div>
<p><br />
</p>
<div>
<p>There are some caveats with our Metal support, because Metal is still a beta technology in iOS. We are very lucky that Apple has loosened the NDA restrictions for beta tech, because if this was in iOS 7 or earlier, we would not have been able to release the code.
</p>
</div>
<p><br />
</p>
<div>
<p>It should also be noted that, while Metal does introduce a new shader language, most of the benefit of Metal is on the CPU side. The final compiled shader code executed by the GPU won't be significantly different than the ES2 compiled GLSL code. As such, you will really see benefits in games that have a lot of stuff. As we showed in the Zen Garden demo, you can have thousands of draw calls per frame now. With ES2, we would go to crazy lengths to reduce draw calls by merging meshes together, and not having many dynamic objects. Metal allows for much more dynamic worlds that feel alive.
</p>
</div>
<p><br /> 
</p>
<h3><span class="mw-headline" id="How_To_Use_Metal">How To Use Metal</span></h3>
<h4><span class="mw-headline" id="Source_Code_Required">Source Code Required</span></h4>
<p><br />
</p>
<div>
<p>Because Metal is in beta, we can't compile it into the binaries or libraries that we release with 4.3. You will need source code access from GitHub and compile the source code on a Mac with Xcode.
</p>
</div>
<p><br />
</p>
<div>
<p>4.3 does allow Windows users to run our precompiled UE4Game executable on an iOS device, but the workflow isn't finalized for remote compiling of iOS apps from Windows. It is possible to do using UnrealRemoteTool (found in GitHub in Engine/Build/iOS). See this page for info: <a rel="nofollow" class="external free" href="https://answers.unrealengine.com/questions/21222/steps-for-ios-build-with-unrealremotetool.html">https://answers.unrealengine.com/questions/21222/steps-for-ios-build-with-unrealremotetool.html</a>
</p>
</div>
<p><br /> 
</p>
<div>
<p>Since Metal is still beta, Apple will be changing the API without worrying about backwards compatibility. This means that the our Metal code may not compile in future betas. 4.3 supports iOS 8 beta 3. When beta 4 is released, the code in GitHub may fail to compile. We will update our code to support beta 4 and beyond so you will be able to get fixes from GitHub.
</p>
</div>
<p><br /> 
</p>
<h4><span class="mw-headline" id="Setup">Setup</span></h4>
<p>Basic steps:
</p>
<dl>
<dd>-	Make sure you are a registered Apple developer with beta access
</dd>
<dd>-	Make sure you have an iOS device with an A7 chip (iPad Air, iPhone 5S, iPad Mini 2nd  Gen)
</dd>
<dd>-	Download Xcode 6 beta 3, and copy it into Applications
<dl>
<dd>o	<b>IMPORTANT:</b> To be safe, we recommend renaming it to Xcode.app instead of its default beta name 
</dd>
<dd>o	You could also modify BuildConfiguration.xml to set XcodeDeveloperDir to point to the beta Xcode (or even just modify IOSToolChain.cs)
</dd>
</dl>
</dd>
<dd>-	Download iOS 8 beta 3 image for your device
</dd>
<dd>-	Download 4.3 from GitHub
</dd>
<dd>-	Compile 3 things (as usual)
<dl>
<dd>o	UE4Editor (or your code-based project's editor)
</dd>
<dd>o	ShaderCompileWorker
</dd>
<dd>o	UE4Game (or your code-based game) for iOS
<dl>
<dd>	You should see MetalRHI getting compiled if you have the beta Xcode
</dd>
</dl>
</dd>
</dl>
</dd>
<dd>-	In the project settings in the editor, there is a new "Cooking" section. Check the "Support Metal" checkbox and save your settings.
</dd>
</dl>
<p><br /> 
<a href="/File:MetalPicture1.png" class="image"><img alt="MetalPicture1.png" src="https://d26ilriwvtzlb.cloudfront.net/7/7a/MetalPicture1.png" width="624" height="310" /></a>
<br /> 
</p>
<dl>
<dd>-	That's it! When you run your game on an A7 device, it will automatically use the Metal renderer and the Metal shaders. 
</dd>
</dl>
<h4><span class="mw-headline" id="Notes.2FGotchas">Notes/Gotchas</span></h4>
<dl>
<dd>-	If you are GPU bound, you may not see much or any increase in speed
</dd>
<dd>-	You may see hitches during gameplay. The way that shaders and the render state are bound together can be slow the first time. Metal does a good job caching these, so you shouldn't see such hitches next time.
</dd>
<dd>-	If you want to verify that Metal is being used, look in the boot log and you will see a line like:
<dl>
<dd>o	<b>::: Created a UIView that will support Metal&#160;:::</b>
</dd>
</dl>
</dd>
<dd>-	If it doesn't use Metal when you expected it to, look in the log for a log line that starts with the following, and it will indicate why it couldn't use Metal:
<dl>
<dd>o	<b>Not using Metal because</b> 
</dd>
</dl>
</dd>
<dd>-	If you cook with Windows, the shaders will not be precompiled because there is no shader compiler program for Windows. It will compile the shaders at runtime if this is the case (it uses the offline/online flag for looking up the shader in the DerivedDataCache, so both modes live together correctly).
</dd>
<dd>- Beta 3 has some false positives for API verification. If you run with Xcode, it is recommended that you disable Metal verification. In your Scheme (Command-Option-R is one way to get there), go to the Options tab. Set Metal API Validation to Disabled. 
</dd>
<dd>- This is still very early, and some features may not work right with Metal. You can run the game with -es2 on the commandline to switch back to ES2 rendering. If you have any Metal-specific rendering issues, we'd love to hear about them!
</dd>
</dl>

<!-- 
NewPP limit report
CPU time usage: 0.041 seconds
Real time usage: 0.086 seconds
Preprocessor visited node count: 18/1000000
Preprocessor generated node count: 24/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key my_wiki:pcache:idhash:2131-0!*!*!!en!2!* and timestamp 20140824082858
 -->
</div>								<div class="printfooter">
				Retrieved from "<a href="https://wiki.unrealengine.com/index.php?title=Metal_Rendering_API&amp;oldid=7161">https://wiki.unrealengine.com/index.php?title=Metal_Rendering_API&amp;oldid=7161</a>"				</div>
												<div id='catlinks' class='catlinks catlinks-allhidden'></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-createaccount"><a href="/index.php?title=Special:UserLogin&amp;returnto=Metal+Rendering+API&amp;returntoquery=redirect%3Dno&amp;type=signup">Create account</a></li><li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Metal+Rendering+API&amp;returntoquery=redirect%3Dno" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="/Metal_Rendering_API"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="/index.php?title=Talk:Metal_Rendering_API&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="/Metal_Rendering_API" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="/index.php?title=Metal_Rendering_API&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="/index.php?title=Metal_Rendering_API&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Search</label></h3>
	<form action="/index.php" id="searchform">
				<div id="simpleSearch">
						<input name="search" placeholder="Search" title="Search Epic Wiki [f]" accesskey="f" id="searchInput" />						<button type="submit" name="button" title="Search the pages for this text" id="searchButton"><img src="/skins/vector/images/search-ltr.png?303" alt="Search" width="12" height="13" /></button>								<input type='hidden' name="title" value="Special:Search"/>
		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<div id="p-logo" role="banner"><a style="background-image: url(/images/WikiLogo_uev2.png);" href="/Main_Page"  title="Visit the main page"></a></div>
				<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage"><a href="/Main_Page" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
			<li id="n-Tutorials"><a href="/Category:Tutorials">Tutorials</a></li>
			<li id="n-Videos"><a href="/Videos">Videos</a></li>
			<li id="n-Plug-ins"><a href="/Category:Plug-ins">Plug-ins</a></li>
			<li id="n-Code"><a href="/Category:Code">Code</a></li>
			<li id="n-Games"><a href="/Category:Games">Games</a></li>
			<li id="n-Unreal-Tournament"><a href="/Category:Unreal_Tournament">Unreal Tournament</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="/Special:WhatLinksHere/Metal_Rendering_API" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="/Special:RecentChangesLinked/Metal_Rendering_API" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="/index.php?title=Metal_Rendering_API&amp;redirect=no&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="/index.php?title=Metal_Rendering_API&amp;oldid=7161" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="/index.php?title=Metal_Rendering_API&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<div name="copyright">&#169; 2004-2014, Epic Games, Inc. All rights reserved. Epic Games, Unreal, Unreal Engine, Unreal Tournament, and their respective logos are Epic's trademarks or registered trademarks in the US and elsewhere.</div>
					</li>
					<li id="footer-termsofuseico">
						<div name="termsofuse"><a href="http://epicgames.com/tou" target="_blank">Terms of Use</a></div>
					</li>
					<li id="footer-privacynoticeico">
						<div name="privacynotice"><a href="http://epicgames.com/privacynotice" target="_blank">Privacy Policy</a></div>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<!-- Served in 0.051 secs. -->
	</body>
</html>
