<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>wiki.unrealengine.com</title>
    <meta name="description" content="A static site pulled from the internet archive">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css" as="style"><link rel="preload" href="/wiki.unrealengine.com/assets/js/app.aaf63946.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/2.4f53495e.js" as="script"><link rel="preload" href="/wiki.unrealengine.com/assets/js/962.b0020e1e.js" as="script">
    <link rel="stylesheet" href="/wiki.unrealengine.com/assets/css/0.styles.b0e83839.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki.unrealengine.com/" class="home-link router-link-active"><!----> <span class="site-name">wiki.unrealengine.com</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p>Rope Swing - Epic Wiki</p> <h1 id="rope-swing"><a href="#rope-swing" class="header-anchor">#</a> Rope Swing</h1> <h2 id="contents"><a href="#contents" class="header-anchor">#</a> Contents</h2> <ul><li><a href="#Overview">1 Overview</a></li> <li><a href="#Tutorials">2 Tutorials</a></li> <li><a href="#MyCharacter.cpp">3 MyCharacter.cpp</a></li> <li><a href="#Rope.h">4 Rope.h</a></li> <li><a href="#Rope.cpp">5 Rope.cpp</a></li></ul> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p><strong>Rate this Video:</strong></p> <p>3.50</p> <p><img src="/extensions/VoteNY/images/star_on.gif" alt=""><img src="/extensions/VoteNY/images/star_on.gif" alt=""><img src="/extensions/VoteNY/images/star_on.gif" alt=""><img src="/extensions/VoteNY/images/star_half.gif" alt=""><img src="/extensions/VoteNY/images/star_off.gif" alt=""> (2 votes)</p> <p>Approved for Versions:4.8,4.9</p> <p>This page provides a way to implement a simple rope swing</p> <h2 id="tutorials"><a href="#tutorials" class="header-anchor">#</a> Tutorials</h2> <p>Simple demo with my tutorial:</p> <p>In your character code, you only need to add a variable ifOnRope to see if the character is attached to rope; also, you need to modify your jump functin so that if you are on the rope, you jump and will set ifOnRope to false and leave the Rope:</p> <h2 id="mycharacter-cpp"><a href="#mycharacter-cpp" class="header-anchor">#</a> MyCharacter.cpp</h2> <p>void AMyCharacter::SetupPlayerInputComponent(class UInputComponent* InputComponent)
{
Super::SetupPlayerInputComponent(InputComponent);
InputComponent-&gt;BindAxis(&quot;Forward&quot;, this,
&amp;AMyCharacter::MoveForward);
InputComponent-&gt;BindAxis(&quot;Strafe&quot;, this, &amp;AMyCharacter::MoveRight);
InputComponent-&gt;BindAction(&quot;Jump&quot;, IE_Pressed, this, &amp;AMyCharacter::OnStartJump);
InputComponent-&gt;BindAction(&quot;Jump&quot;, IE_Released, this, &amp;AMyCharacter::OnStopJump);
ifOnRope = false;
}
void AMyCharacter::OnStartJump()
{
 
bPressedJump = true;
if (ifOnRope)
ifOnRope = false;
}
void AMyCharacter::OnStopJump()
{
bPressedJump = false;
}</p> <p>Then we need to add some variable to the rope actor: float rotateDegree; // The &quot;Max&quot; swing degree float TotalTime; //Time span since character attach to rope, this may be improved by using TimeSpan structure FVector actorFirstLocation; // The location when character proxs rope FVector Pivot; //rope's pivot We use the following pendulum equation to calculate swing:</p> <p><a href="/File:Swing_1.gif"><img src="https://d26ilriwvtzlb.cloudfront.net/8/87/Swing_1.gif" alt=""></a></p> <p>pendulum equation</p> <p>For simplicity, when character touches the rope, we set the maximum theta from 0 to 40 degree and let &quot;G/L&quot; be a value making your pendulum's speed appropriate. In my computer, I make it to be 1/30 and I get a pendulum with a moderate speed. When character is attached to rope, we set the totalTime to zero, in every tick, we add deltaTime to TotalTime, more efficient way may involve the usage of TimeSpan structure. Now after adding this function, your pendulum can swing after your character touches the rope, full code will be introduced later, so don't be intimidated if you are kind of confused now. SetActorRotation(FRotator(rotateDegree*sin(rotateDegree*sin(TotalTime)/30), 0.0f, 0.0f)); Now, your pendulum swings. What we need to do is to let the character swing at the same tempo, too; What we know is the rotation degree of the rope at each frame:FRotator(rotateDegree*sin(rotateDegree*sin(TotalTime)/30) We also know the pivot location(a,b,c), as illustrated by the following picture:</p> <p><a href="/File:Swing_3.png"><img src="https://d26ilriwvtzlb.cloudfront.net/d/d8/Swing_3.png" alt=""></a></p> <p>pendulum equation</p> <p>In two dimensional, if pivot is (a,b). Then character's position on rope is: (a+x*sin(θ), b-x*cos(θ)), where x is the distance from character to pivot In my application, only z-axis, the height, and x-axis, the range of the swing change. So it is Pivot + (x*sin(θ),0,-x*cos(θ)) Now we can see the whole picture:</p> <h2 id="rope-h"><a href="#rope-h" class="header-anchor">#</a> Rope.h</h2> <p>UCLASS()
class MYPROJECT5_API AMyActor : public AActor
{
GENERATED_BODY()
 
public:	
// Sets default values for this actor's properties
AMyActor(const FObjectInitializer&amp; ObjectInitializer);
float rotateDegree; // The Max swing degree
float TotalTime;	//Time span since character attach to rope, this may be improved by using TimeSpan structure
FVector actorFirstLocation; // The location when character proxs rope
FVector Pivot;				//rope's pivot
AMyCharacter* actorAttached;//Our character
// Called when the game starts or when spawned
 
 
virtual void BeginPlay() override;
UPROPERTY(VisibleDefaultsOnly, BlueprintReadWrite, Category = MeleeWeapon)
UBoxComponent* ProxBox;
UPROPERTY(VisibleDefaultsOnly, BlueprintReadWrite, Category = MeleeWeapon)
UStaticMeshComponent* Mesh;
UFUNCTION(BlueprintNativeEvent, Category = Collision)
void Prox(AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep, const FHitResult &amp;SweepResult);
void Prox_Implementation(AActor* OtherActor, UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool bFromSweep,
const FHitResult &amp; SweepResult);
// Called every frame
virtual void Tick(float DeltaSeconds) override;
};</p> <p>Prox function detect when it overlaps with other actors.</p> <h2 id="rope-cpp"><a href="#rope-cpp" class="header-anchor">#</a> Rope.cpp</h2> <p>AMyActor::AMyActor(const FObjectInitializer&amp; ObjectInitializer)
: Super(ObjectInitializer)
{
// Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don't need it.
PrimaryActorTick.bCanEverTick = true;
rotateDegree = 0.0f;
TotalTime = 0.0f;
Mesh = ObjectInitializer.CreateDefaultSubobject&lt;UStaticMeshComponent&gt;(this,
TEXT(&quot;Mesh&quot;));
RootComponent = Mesh;
ProxBox = ObjectInitializer.CreateDefaultSubobject&lt;UBoxComponent&gt;(this,
TEXT(&quot;ProxBox&quot;));
ProxBox-&gt;OnComponentBeginOverlap.AddDynamic(this,
&amp;AMyActor::Prox);
ProxBox-&gt;AttachTo(RootComponent);
actorAttached = NULL;
actorFirstLocation = FVector(0.0f, 0.0f, 0.0f);
Pivot = FVector(-110.0f, 0.0f, 260.0f); // my pivot, I know the location, yours should be different
 
}
void AMyActor::Prox_Implementation(AActor* OtherActor,
UPrimitiveComponent* OtherComp, int32 OtherBodyIndex, bool
bFromSweep, const FHitResult &amp; SweepResult)
{
 
 
actorAttached = Cast&lt;AMyCharacter&gt;(OtherActor); // set actorAttached to our character if it detects rope overlaps with our character
if (actorAttached != NULL &amp;&amp; (actorAttached-&gt;ifOnRope == false))
{
TotalTime = 0.0f;         //initilize total time
actorAttached-&gt;ifOnRope = true;
rotateDegree = 40;         //set the max swing degree to 40
actorFirstLocation = actorAttached-&gt;GetActorLocation(); //record the location of overlap
}
 
}
 
void AMyActor::Tick( float DeltaTime )
{
Super::Tick( DeltaTime );
TotalTime += DeltaTime;
float DistanceToPivot = (actorFirstLocation - Pivot).Size(); // Calculate the distance from character to pivot, it is a constant when character swings the rope
if (actorAttached != NULL)
{
 
if (actorAttached-&gt;ifOnRope){
//let the rope swing
SetActorRotation(FRotator(rotateDegree*sin(rotateDegree*sin(TotalTime)/30), 0.0f, 0.0f));
 
//character swing
actorAttached-&gt;SetActorLocation(Pivot + FVector(DistanceToPivot*sin(rotateDegree*sin(TotalTime)/30), 0.0f, -cos(rotateDegree*sin(TotalTime)/30)*DistanceToPivot)
);
 
}
else
{
// If character leaves the rope, we must let it stop
if (rotateDegree&gt;=0)
rotateDegree -= 2;
SetActorRotation(FRotator(rotateDegree*sin(rotateDegree*sin(TotalTime) / 30), 0.0f, 0.0f));
}
}
 
}
== Conclusion ==
This is a simple implement of rope swing. Hope it is helpful.</p> <p>Retrieved from &quot;<a href="https://wiki.unrealengine.com/index.php?title=Rope_Swing&amp;oldid=17246" target="_blank" rel="noopener noreferrer">https://wiki.unrealengine.com/index.php?title=Rope_Swing&amp;oldid=17246<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&quot;</p> <p><a href="/Special:Categories" title="Special:Categories">Categories</a>:</p> <ul><li><a href="/Category:Tutorials" title="Category:Tutorials">Tutorials</a></li> <li><a href="/Category:Code" title="Category:Code">Code</a></li></ul> <p>Hidden category:</p> <ul><li><a href="/Category:Templates" title="Category:Templates">Templates</a></li></ul> <p><img src="https://tracking.unrealengine.com/track.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wiki.unrealengine.com/assets/js/app.aaf63946.js" defer></script><script src="/wiki.unrealengine.com/assets/js/2.4f53495e.js" defer></script><script src="/wiki.unrealengine.com/assets/js/962.b0020e1e.js" defer></script>
  </body>
</html>
