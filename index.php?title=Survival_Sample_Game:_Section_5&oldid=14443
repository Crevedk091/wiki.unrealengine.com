<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><title>Survival Sample Game: Section 5 - Epic Wiki</title>
<meta name="generator" content="MediaWiki 1.22.2" />
<meta name="robots" content="noindex,nofollow" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Epic Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.unrealengine.com/api.php?action=rsd" />
<link rel="alternate" type="application/atom+xml" title="Epic Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=epic&amp;*" />
<link rel="stylesheet" href="/extensions/EpicVideoSystem/CSS/VideoSystem.css" />
<link rel="stylesheet" href="/skins/epic/resources/screen.css?303" media="screen" />
<link rel="stylesheet" href="/skins/epic/resources/epic.css?303" media="screen" />
<link rel="stylesheet" href="/skins/epic/resources/prettify.css?303" media="screen" />
<link rel="stylesheet" href="/skins/epic/resources/jquery.qtip.css?303" media="screen" /><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=epic&amp;*" />
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: my_wiki:resourceloader:filter:minify-css:7:07b6a8ccf3fd62e770f192d0a6f8e123 */</style>

<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=epic&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Survival_Sample_Game:_Section_5","wgTitle":"Survival Sample Game: Section 5","wgCurRevisionId":14443,"wgRevisionId":14443,"wgArticleId":4139,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Tutorial","SurvivalGameSeries","Code","Templates"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Survival_Sample_Game:_Section_5","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"templateEditor":false,"templates":false,"preview":true,"previewDialog":false,"publish":true,"toc":false}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"epic","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"usebetatoolbar":1,"usebetatoolbar-cgd":1,"wikieditor-preview":1,"wikieditor-publish":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: my_wiki:resourceloader:filter:minify-js:7:2197af7670c41256853f340e275ede1b */
}</script>
<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=skins.epic.extras.js%7Cskins.epic.fancybox.js%7Cskins.epic.js%7Cskins.epic.qtip.js%7Cskins.epic.slimscroll.js&amp;only=scripts&amp;skin=epic&amp;*"></script>
<script>if(window.mw){
mw.loader.load(["ext.voteNY","mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-cpp {line-height: normal;}
.source-cpp li, .source-cpp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for cpp
 * CSS class: source-cpp, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.cpp.source-cpp .de1, .cpp.source-cpp .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.cpp.source-cpp  {font-family:monospace;}
.cpp.source-cpp .imp {font-weight: bold; color: red;}
.cpp.source-cpp li, .cpp.source-cpp .li1 {font-weight: normal; vertical-align:top;}
.cpp.source-cpp .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.cpp.source-cpp .li2 {font-weight: bold; vertical-align:top;}
.cpp.source-cpp .kw1 {color: #0000ff;}
.cpp.source-cpp .kw2 {color: #0000ff;}
.cpp.source-cpp .kw3 {color: #0000dd;}
.cpp.source-cpp .kw4 {color: #0000ff;}
.cpp.source-cpp .co1 {color: #666666;}
.cpp.source-cpp .co2 {color: #339900;}
.cpp.source-cpp .coMULTI {color: #ff0000; font-style: italic;}
.cpp.source-cpp .es0 {color: #000099; font-weight: bold;}
.cpp.source-cpp .es1 {color: #000099; font-weight: bold;}
.cpp.source-cpp .es2 {color: #660099; font-weight: bold;}
.cpp.source-cpp .es3 {color: #660099; font-weight: bold;}
.cpp.source-cpp .es4 {color: #660099; font-weight: bold;}
.cpp.source-cpp .es5 {color: #006699; font-weight: bold;}
.cpp.source-cpp .br0 {color: #008000;}
.cpp.source-cpp .sy0 {color: #008000;}
.cpp.source-cpp .sy1 {color: #000080;}
.cpp.source-cpp .sy2 {color: #000040;}
.cpp.source-cpp .sy3 {color: #000040;}
.cpp.source-cpp .sy4 {color: #008080;}
.cpp.source-cpp .st0 {color: #FF0000;}
.cpp.source-cpp .nu0 {color: #0000dd;}
.cpp.source-cpp .nu6 {color: #208080;}
.cpp.source-cpp .nu8 {color: #208080;}
.cpp.source-cpp .nu12 {color: #208080;}
.cpp.source-cpp .nu16 {color:#800080;}
.cpp.source-cpp .nu17 {color:#800080;}
.cpp.source-cpp .nu18 {color:#800080;}
.cpp.source-cpp .nu19 {color:#800080;}
.cpp.source-cpp .me1 {color: #007788;}
.cpp.source-cpp .me2 {color: #007788;}
.cpp.source-cpp .ln-xtra, .cpp.source-cpp li.ln-xtra, .cpp.source-cpp div.ln-xtra {background-color: #ffc;}
.cpp.source-cpp span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/epic/csshover.min.htc")}</style><![endif]--><script type="text/javascript">
var experimentID = false;
var cxApi = null;
var variation = 0;
var fancyTitle = "";
var CE_SNAPSHOT_NAME = document.getElementsByTagName("title")[0].innerHTML;
$(document).ready(function(){
	if(experimentID != false)
	{
		$(head).append('<script src="//www.google-analytics.com/cx/api.js?experiment=' + experimentID + '" />' + '</scr' + 'ipt>');
		HandleExperiment();
	}
	else
	{
		CE_SNAPSHOT_NAME = (fancyTitle != "" ? fancyTitle : document.getElementsByTagName("title")[0].innerHTML);
		setTimeout(function () {
			var a = document.createElement("script");
			var b = document.getElementsByTagName("script")[0];
			a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0028/4572.js?" + Math.floor(new Date().getTime() / 3600000);
			a.async = true; a.type = "text/javascript"; b.parentNode.insertBefore(a, b)
		}, 1);	
	}
});
function HandleExperiment()
{
	CE_SNAPSHOT_NAME = (fancyTitle != "" ? fancyTitle : document.getElementsByTagName("title")[0].innerHTML);
	if(cxApi != null)
	{
		variation = cxApi.chooseVariation();
		cxApi.setChosenVariation(variation, experimentID);
		if(variation != cxApi.ORIGINAL_VARIATION && variation != cxApi.NO_CHOSEN_VARIATION && variation != cxApi.NOT_PARTICIPATING)
		{
			//var URL = document.location.href + (document.location.search != '' ? '&var=' : '?var=') + variation;
			ga('send', 'event', 'A/B', 'ID: ' + experimentID, 'Variation: ' + variation, {'nonInteraction': 1});
			//document.location.href = URL; 
			CE_SNAPSHOT_NAME = document.getElementsByTagName("title")[0].innerHTML + ' (variation ' + variation + ')';
			var test = "";
		}
		else
		{
			ga('send', 'event', 'A/B', 'ID: ' + experimentID, 'Variation: ' + variation, {'nonInteraction': 1});
		}
		ToggleExperimentContent(variation);
		setTimeout(function () {
			var a = document.createElement("script");
			var b = document.getElementsByTagName("script")[0];
			a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0028/4572.js?" + Math.floor(new Date().getTime() / 3600000);
			a.async = true; a.type = "text/javascript"; b.parentNode.insertBefore(a, b)
		}, 1);
	}
	else
	{
		setTimeout("HandleExperiment()", 500);
	}
}

function ToggleExperimentContent(variation)
{
	$('.AB').hide();
	$('#variation_' + variation).show();
}
</script></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Survival_Sample_Game_Section_5 skin-epic action-view vector-animateLayout">
		<!--<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>-->
		<!-- Google Tag Manager -->
		<noscript>
			<iframe src="//www.googletagmanager.com/ns.html?id=GTM-KWRD6D"
					height="0" width="0" style="display:none;visibility:hidden"></iframe>
		</noscript>
		<script>
		(function (w, d, s, l, i) {
		w[l] = w[l] || []; w[l].push({
		'gtm.start':
		new Date().getTime(), event: 'gtm.js'
		}); var f = d.getElementsByTagName(s)[0],
		j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
		'//www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
		})(window, document, 'script', 'dataLayer', 'GTM-KWRD6D');</script>
		<!-- End Google Tag Manager -->
		<div id="webThree">
		<div id="head">
		









<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdn1.unrealengine.com/2934028/epicGamesHeaderBundle-de871130cac2fcbcb9e0319daa733e58.js" defer></script>
        <link rel="stylesheet" href="https://cdn1.unrealengine.com/2934028/epicGamesHeader-d8854194f8c763b7fad3d04f3bb362d6.css">
    </head>

    <body>
        <input type="hidden" id="updateenable" value="true">

        
            

<!DOCTYPE html>
<html>
    <head>
    	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        
            <link rel="stylesheet" href="https://cdn1.unrealengine.com/2934028/webpack/epicGamesHeader.epic-games-nav-d718c8388be863c1ecbae8d365e64cf4.css"/>
        
    </head>
    <body>
        <script type="text/javascript">
            //required so the config object is not utf-8 encoded
            
                (function() {
                    var config = (function(){ return {"macDownloadUrl":"https://launcher-public-service-prod06.ol.epicgames.com/launcher/api/installer/download/EpicGamesLauncher.dmg","hideSearch":false,"_contentType":426,"links":[{"title":"About","useCustomCallback":false,"kids":[{"title":"Overview","href":"https://www.unrealengine.com/what-is-unreal-engine-4"},{"title":"Features","href":"https://www.unrealengine.com/unreal-engine-4"},{"title":"Virtual Reality","href":"https://www.unrealengine.com/vr-page"},{"title":"Showcase","href":"https://www.unrealengine.com/showcase"},{"title":"What's New","href":"https://www.unrealengine.com/410-release-notes-overview"},{"title":"FAQ / EULA","href":"https://www.unrealengine.com/faq"},{"title":"Previous Versions","href":"https://www.unrealengine.com/previous-versions"},{"title":"Enterprise","href":"https://www.unrealengine.com/enterprise"}],"key":"about"},{"title":"Learn","useCustomCallback":false,"collapseTarget":"More","kids":[{"title":"Documentation","useCustomCallback":false,"href":"https://docs.unrealengine.com/"},{"title":"Video Tutorials","useCustomCallback":false,"href":"https://docs.unrealengine.com/latest/INT/Videos/"},{"title":"Wiki","useCustomCallback":false,"href":"https://wiki.unrealengine.com/Main_Page"}],"key":"learn","active":true},{"title":"Community","useCustomCallback":false,"collapseTarget":"More","kids":[{"title":"Blog","href":"https://www.unrealengine.com/blog"},{"title":"Forums","useCustomCallback":false,"href":"https://forums.unrealengine.com/"},{"title":"AnswerHub","useCustomCallback":false,"href":"https://answers.unrealengine.com/"},{"title":"Roadmap","useCustomCallback":false,"href":"https://trello.com/b/gHooNW9I/ue4-roadmap"},{"title":"Unreal Dev Grants","href":"https://www.unrealengine.com/unrealdevgrants"},{"title":"Unreal Tournament","useCustomCallback":false,"href":"https://www.epicgames.com/unrealtournament/"}],"key":"community"},{"title":"Marketplace","useCustomCallback":false,"collapseTarget":"More","kids":[{"title":" Browse","href":"https://www.unrealengine.com/marketplace"},{"title":"Business Terms","useCustomCallback":false,"href":"https://publish.unrealengine.com/faq"},{"title":"Submission Guidelines","useCustomCallback":false,"href":"https://publish.unrealengine.com/submission-guidelines"},{"title":"Submit Your Content","useCustomCallback":false,"href":"https://publish.unrealengine.com/welcome"},{"title":"Marketplace Forums","useCustomCallback":false,"href":"https://forums.unrealengine.com/forumdisplay.php?56-Marketplace"}],"key":"marketplace"},{"title":"Academia","useCustomCallback":false,"collapseTarget":"More","kids":[{"title":"Education Program","href":"https://www.unrealengine.com/education"},{"title":"Academic Partners","href":"https://www.unrealengine.com/academic-partners"}],"key":"academia"}],"properties":[{"egSkip":false,"egDisabled":false,"propertyKey":"unreal_tournament","egHref":"https://www.epicgames.com/unrealtournament/"}],"epicPropertyName":"unreal_engine","pcDownloadUrl":"https://launcher-public-service-prod06.ol.epicgames.com/launcher/api/installer/download/EpicGamesLauncherInstaller.msi","hideLocale":true,"messages":{"sign_in":"Sign In","search":"Search","locale":"Locale","sign_out":"Sign Out","default_download":"Get Epic Games","default_username":"Account"},"logoLink":{"key":"logo","href":"https://www.unrealengine.com/blog"},"accountLinks":{"signOutLink":{"useCustomCallback":true,"key":"signout"},"signInLinks":[{"title":"Sign In","href":"https://www.unrealengine.com/login","key":"signin"}],"dropdownLinks":[{"title":"Personal","href":"https://www.unrealengine.com/dashboard","key":"personal"},{"title":"Seller","useCustomCallback":false,"href":"https://publish.unrealengine.com/","key":"seller"}]},"hideCallToAction":false,"downloadLink":{"useCustomCallback":false},"callToAction":{"title":"Get Unreal","useCustomCallback":true},"hideSignIn":true,"overrideParams":{"hideLocale":true,"useServerUrl":true,"hideSignIn":true},"locale":"en-US","serverUrl":"https://www.unrealengine.com"}; })();
                    if (typeof window._epicGamesNav === 'undefined') {
                        window._epicGamesNav = config;
                    } else {
                        for (var key in config) {
                            if (typeof key === 'string') {
                                if (!window._epicGamesNav[key] && config[key] !== null) {
                                    window._epicGamesNav[key] = config[key];
                                }
                            }
                        }
                    }

                    /**
                     * For a documented example of what the config json object looks like:
                     *   /frontend/app/scripts/utils/epicGamesNavObserver.js
                     */
                })();
            
        </script>

        <div id="epicGamesNavigation" data-external="false"></div>

        
            <script src="https://cdn1.unrealengine.com/2934028/webpack/epicGamesHeader.epic-games-nav-f0fb4f9d2892e2e26f7d90e16135732c.js" type="text/javascript" ></script>
        
    </body>
</html>
        

        

        <div id="header" data-path="" data-sitepath="https://www.unrealengine.com">
            <input type="hidden" id="isUnified" value="1" />
            <input type="hidden" id="current_locale" value="en-US"/>
            <input type="hidden" id="header-host" value="https://www.unrealengine.com" />
            <input type="hidden" id="current_country" value="US"/>
        </div>
    </body>
</html>




		</div>
		<div id="pagedefault">		
                    <div id="pagenav">
                        <div>
                            <!-- Start of Other language links -->
                            <!-- End of Other language links -->
                            <div class="homelink_container">
                                <a href="https://wiki.unrealengine.com" title="UE4 Wiki Home" class="homelink">HOME</a>
                            </div>
                        </div>
                        <div style="clear:both;">
                        </div>
                    </div>	
		<div id="mw-navigation" style="max-width:972px;margin:1em auto 0 auto;">
			<h2>Navigation menu</h2>
			<div id="mw-head">
				<div id="jumplink" onclick="$('#sidebar').toggle();">
					Navigation
				</div>
				<div id="sidebar">
					<!-- Start of jump page links -->
					<div class="largetitle">
						Quick Links
					</div>
					<div class="arrowlist">
						<!-- End of jump page links -->
						<!-- Start of related page links -->
						<!-- End of related page links -->								
						<div id="mw-panel">
							<div class="portal" role="navigation" id='p-navigation' aria-labelledby='p-navigation-label'>
	<h3 id='p-navigation-label'>Navigation</h3>
	<div class="body">
		<ul>
			<li id="n-mainpage-description"><a href="/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
			<li id="n-recentchanges"><a href="/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
			<li id="n-randompage"><a href="/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-Community' aria-labelledby='p-Community-label'>
	<h3 id='p-Community-label'>Community</h3>
	<div class="body">
		<ul>
			<li id="n-UE4-Games"><a href="/Category:Games">UE4 Games</a></li>
			<li id="n-Dev-Blogs"><a href="/Developer_Blogs">Dev Blogs</a></li>
			<li id="n-Dev-Livestreams"><a href="/Developer_Livestreams">Dev Livestreams</a></li>
			<li id="n-Code-Sharing-Hub"><a href="/GitHub_Sharing_Hub">Code Sharing Hub</a></li>
			<li id="n-UE-User-Groups"><a href="/User_Group_Map">UE User Groups</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-Learning_Resources' aria-labelledby='p-Learning_Resources-label'>
	<h3 id='p-Learning_Resources-label'>Learning Resources</h3>
	<div class="body">
		<ul>
			<li id="n-Tutorials"><a href="/Category:Tutorials">Tutorials</a></li>
			<li id="n-Example-Projects"><a href="/Category:Example_Projects">Example Projects</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-Software_and_Tools' aria-labelledby='p-Software_and_Tools-label'>
	<h3 id='p-Software_and_Tools-label'>Software and Tools</h3>
	<div class="body">
		<ul>
			<li id="n-Plug-ins"><a href="/Category:Plug-ins">Plug-ins</a></li>
			<li id="n-Art:-3D"><a href="/3D_Art_Resources">Art: 3D</a></li>
			<li id="n-Art:-2D"><a href="/2D_Art_Resources">Art: 2D</a></li>
			<li id="n-Audio"><a href="/Audio_Resources">Audio</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-Modding' aria-labelledby='p-Modding-label'>
	<h3 id='p-Modding-label'>Modding</h3>
	<div class="body">
		<ul>
			<li id="n-Modding-Resources"><a href="/Category:Modding_Resources">Modding Resources</a></li>
			<li id="n-Moddable-Games"><a href="/Category:Moddable_Games">Moddable Games</a></li>
			<li id="n-Unreal-Tournament"><a href="/Category:Unreal_Tournament">Unreal Tournament</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-Epic_Official' aria-labelledby='p-Epic_Official-label'>
	<h3 id='p-Epic_Official-label'>Epic Official</h3>
	<div class="body">
		<ul>
			<li id="n-Website"><a href="https://www.unrealengine.com" rel="nofollow">Website</a></li>
			<li id="n-Learning-Resources"><a href="https://docs.unrealengine.com/latest/INT/" rel="nofollow">Learning Resources</a></li>
			<li id="n-Forums"><a href="https://forums.unrealengine.com/" rel="nofollow">Forums</a></li>
			<li id="n-Blog"><a href="https://www.unrealengine.com/blog" rel="nofollow">Blog</a></li>
			<li id="n-YouTube"><a href="https://www.youtube.com/UnrealEngine" rel="nofollow">YouTube</a></li>
			<li id="n-Twitch"><a href="http://www.twitch.tv/unrealengine" rel="nofollow">Twitch</a></li>
			<li id="n-Twitter"><a href="https://twitter.com/UnrealEngine" rel="nofollow">Twitter</a></li>
			<li id="n-Facebook"><a href="https://www.facebook.com/UnrealEngine" rel="nofollow">Facebook</a></li>
			<li id="n-Instagram"><a href="https://instagram.com/unrealengine/" rel="nofollow">Instagram</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
	<h3 id='p-tb-label'>Tools</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="/Special:WhatLinksHere/Survival_Sample_Game:_Section_5" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
			<li id="t-recentchangeslinked"><a href="/Special:RecentChangesLinked/Survival_Sample_Game:_Section_5" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
			<li id="t-specialpages"><a href="/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
			<li id="t-print"><a href="/index.php?title=Survival_Sample_Game:_Section_5&amp;oldid=14443&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
			<li id="t-permalink"><a href="/index.php?title=Survival_Sample_Game:_Section_5&amp;oldid=14443" title="Permanent link to this revision of the page">Permanent link</a></li>
			<li id="t-info"><a href="/index.php?title=Survival_Sample_Game:_Section_5&amp;action=info">Page information</a></li>
		</ul>
	</div>
</div>
						</div>
					</div>
				</div>				
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Namespaces</h3>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="/Survival_Sample_Game:_Section_5"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="/index.php?title=Talk:Survival_Sample_Game:_Section_5&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Variants</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Views</h3>
	<ul>
					<li id="ca-view" class="selected"><span><a href="/Survival_Sample_Game:_Section_5" >View</a></span></li>
					<li id="ca-viewsource"><span><a href="/index.php?title=Survival_Sample_Game:_Section_5&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible"><span><a href="/index.php?title=Survival_Sample_Game:_Section_5&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">History</a></span></li>
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Actions</span><a href="#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Personal tools</h3>
	<ul>
<li id="pt-createaccount"><a href="/index.php?title=Special:UserLogin&amp;returnto=Survival+Sample+Game%3A+Section+5&amp;returntoquery=oldid%3D14443&amp;type=signup">Create account</a></li><li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Survival+Sample+Game%3A+Section+5&amp;returntoquery=oldid%3D14443" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>	</ul>
</div>
				</div>
			</div>
		</div>
		<div id="maincol">
		<div class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- Start of crumbs links -->
			<div class="crumbs">
			<p>
							</p>
			</div>
			<!-- End of crumbs links -->
			<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Survival Sample Game: Section 5</span></h1>
			<div id="bodyContent">
				<div id="contentSub"><div id="mw-revision-info">Revision as of 19:30, 1 June 2015 by <a href="/User:Tom_Looman" title="User:Tom Looman" class="mw-userlink">Tom Looman</a>  <span class="mw-usertoollinks">(<a href="/index.php?title=User_talk:Tom_Looman&amp;action=edit&amp;redlink=1" class="new" title="User talk:Tom Looman (page does not exist)">Talk</a> | <a href="/Special:Contributions/Tom_Looman" title="Special:Contributions/Tom Looman">contribs</a>)</span></div><br />
				<div id="mw-revision-nav">(<a href="/index.php?title=Survival_Sample_Game:_Section_5&amp;diff=prev&amp;oldid=14443" title="Survival Sample Game: Section 5">diff</a>) <a href="/index.php?title=Survival_Sample_Game:_Section_5&amp;direction=prev&amp;oldid=14443" title="Survival Sample Game: Section 5">← Older revision</a> | Latest revision (diff) | Newer revision → (diff)</div></div>
																<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="aux">
<div>
<b>Rate this Tutorial:</b> <div id="rating_"><div class="rating-score"><div class="voteboxrate">5.00</div></div><div class="rating-section"><img class="vote-rating-star" data-vote-the-vote="1" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__1" src="/extensions/VoteNY/images/star_on.gif" alt="" /><img class="vote-rating-star" data-vote-the-vote="2" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__2" src="/extensions/VoteNY/images/star_on.gif" alt="" /><img class="vote-rating-star" data-vote-the-vote="3" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__3" src="/extensions/VoteNY/images/star_on.gif" alt="" /><img class="vote-rating-star" data-vote-the-vote="4" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__4" src="/extensions/VoteNY/images/star_on.gif" alt="" /><img class="vote-rating-star" data-vote-the-vote="5" data-vote-id="" data-vote-action="3" data-vote-rating="5.00" data-vote-voted="0" id="rating__5" src="/extensions/VoteNY/images/star_on.gif" alt="" /> <span class="rating-total">(3 votes)</span></div>
				<div class="rating-clear">
			</div></div>
</div>
<div>
<p>Approved for Versions:4.7
</p>
</div>
</div>
<p>C++ Sample project covering common gameplay concepts packed in a small coop survival game.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Links"><span class="tocnumber">1.1</span> <span class="toctext">Links</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Networking_in_Unreal_Engine_4"><span class="tocnumber">2</span> <span class="toctext">Networking in Unreal Engine 4</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Practical_Networking_Examples"><span class="tocnumber">3</span> <span class="toctext">Practical Networking Examples</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Making_the_player_sprint"><span class="tocnumber">3.1</span> <span class="toctext">Making the player sprint</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Simulating_a_bomb_explosion"><span class="tocnumber">3.2</span> <span class="toctext">Simulating a bomb explosion</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Respawning_item_pickups"><span class="tocnumber">3.3</span> <span class="toctext">Respawning item pickups</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Changing_the_HUD_State"><span class="tocnumber">3.4</span> <span class="toctext">Changing the HUD State</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Closing"><span class="tocnumber">4</span> <span class="toctext">Closing</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Links_2"><span class="tocnumber">4.1</span> <span class="toctext">Links</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Notes"><span class="tocnumber">4.2</span> <span class="toctext">Notes</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>In section 5 of the ongoing survival game series we dive into gameplay networking (Replication). If you are not yet familiar with this ongoing project be sure to check out the <a rel="nofollow" class="external text" href="https://wiki.unrealengine.com/Survival_sample_game">project overview</a> for information on the series!
</p><p>Please consider this documentation a reference guide to get additional information on topics covered in the source itself. If you have any questions then feel free to leave your questions &amp; feedback on the <a rel="nofollow" class="external text" href="https://forums.unrealengine.com/showthread.php?71057-Announcing-Section-5-of-Survival-Game-Networking-your-game">section-specific forum thread!</a>
</p><p><a href="/File:Containercity_06.jpg" class="image"><img alt="Containercity 06.jpg" src="https://d26ilriwvtzlb.cloudfront.net/b/b4/Containercity_06.jpg" width="1589" height="931" /></a>
</p>
<h3><span class="mw-headline" id="Links">Links</span></h3>
<ul>
<li> <a rel="nofollow" class="external text" href="https://forums.unrealengine.com/showthread.php?63678-Ongoing-C-Gameplay-Example-Series-Making-a-Survival-Game">Forum Thread</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://wiki.unrealengine.com/Survival_sample_game">Project Overview</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://wiki.unrealengine.com/Survival_Sample_Game:_Section_4">Previous Section (Gameloop, (Re)spawning, Time of Day)</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://github.com/tomlooman/EpicSurvivalGameSeries">Source at GitHub</a>
</li>
</ul>
<h2><span class="mw-headline" id="Networking_in_Unreal_Engine_4">Networking in Unreal Engine 4</span></h2>
<p>Networking in UE4 is based around the <a rel="nofollow" class="external text" href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/Server/index.html">client-server model</a>. This means that there is one server that is authoritative over the game state. All connected clients are kept in close proximity to this state.
</p><p>Networking in Unreal Engine 4 is referred to as Replication. Therefor a "replicated variable" is one that is kept in sync between client and server where the server maintains and controls the value and the client receives updates to this value to maintain a synchronized state.
</p><p>The UE4 Docs already have a great deal on <a rel="nofollow" class="external text" href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/">Networking &amp; Multiplayer</a>, this page will focus on more practical examples instead covering most commonly used patterns to network a game.
</p>
<h2><span class="mw-headline" id="Practical_Networking_Examples">Practical Networking Examples</span></h2>
<p>The best way to learn a difficult topic like replication is through practical examples. The entire sample game is networked and uses a variety of common practices used in many multiplayer games. We'll take one example for each of the common patterns (Server-function, Client-function, NetMulticast and Repnotifies) So let's get started with server functions!
</p>
<h3><span class="mw-headline" id="Making_the_player_sprint">Making the player sprint</span></h3>
<p><i>Keywords: <a rel="nofollow" class="external text" href="https://docs.unrealengine.com/latest/INT/Gameplay/HowTo/Networking/ReplicateFunction/index.html">Server-function (RPC)</a>, Reliable/Unreliable, WithValidation, Replication conditions</i>
</p><p><a href="/File:Survival_section5_sprinting.jpg" class="image"><img alt="Survival section5 sprinting.jpg" src="https://d26ilriwvtzlb.cloudfront.net/d/d3/Survival_section5_sprinting.jpg" width="1472" height="507" /></a>
</p><p>To let the player sprint, we need to update the movement speed on the server, since the server is authoritative of the player's position. The issue we need to solve here is that whenever we press the sprint-key (in our case "LeftShift") on the client's machine we need to push this input event to the server to let it know we want to start sprinting.
</p><p>In the following code sample we have a function that we mapped to the input key ("LeftShift") input functions are always executed on the client. The input function OnStartSprinting() calls SetSprinting(), which at this time is still executed on the client side. This function performs a Role check to see if we are a client or server and makes the request to the server in case we are calling this on the client.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/* Client-side function mapped to input key */</span>
<span class="kw4">void</span> ASCharacter<span class="sy4">::</span><span class="me2">OnStartSprinting</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	SetSprinting<span class="br0">&#40;</span><span class="kw2">true</span><span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="coMULTI">/* Function that can be called on either server or client. Makes a remote procedure call if called from the client. */</span>
<span class="kw4">void</span> ASCharacter<span class="sy4">::</span><span class="me2">SetSprinting</span><span class="br0">&#40;</span><span class="kw4">bool</span> NewSprinting<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
        <span class="coMULTI">/* We want to update this variable regardless if a client or server makes the call (therefor it's not placed within a Role == ROLE_Authority check. 
           You generally only want to update (replicated) variables on the server and not client. 
           bWantsToRun is a special case in our SCharacter class since we added a &quot;Replication Condition&quot; which is set up to skip replication of this variable for the owner, all other clients still receive changes to this variable as normal. 
        */</span>
	bWantsToRun <span class="sy1">=</span> NewSprinting<span class="sy4">;</span>
&#160;
	<span class="kw1">if</span> <span class="br0">&#40;</span>Role <span class="sy1">&lt;</span> ROLE_Authority<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		ServerSetSprinting<span class="br0">&#40;</span>NewSprinting<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Any "Server" function must be marked with "WithValidation" in the header (in our case inside SCharacter.h) for security reasons. You generally want to include some conservative validation checks. If this check fails the client disconnects from the server. In this case we simply return true without any additional checks. 
</p><p>As of 4.8 you are required to declare the _Implementation and _Validate functions in the header as well (Make sure you class is updated to GENERATED_BODY() instead of the deprecated GENERATED_UCLASS_BODY() at the top of your header or the compiler will warn about duplicate declarations as pre-4.8 code automatically generated these two functions in the header)
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/* Server side call to update actual sprint state */</span>
UFUNCTION<span class="br0">&#40;</span>Server, Reliable, WithValidation<span class="br0">&#41;</span>
<span class="kw4">void</span> ServerSetSprinting<span class="br0">&#40;</span><span class="kw4">bool</span> NewSprinting<span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
<span class="kw4">void</span> ServerSetSprinting_Implementation<span class="br0">&#40;</span><span class="kw4">bool</span> NewSprinting<span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
<span class="kw4">bool</span> ServerSetSprinting_Validate<span class="br0">&#40;</span><span class="kw4">bool</span> NewSprinting<span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>It's recommended to keep the _Implementation functions as simple as possible and simply make a call back to the caller which is SetSprinting().
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">void</span> ASCharacter<span class="sy4">::</span><span class="me2">ServerSetSprinting_Implementation</span><span class="br0">&#40;</span><span class="kw4">bool</span> NewSprinting<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	SetSprinting<span class="br0">&#40;</span>NewSprinting<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">bool</span> ASCharacter<span class="sy4">::</span><span class="me2">ServerSetSprinting_Validate</span><span class="br0">&#40;</span><span class="kw4">bool</span> NewSprinting<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw1">return</span> <span class="kw2">true</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>You may have noticed the "Reliable" keyword. This specifies that we require a guarantee this function to be received at the other end. In real networking situations you will get to deal with packet loss. Information may get lost in transit, if this would happen and this function is set to the alternative "Unreliable" we might end up playing the sprinting animation on the client, but the server has never received the request and is still handling the player as if it is simply walking. For one off calls that update the state to new absolute values, using Reliable is recommended, it does add more strain to the networking however, there is definitely a good reason for using Unreliable whenever you can.
</p><p>An example of what unreliable would be appropriate for is an update to a vector position, if a packet were lost it wouldn't matter so much if we are continuously sending new positions anyway. Using unreliable in those types of situations is highly recommended as there is no reason to re-send packets on failure, or to wait for a packet to arrive before allowing the next packet to be executed as with "Reliable".
</p><p>Moving back to the first example the variable bWantsToRun is updated both locally on the client and on the server through SetSprinting(...) and ServerSetSprinting which calls SetSprinting as well. This is because we applied a special Replication Condition to this variable to skip the owner of the variable when replicating. This means all other clients still receive updates to this variable, except the owning client, which has already updated the variable locally to begin with.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/* Function that can be called on either server or client. Makes a remote procedure call if called from the client. */</span>
<span class="kw4">void</span> ASCharacter<span class="sy4">::</span><span class="me2">SetSprinting</span><span class="br0">&#40;</span><span class="kw4">bool</span> NewSprinting<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
        <span class="coMULTI">/* We want to update this variable regardless if a client or server makes the call (therefor it's not placed within a Role == ROLE_Authority check. 
           You generally only want to update (replicated) variables on the server and not client. 
           bWantsToRun is a special case in our SCharacter class since we added a &quot;Replication Condition&quot; which is set up to skip replication of this variable for the owner, all other clients still receive changes to this variable as normal. 
        */</span>
	bWantsToRun <span class="sy1">=</span> NewSprinting<span class="sy4">;</span>
&#160;
	<span class="kw1">if</span> <span class="br0">&#40;</span>Role <span class="sy1">&lt;</span> ROLE_Authority<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		ServerSetSprinting<span class="br0">&#40;</span>NewSprinting<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="kw4">void</span> ASCharacter<span class="sy4">::</span><span class="me2">GetLifetimeReplicatedProps</span><span class="br0">&#40;</span>TArray<span class="sy1">&lt;</span>FLifetimeProperty<span class="sy1">&gt;</span><span class="sy3">&amp;</span> OutLifetimeProps<span class="br0">&#41;</span> <span class="kw4">const</span>
<span class="br0">&#123;</span>
	Super<span class="sy4">::</span><span class="me2">GetLifetimeReplicatedProps</span><span class="br0">&#40;</span>OutLifetimeProps<span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
	<span class="co1">// Value is already updated locally, skip in replication step</span>
	DOREPLIFETIME_CONDITION<span class="br0">&#40;</span>ASCharacter, bWantsToRun, COND_SkipOwner<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>A reason for taking this approach to locally updating variables before sending the request is to keep your game responsive when dealing with latency in multiplayer. If your player has to wait for his keypress to change something in-game by routing it through a server it introduces a very noticeable input lag. Players are extremely perceptive to this lag! By immediately updating the variable locally the code to start the sprinting animation can begin immediately and the game will feel more responsive as a result.
</p>
<h3><span class="mw-headline" id="Simulating_a_bomb_explosion">Simulating a bomb explosion</span></h3>
<p><i>Keywords: <a rel="nofollow" class="external text" href="https://docs.unrealengine.com/latest/INT/Gameplay/HowTo/Networking/ReplicateFunction/index.html">NetMulticast</a></i>
</p><p><a href="/File:Survival_section5_explosion.jpg" class="image"><img alt="Survival section5 explosion.jpg" src="https://d26ilriwvtzlb.cloudfront.net/3/3b/Survival_section5_explosion.jpg" width="2064" height="708" /></a>
</p><p>Our bomb actor deals damage to nearby Pawns and shows an explosion particle effect when detonated. The application of damage is done on the server-side only, the particle effect however should spawn on all clients. A great way of handling this is by using NetMulticast which sends a RPC request to all connected clients.
</p><p>The definition of a NetMulticast functions looks like this:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1">UFUNCTION<span class="br0">&#40;</span>Reliable, NetMulticast<span class="br0">&#41;</span>
<span class="kw4">void</span> SimulateExplosion<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
<span class="kw4">void</span> SimulateExplosion_Implementation<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>As with Server and Client functions, only the _Implementation function exists in the Cpp file, calling these functions is still done through the original function name (eg. SimulateExplosion()) instead of the _Implementation variant.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/* This function runs on the server, and applies the gameplay effects like damage
   It also triggers SimulateExplosion() that runs on all clients because of NetMulticast specifier */</span>
<span class="kw4">void</span> ASBombActor<span class="sy4">::</span><span class="me2">OnExplode</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
        <span class="co1">// ...</span>
&#160;
	<span class="co1">// Runs on all clients (NetMulticast)</span>
	SimulateExplosion<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
        <span class="coMULTI">/* Applies damage */</span>
        <span class="co1">// ...</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> ASBombActor<span class="sy4">::</span><span class="me2">SimulateExplosion_Implementation</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="coMULTI">/* This should generally only be used for cosmetic effects or updating collision states etc., all gameplay must run on the server. */</span>
&#160;
	<span class="kw1">if</span> <span class="br0">&#40;</span>ExplosionSound<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		AudioComp<span class="sy2">-</span><span class="sy1">&gt;</span>SetSound<span class="br0">&#40;</span>ExplosionSound<span class="br0">&#41;</span><span class="sy4">;</span>
		AudioComp<span class="sy2">-</span><span class="sy1">&gt;</span>Play<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>ExplosionFX<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		ExplosionPCS<span class="sy2">-</span><span class="sy1">&gt;</span>SetTemplate<span class="br0">&#40;</span>ExplosionFX<span class="br0">&#41;</span><span class="sy4">;</span>
		ExplosionPCS<span class="sy2">-</span><span class="sy1">&gt;</span>ActivateSystem<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Now every client will see and hear an explosion effect when the bomb is detonated by a player.
</p>
<h3><span class="mw-headline" id="Respawning_item_pickups">Respawning item pickups</span></h3>
<p><i>Keywords: <a rel="nofollow" class="external text" href="https://docs.unrealengine.com/latest/INT/Gameplay/HowTo/Networking/ReplicateVariable/index.html">Repnotify</a></i>
</p><p><a href="/File:Survival_section5_cupcakes.jpg" class="image"><img alt="Survival section5 cupcakes.jpg" src="https://d26ilriwvtzlb.cloudfront.net/1/19/Survival_section5_cupcakes.jpg" width="1823" height="685" /></a>
</p><p>Items that can be picked up in the game still persist and re-appear after a while. When picked up, the object remains in place, but will de-activate any visible effect and mesh until it re-appears through a timer. Whenever this state variable changes, we want all clients to respond by either showing or hiding the mesh of the Actor. For this we can use Repnotify, which is a specifier on a variable that binds a function to be called on any change to that variable.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1">UPROPERTY<span class="br0">&#40;</span>Transient, ReplicatedUsing <span class="sy1">=</span> OnRep_IsActive<span class="br0">&#41;</span>
<span class="kw4">bool</span> bIsActive<span class="sy4">;</span>
&#160;
UFUNCTION<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="kw4">void</span> OnRep_IsActive<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>In the implementation of the repnotify function we check the updated value and respond accordingly.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/* Only runs on clients, NOT called on server when a variable changes */</span>
<span class="kw4">void</span> ASPickupActor<span class="sy4">::</span><span class="me2">OnRep_IsActive</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>bIsActive<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		OnRespawned<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
	<span class="kw1">else</span>
	<span class="br0">&#123;</span>
		OnPickedUp<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&#160;
<span class="kw4">void</span> ASPickupActor<span class="sy4">::</span><span class="me2">GetLifetimeReplicatedProps</span><span class="br0">&#40;</span>TArray<span class="sy1">&lt;</span>FLifetimeProperty<span class="sy1">&gt;</span> <span class="sy3">&amp;</span> OutLifetimeProps<span class="br0">&#41;</span> <span class="kw4">const</span>
<span class="br0">&#123;</span>
	Super<span class="sy4">::</span><span class="me2">GetLifetimeReplicatedProps</span><span class="br0">&#40;</span>OutLifetimeProps<span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
	DOREPLIFETIME<span class="br0">&#40;</span>ASPickupActor, bIsActive<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>It's important to keep in mind that any change to a repnotify variable only triggers the function on clients and not the server. So whenever this variable changes, we need to manually call the function if we are the server:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/* This function is called on the server, so we must manually call OnPickedUp when updating bIsActive */</span>
<span class="kw4">void</span> ASPickupActor<span class="sy4">::</span><span class="me2">OnUsed</span><span class="br0">&#40;</span>APawn<span class="sy2">*</span> InstigatorPawn<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="co1">// ...</span>
&#160;
        <span class="coMULTI">/* notifies all clients, except the server */</span>
	bIsActive <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
&#160;
        <span class="coMULTI">/* Manually call the function since we are the server and didn't receive the repnotify call */</span>
	OnPickedUp<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
        <span class="co1">// ...</span>
&#160;
	Super<span class="sy4">::</span><span class="me2">OnUsed</span><span class="br0">&#40;</span>InstigatorPawn<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>Using repnotifies is great for responding to changes in the state of an Actor as we've done in pickup item example above. 
</p>
<h3><span class="mw-headline" id="Changing_the_HUD_State">Changing the HUD State</span></h3>
<p><i>Keywords: <a rel="nofollow" class="external text" href="https://docs.unrealengine.com/latest/INT/Gameplay/HowTo/Networking/ReplicateFunction/index.html">Client-function (RPC)</a></i>
</p><p><a href="/File:Survival_section5_spectating.jpg" class="image"><img alt="Survival section5 spectating.jpg" src="https://d26ilriwvtzlb.cloudfront.net/6/6a/Survival_section5_spectating.jpg" width="1280" height="409" /></a>
</p><p>Depending on the state of the game mode (or player) we show a different HUD. When the player is dead and waiting to respawn we have a spectator HUD, if the game ended we show a Game Over HUD with the total score. These states are updated and evaluated on the server, however the HUD only exists on the Client-side. One way of handling changes to the HUD from a server is to use Client functions. These functions are only executed on the owning client of an object, in this case whomever owns the HUD. Let's dive into an example of a client function.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1">UFUNCTION<span class="br0">&#40;</span>reliable, client<span class="br0">&#41;</span>
<span class="kw4">void</span> ClientHUDStateChanged<span class="br0">&#40;</span>EHUDState NewState<span class="br0">&#41;</span><span class="sy4">;</span>
&#160;
<span class="kw4">void</span> ClientHUDStateChanged_Implementation<span class="br0">&#40;</span>EHUDState NewState<span class="br0">&#41;</span><span class="sy4">;</span></pre></div></div>
<p>Its signature is identical to NetMulticast, using an _Implementation function and without _Validate as used for Server-functions. To keep track of the type of function we are dealing with, it's best to use the "Client"-prefix as is done in the engine code.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="coMULTI">/* This function is called on the server-side, and requests the client to change the HUD state */</span>
<span class="kw4">void</span> ASPlayerController<span class="sy4">::</span><span class="me2">StartSpectating</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="coMULTI">/* Perform server-side initializing of spectator code */</span>
        <span class="co1">// ...</span>
&#160;
	<span class="coMULTI">/* Update the HUD to show the spectator screen */</span>
	ClientHUDStateChanged<span class="br0">&#40;</span>EHUDState<span class="sy4">::</span><span class="me2">Spectating</span><span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span>
&#160;
<span class="coMULTI">/* Only called on the owning client */</span>
<span class="kw4">void</span> ASPlayerController<span class="sy4">::</span><span class="me2">ClientHUDStateChanged_Implementation</span><span class="br0">&#40;</span>EHUDState NewState<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	ASHUD<span class="sy2">*</span> MyHUD <span class="sy1">=</span> Cast<span class="sy1">&lt;</span>ASHUD<span class="sy1">&gt;</span><span class="br0">&#40;</span>GetHUD<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="kw1">if</span> <span class="br0">&#40;</span>MyHUD<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		MyHUD<span class="sy2">-</span><span class="sy1">&gt;</span>OnStateChanged<span class="br0">&#40;</span>NewState<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></div></div>
<p>This pattern is very useful for performing client side logic that the client did not request itself in the first place like it would with keyboard input events.
</p>
<h2><span class="mw-headline" id="Closing">Closing</span></h2>
<p>By now we've covered 4 common replication concepts using a few practical examples from the project. I definitely recommend studying the documentation pages on <a rel="nofollow" class="external text" href="https://docs.unrealengine.com/latest/INT/Gameplay/Networking/">Networking and Multiplayer</a>, they will help you in understanding the flow of data when dealing with networking in games.
</p><p>If you have feedback or questions on this section, feel free to reach out through the <a rel="nofollow" class="external text" href="https://forums.unrealengine.com/showthread.php?71057-Announcing-Section-5-of-Survival-Game-Networking-your-game">forums</a>.
</p>
<h3><span class="mw-headline" id="Links_2">Links</span></h3>
<ul>
<li> <a rel="nofollow" class="external text" href="https://forums.unrealengine.com/showthread.php?63678-Ongoing-C-Gameplay-Example-Series-Making-a-Survival-Game">Forum Thread</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://wiki.unrealengine.com/Survival_sample_game">Project Overview</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://wiki.unrealengine.com/Survival_Sample_Game:_Section_4">Previous Section (Gameloop, (Re)spawning, Time of Day)</a>
</li>
<li> <a rel="nofollow" class="external text" href="https://github.com/tomlooman/EpicSurvivalGameSeries">Source at GitHub</a>
</li>
</ul>
<h3><span class="mw-headline" id="Notes">Notes</span></h3>
<p>If you're adding networking to your own game, you must specify the UnrealNetwork header in your ProjectName.h (in our case SurvivalGame.h)
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="cpp source-cpp"><pre class="de1"><span class="co1">// This is NOT included by default in an empty project! It's required for replication and setting of the GetLifetimeReplicatedProps</span>
<span class="co2">#include &quot;Net/UnrealNetwork.h&quot;</span></pre></div></div>
<p><br />
<b>Project &amp; Wiki by <a rel="nofollow" class="external text" href="http://www.tomlooman.com/">Tom Looman</a></b>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.122 seconds
Real time usage: 0.229 seconds
Preprocessor visited node count: 167/1000000
Preprocessor generated node count: 358/1000000
Post‐expand include size: 167/2097152 bytes
Template argument size: 11/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->
</div>												<div class="printfooter">
				Retrieved from "<a href="https://wiki.unrealengine.com/index.php?title=Survival_Sample_Game:_Section_5&amp;oldid=14443">https://wiki.unrealengine.com/index.php?title=Survival_Sample_Game:_Section_5&amp;oldid=14443</a>"				</div>
												<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="/Category:Tutorial" title="Category:Tutorial">Tutorial</a></li><li><a href="/index.php?title=Category:SurvivalGameSeries&amp;action=edit&amp;redlink=1" class="new" title="Category:SurvivalGameSeries (page does not exist)">SurvivalGameSeries</a></li><li><a href="/Category:Code" title="Category:Code">Code</a></li><li><a href="/Category:Templates" title="Category:Templates">Templates</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		</div>
		</div>
		
		<div id="footer">
			<div id="brand">

			</div>
			<div id="legal">
				<div id="copyright">
					&copy; 2004-2015, Epic Games, Inc. All rights reserved. Unreal and its logo are Epic's trademarks or registered trademarks in the US and elsewhere.
				</div>
				<div id="terms">
					<a target="_blank" href="http://epicgames.com/tou">TERMS OF USE</a> | <a target="_blank" href="http://epicgames.com/privacynotice">PRIVACY POLICY</a>
				</div>
			</div>
		</div>
	</div>
		<!--<div id="footer" role="contentinfo">
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<div name="copyright">&#169; 2004-2014, Epic Games, Inc. All rights reserved. Epic Games, Unreal, Unreal Engine, Unreal Tournament, and their respective logos are Epic's trademarks or registered trademarks in the US and elsewhere.</div>
					</li>
					<li id="footer-termsofuseico">
						<div name="termsofuse"><a href="http://epicgames.com/tou" target="_blank">Terms of Use</a></div>
					</li>
					<li id="footer-privacynoticeico">
						<div name="privacynotice"><a href="http://epicgames.com/privacynotice" target="_blank">Privacy Policy</a></div>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>-->
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","skins.vector.collapsibleNav"],null,true);
}</script>
<script src="/extensions/EpicSearchSystem/Javascript/Search.js?303"></script>
<script src="https://wiki.unrealengine.com/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=epic&amp;*"></script>
<!-- Served in 0.306 secs. -->		<img src="https://tracking.unrealengine.com/track.png" width="1" height="1">
		<!--<script type="text/javascript">
			setTimeout(function () {
				var a = document.createElement("script");
				var b = document.getElementsByTagName("script")[0];
				a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0028/4572.js?" + Math.floor(new Date().getTime() / 3600000);
				a.async = true; a.type = "text/javascript"; b.parentNode.insertBefore(a, b)
			}, 1);
		</script>-->
	</body>
</html>

		